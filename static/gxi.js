gx.setGxObyCtx=function(d,a){var b;void 0!=d&&(b=gx.getObj(d,a))&&gx.setGxO(d,a);return gx.O};gx.parentGridRow=function(d,a){var b=gx.fn.currentGridRowImpl(d);return b=(b=a.getGridById(d,b))&&b.parentGrid?gx.fn.currentGridRow(b.parentGrid.gridId):void 0};gx.applyPicture=function(d,a){if(!gx.lang.emptyObject(d)&&!gx.lang.emptyObject(d.pic)&&!gx.lang.emptyObject(d.type))try{switch(d.type){case "int":case "decimal":return gx.num.formatNumber(a,d.dec,d.pic,d.len,d.sign,!0);case "char":return a;default:return a}}catch(b){}return a};
gx.SetOld=function(d,a,b){var c=a,d=gx.fn.controlGridId(d);0<d&&(c=a+"_"+gx.fn.currentGridRow(d));gx.fn.setHidden(c,gx.getVar(b))};gx.Old=function(d,a){try{var b=a,c=gx.fn.controlGridId(d);0<c&&(b=a+"_"+gx.fn.currentGridRow(c));var f=gx.fn.getHidden(b);"undefined"==typeof f&&""!=gx.O.CmpContext&&(f=gx.fn.getHidden(gx.O.CmpContext+b));return f}catch(k){gx.dbg.logEx(k,"gxapi.js","Old")}return""};gx.OldInteger=function(d,a){var b=parseInt(gx.Old(d,a),10);return isNaN(b)?0:b};
gx.OldDecimal=function(d,a){var b=gx.num.parseFloat(gx.Old(d,a),gx.thousandSeparator,gx.decimalPoint);return isNaN(b)?0:b};gx.OldDate=function(d,a){return(new gx.date.gxdate(gx.Old(d,a),"Y4MD")).getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(d,a){var b=new gx.date.gxdate(gx.Old(d,a),"Y4MD");return b.getStringWithFmt(gx.dateFormat)+" "+b.getTimeString(!0,!0)};
gx.dom_i=function(d){return{el:function(a,b,c){if(a){if("string"===typeof a){var f=this.byId(a);if(null!=f||!c&&(f=this.byId("span_"+a),null!=f))return f;if(b)return null;f=this.byName(a);return null!=f&&0<f.length?(f[0].id||(f[0].id=a),f[0]):null}return a}return null},matchesSelector:function(){var a;return function(b,c){var f,b=gx.dom.byId(b);f=b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector;void 0===a&&(a=gx.util.browser.isIE()&&
8>=gx.util.browser.ieVersion());return a||!f?d(b).is(c):f?f.call(b,c):!1}}(),hasAttribute:function(a,b){return a.hasAttribute?a.hasAttribute(b):void 0!==a[b]},hasClass:function(a,b){var c=gx.dom.el(a,!0);if(c)return b&&-1!=(" "+c.className+" ").indexOf(" "+b+" ")},addPrefixClass:function(a,b){if(a){var c=d(a);a.className&&!c.attr("data-gx-unprefixed-class")&&(c.attr("data-gx-unprefixed-class",a.className),c=a.className.split(" "),c.splice(0,0,""),a.className+=c.join(" "+b))}},removePrefixClass:function(a,
b){if(a){var c=d(a);if(0<=a.className.search(RegExp("(^|\\s)"+b))){var f=c.attr("data-gx-unprefixed-class");c.removeAttr("data-gx-unprefixed-class");a.className=f||a.className.substring(b.length)}}},addClass:function(a,b){var c=gx.dom.el(a,!0);c&&(b&&!this.hasClass(a,b))&&(c.className=c.className+(c.className?" ":"")+b)},classReCache:{},removeClass:function(a,b){var c=gx.dom.el(a,!0);if(c&&this.hasClass(a,b)){var f=this.classReCache[b];f||(f=RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g"),this.classReCache[b]=
f);c.className=c.className.replace(f," ")}},hasTransition:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,c="transitionDuration";b.isIE()&&(c="msTransitionDuration");b.isWebkit()?c="webkitTransitionDuration":b.isFirefox()?c="MozTransitionDuration":b.isOpera()&&(c="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[c],10);return 0!==a&&!isNaN(a)}return!1},hasAnimation:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,c="animationName";b.isIE()&&(c="msAnimationName");
b.isWebkit()?c="webkitAnimationName":b.isFirefox()?c="MozAnimationName":b.isOpera()&&(c="OAnimationName");return(a=gx.dom.getComputedStyle(a)[c])&&"none"!=a}return!1},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder")||gx.dom.hasClass(a,"gx-download-placeholder"))},purgeElement:function(a,b){var c=b||a.attributes,f,k,d;if(c){k=c.length;for(f=0;f<k;f+=1)d=c[f].name||c[f],"function"===typeof a[d]&&(a[d]=null)}},
purge:function(a,b){b||this.purgeElement(a);var c=a.childNodes;if(c)for(var f=0,k=c.length;f<k;f++)gx.dom.purge(c[f],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=this.form().elements,b=a.length,c=0;c<b;c++)a[c].gxIndex=c},setAttribute:function(a,b,c){var f=function(){try{var f=gx.dom.byName(a);
if(null!=f&&0<f.length)for(var d=f.length,j=0;j<d;j++)f[j].setAttribute(b,c);else j=gx.dom.byId(a),null!=j&&j.setAttribute(b,c)}catch(l){gx.dbg.logEx(l,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,f,{single:!0}):f.apply(this)},createInput:function(a,b){var c=document.createElement("input");c.type=b;c.id=a;c.name=a;gx.dom.form().appendChild(c);return c},hasSelectedFile:function(){var a=d('input[type="file"]'),b=a.length;if(!b)return!1;for(var c=
0;c<b;c++)if(!gx.lang.emptyObject(a[c].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),b=a.length;if(!b)return!1;for(var c=0;c<b;c++){var f=a[c].getAttribute("type");if("submit"==f||"image"==f)return!0}return!1},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var b=[],c=a.length,f=0;f<c;f++){var k=a[f].href;gx.lang.emptyObject(k)||b.push(k)}return b}return[]},getComputedStyle:function(a){try{return"#document"==a.nodeName?null:"function"==
typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(b){return gx.dbg.logEx(b,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,b){var c="";try{var c="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[b]:"undefined"!=typeof a.currentStyle?a.currentStyle[b]:a.style[b],f=parseInt(c);isNaN(f)||(c=f)}catch(k){gx.dbg.logEx(k,"gxapi.js","getStyle")}return c},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,
CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(a,b){var c,f=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,k;this.cssRules||(this.cssRules=[]);try{if(k=a.cssRules||a.rules)for(var d=0,j=k.length;d<j;d++)c=k[d].cssText,b&&(c=c.replace(this.CSS_URL_REGEXP,'url("'+f+'$1")')),this.cssRules.push(c)}catch(l){}},getCssRules:function(a,b){var c=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];for(var f=0,k=c.length;f<k;f++)try{c[f].disabled||
this.cacheStyleSheet(c[f],b)}catch(d){}}return this.cssRules},setStyleElement:function(a,b,c){try{a.innerHTML=(c?a.innerHTML:"")+b}catch(f){a.styleSheet.cssText=(c?a.styleSheet.cssText:"")+b}},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},isRadio:function(a){return a&&"INPUT"==a.tagName&&"radio"==a.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0,month:!0,week:!0},isEditControl:function(a){return a&&
"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isTextControl:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return!a?!1:this.isButton(a)||gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:a&&"INPUT"===a.nodeName?"file"===a.type||("image"===a.type||"checkbox"===a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;
if(a.contentWindow)return a.contentWindow.document}catch(b){}return null},forEachChild:function(a,b,c){if(a&&a.childNodes&&"function"==typeof c)for(var f=a.childNodes.length,k=0;k<f&&!1!==c.call(b,a.childNodes[k]);k++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:!1},isChildNode:function(a,b){a.frameElement&&(a=a.frameElement);if(a==b)return!0;for(;a.parentNode;){if(a==b||a.parentNode==b)return!0;a=a.parentNode}return!1},
NodeLevel:function(a){for(var b=0;a.parentNode;)(a.id||a.name)&&b++,a=a.parentNode;return b},findParentByTagName:function(a,b,c){a=a.parentNode;b=b.toUpperCase();for(i=0;a&&!(c&&i==c);){i++;if(a.tagName==b)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},allChildrenAreText:function(a){for(a=a.firstChild;a;){var b=a.nodeName.toLowerCase();if("#text"!==b&&"pre"!==b&&null!=a.offsetParent)return!1;a=a.nextSibling}return!0},
position:function(a){a=d(a).offset();return{x:Math.floor(a.left),y:Math.floor(a.top)}},dimensions:function(a){a=d(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var b=a.documentElement,c=a.body;if(b&&b.scrollHeight){var a=Math.max(b.scrollHeight,c.scrollHeight),f=Math.max(b.scrollWidth,c.scrollWidth),k=Math.max(b.clientHeight,c.clientHeight),b=Math.max(b.clientWidth,c.clientWidth);return{scrollWidth:f,scrollHeight:a,clientHeight:k,clientWidth:b}}return{scrollWidth:c.scrollWidth,
scrollHeight:c.scrollHeight,clientHeight:c.clientHeight,clientWidth:c.clientWidth}},documentScroll:function(a){var a=a||document,b=-1,c=-1;try{b=a.documentElement.scrollTop||a.body.scrollTop,c=a.documentElement.scrollLeft||a.body.scrollLeft}catch(f){}return{scrollTop:b,scrollLeft:c}},documentScrollable:function(a){var a=a||document,b={x:!1,y:!1},a=gx.dom.windowDimensions(a);a.scrollHeight>a.clientHeight&&(b.x=!0);a.scrollWidth>a.clientWidth&&(b.x=!0);return b},autofitIFrame:function(a){var a=gx.evt.source(window.event||
a),b=window.frames[a.name].document;if(b&&!(""!=a.width||""!=a.height)){var c=gx.dom.windowDimensions(b),b=c.scrollWidth?c.scrollWidth+10:null,c=c.scrollHeight?c.scrollHeight+10:null;b&&c&&(a.style.width=b+"px",a.style.height=c+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var b=null,c=a.childNodes.length,f=0;f<c;f++){var k=a.childNodes[f];if("TABLE"==k.nodeName){b=k;break}}if(null!=b&&(-1!=b.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(b.style.width)),
-1!=b.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(b.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,b){if(null!=a)if(a.createTextRange){var c=a.createTextRange();c.move("character",b);c.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(b,b)):a.focus()},replaceAtCaretPosition:function(a,b){var c=
a.selectionStart,f=a.selectionEnd;document.selection?(c=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(c),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),c=a.selectLeft.text.length+1,f=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(c=a.selectionStart,f=a.selectionEnd);a.setRangeText?a.setRangeText(b,c,f,"end"):(a.value=a.value.substr(0,c)+b+a.value.substr(c,
a.value.length),gx.dom.setCaretPosition(a,c+b.length))},spanValue:function(a){var b=a.nodeValue;gx.lang.emptyObject(b)&&(b=a.innerText||a.textContent);gx.lang.emptyObject(b)&&(b="");return b},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var b=
document.createRange();a&&(b.selectNode(a),b.deleteContents())}},comboBoxToObj:function(a,b){try{var c={s:"",v:[]};if(!a)return c;if("SELECT"==a.tagName){c.s=a.value;for(var f=a.options.length,k=0;k<f;k++){var g=d(a.options[k]);c.v.push([g.val(),g.text()])}}else"SPAN"==a.tagName&&(k=gx.fn.getControlValue_span(a),c.v.push([b,k]),c.s=b);return c}catch(j){gx.dbg.logEx(j,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(a,
b){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(b||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(b){}return a},getCaretOffset:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type&&"undefined"!==typeof a.selectionStart?{s:a.selectionStart,e:a.selectionEnd}:{s:0,e:0}},setCaretOffset:function(a,b){a&&("INPUT"==a.tagName&&"text"==a.type&&a.setSelectionRange)&&a.setSelectionRange(b.s,b.e)},write:function(a,b){b=b||document;
b.write(a)},writeError:function(a,b,c,f){gx.dbg.write(a);f=f||document;f.head.innerHTML="";f.body.innerHTML=a},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",isMaskElement:function(a){return this.hasClass(a,this.MASK_CLASS)},mask:function(a){if((a=this.el(a))&&!this.hasClass(a,this.MASK_RELATIVE_CLASS)){var b,c=gx.util.browser,f=c.ieVersion(),k=6==f||c.isIE&&c.isCompatMode(),g=!!a.style.setExpression;(!d(a).is("body")||"static"!=this.getComputedStyle(a).position)&&
this.addClass(a,this.MASK_RELATIVE_CLASS);b=document.createElement("div");b.className=this.MASK_CLASS;if("TABLE"==a.tagName){var j=d(b),l=d(a);j.width(l.width());j.insertAfter(l);j.parent().addClass(this.MASK_RELATIVE_CLASS)}else a.appendChild(b);this.addClass(a,this.MASKED_CLASS);if(k&&g)try{b.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(m){}else if(a=this.getComputedStyle(a).height,c.isIE&&(7!=c.ieVersion||c.isCompatMode())&&"auto"==
a)b.style.height=a;if(c.isIE()&&(7>=f||c.isCompatMode()))d(b),(c=this.getComputedStyle(b).opacity)&&d(b).css("opacity",c);return b}},unmask:function(a){var a=this.el(a),b;if("TABLE"==a.tagName){var c=a.nextSibling;c&&("DIV"==c.tagName&&this.hasClass(c,this.MASK_CLASS))&&(b=c)}else for(var c=0,f=a.childNodes.length;c<f;c++)if("DIV"==a.childNodes[c].tagName&&this.hasClass(a.childNodes[c],this.MASK_CLASS)){b=a.childNodes[c];break}b&&!b.removed?(b.removed=!0,b.style.clearExpression&&(b.style.clearExpression("width"),
b.style.clearExpression("height")),this.removeClass(a,this.MASKED_CLASS),c=gx.dom.hasTransition(b)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(b)?gx.dom.ANIMATION_END_EVENT:!1,f=function(){if(a.tagName=="TABLE"){if(b.parentNode){gx.dom.removeClass(b.parentNode,this.MASK_RELATIVE_CLASS);b.parentNode.removeChild(b)}}else b.parentNode==a&&a.removeChild(b);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),c?gx.evt.attach(b,c,f,!1,{single:!0,useCapture:!0,timeout:300}):f(),this.addClass(b,
this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(a,b,c){var c=c||{},f=c.enteringClass||"entering",k=c.leavingClass||"leaving",d=c.enterDurationClass||"enter-fx-duration",j=c.leaveDurationClass||"leave-fx-duration",l=c.transitioningClass||"transitioning",m=c.transitionTimeout||1500,n=function(a){return 0<a.childNodes.length&&(gx.dom.hasAnimation(a)||gx.dom.hasTransition(a))&&!gx.dom.hasClass(a.parentNode,l)},o=function(a){return gx.dom.hasAnimation(a)?
gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(a)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==a.tagName&&(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==b.tagName&&gx.dom.addClass(b,b.className+"-fx");var p=a.parentNode,q=n(a),t=n(b);useParallelFx="BODY"!=a.tagName;if(q||t){var n=document.createElement("iframe"),r=document.createElement("div"),s,u,y=this.getComputedStyle(a),w=y.width,y=y.height,v,x,B=o(a),C=o(b),E,z,A,I,H,F=0,o=0;gx.dom.addClass(p,l);if("BODY"!=a.tagName&&"BODY"!=
b.tagName)if(q){n.setAttribute("scrolling","no");n.setAttribute("frameborder","0");n.style.width=gx.dom.addUnits(window.innerWidth);n.style.height=gx.dom.addUnits(window.innerHeight);n.style.display="none";r.appendChild(n);r.style.width=w;r.style.height=y;r.style.overflow="hidden";gx.spa.dettachContent(a);a.insertBefore(r,a.firstChild);r=n.contentDocument;try{r.open(),r.write(this.getDocTypeDeclaration(document)),r.write("<html>"),r.write("<head></head>"),r.write("<body><div></div></body>"),r.write("</html>"),
r.close()}catch(G){gx.dbg.logEx(G,"gxapi.js","replaceWithFx"),s=r.createElement("div"),r.body.appendChild(s)}r.documentElement&&(r.documentElement.className="gx-fx-iframe");r.body.style.margin="0";r.body.className=gx.dom.form().className;r.head.appendChild(document.createElement("style"));s=r.styleSheets[0];u=gx.dom.getCssRules(!0,!0);v=0;for(x=u.length;v<x;v++)try{s.insertRule(u[v],o),o++}catch(J){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+u[v])}r.body.firstChild.style.width=w;for(r.body.firstChild.style.height=
y;a.childNodes[1];)r.body.firstChild.appendChild(a.childNodes[1]);n.style.display="block"}else t&&(a.style.display="none");gx.dom.addClass(b,f);gx.dom.addClass(b,d);gx.dom.addClass(a,j);!1!==c.domAdd&&p.appendChild(b);j=function(){A=function(){if(F===2){gx.dom.removeClass(p,l);if(useParallelFx){c.transitionEndCallback&&(b=c.transitionEndCallback(a,b));c.domRemove!==false&&a.parentNode==p&&p.removeChild(a)}gx.dom.removeClass(b,d)}else if(!useParallelFx){c.transitionEndCallback&&(b=c.transitionEndCallback(a,
b));gx.dom.removeClass(b,f);t&&(H=setTimeout(z,m))}};if(q){E=function(){clearTimeout(I);F++;c.leavingTransCallback&&c.leavingTransCallback(a,b);A()};gx.evt.attach(a,B,E,false,{single:true,useCapture:true})}else{F++;A()}if(t){z=function(){if(F>=2)gx.evt.detach(b,C,z);else{clearTimeout(H);F++;c.enteringTransCallback&&c.enteringTransCallback(a,b);A()}};gx.evt.attach(b,C,z,false,{single:true,useCapture:true})}else{F++;A()}setTimeout(function(){gx.dom.addClass(a,k);if(useParallelFx){gx.dom.removeClass(b,
f);t&&(H=setTimeout(z,m))}q&&(I=setTimeout(E,m))},100)};c.beforeTransitionStart?!0!==c.beforeTransitionStart(j)&&j():j()}else!1!==c.domRemove&&p.removeChild(a),!1!==c.domAdd&&(a.parentNode==p?p.replaceChild(b,a):p.appendChild(b)),c.beforeTransitionStart&&c.beforeTransitionStart(),c.leavingTransCallback&&c.leavingTransCallback(a,b),c.enteringTransCallback&&c.enteringTransCallback(a,b),c.transitionEndCallback&&(b=c.transitionEndCallback(a,b))},getDocTypeDeclaration:function(a){a=a||document;a=a.doctype;
parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?a.webkitCreateShadowRoot():!1},fixes:function(){var a=RegExp("gx-tab-padding-fix-\\d+","ig"),b=RegExp("gx-tab-spacing-fix-\\d+","ig"),c={},f={},k,g,j,l={center:{marginLeft:"auto",marginRight:"auto",
className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{getFixesStyleElement:function(){var a=d("#gx-dom-fixes")[0],b;a||(a=document.createElement("style"),a.id="gx-dom-fixes",b=gx.getThemeElement(),d("head")[0].insertBefore(a,b),gx.util.browser.isIE()&&d(b).insertAfter(a));return a},html5:function(a){var b=gx.util.browser,c=b.isIE(),
f=[],k;d("TABLE",a||document.body).each(function(){var a=d(this);a.attr({align:a.data("align")})});if(!a){if(!j){for(k in l)gx.lang.apply(l[k],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});j=Mustache.compile(".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}")}for(k in l)f.push(j(l[k]));
k=this.getFixesStyleElement();gx.dom.setStyleElement(k,f.join(""),!0)}if(c||b.isOpera())d("td[data-align]",a||document.body).each(function(){var a=d(this),b=a.attr("data-align").toLowerCase(),c=l[b].className,f=a.attr("class")||"";f&&(f=" "+f);a.attr("align",b);a.hasClass(c)||a.attr("class",c+f);a.children("div."+l[b].contHolderClassName).children("div."+l[b].contHolderBodyClassName).addClass(c);a.children("div."+l[b].wcClassName).children("div."+l[b].wcBodyClassName).addClass(c)})},setPopupMinWidth:function(){var a=
gx.popup.getPopup();if(a){if(gx.runtimeTemplates){var b=this.getPopupMinWidth();d(document.documentElement).css("min-width",gx.dom.addUnits(b));d(document.documentElement).addClass("gx-popup-document")}(a.autoresize||void 0===a.autoresize)&&d(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var a=gx.popup.getPopup(),b=c;if(a&&(b=a.width,a.autoresize||void 0===a.autoresize)){var c=600,a=d(a.window).width(),b=800;1200<=a&&(b=900);768<=a&&992>a&&(b=c);768>a&&(b=a-20)}return b},
fixTableResets:function(j){var l=[],o=[],p=this.getFixesStyleElement();k||(k=Mustache.compile("{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}"));g||(g=Mustache.compile("{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}"));d("table[data-cellpadding], table[data-cellspacing]",j||document.body).each(function(){var k=this.getAttribute("data-cellpadding");void 0!==k&&(c[k]||(c[k]=k,l.push(k)),d("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className=
"gx-tab-padding-fix-"+k+" "+this.className.replace(a,"")}));var g=this.getAttribute("data-cellspacing");void 0!==g&&(f[g]||(f[g]=g,o.push(g)),this.className="gx-tab-spacing-fix-"+g+" "+this.className.replace(b,""))});gx.dom.setStyleElement(p,k(l)+g(o),!0)},createLegacyNotification:function(){d("div#gx_ajax_notification").length||d('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&
gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(a,b){var c=d(b)[0].offsetTop-d(a)[0].offsetTop-d(a).scrollTop();return a&&d(b)[0]?c<d(a).height():!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);
gx.evt_i=function(d){return{eachKeyAutorefreshType:function(a){return!gx.lang.isNumericType(a)&&!gx.lang.isDateType(a)},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=
this.hooks.length,b=0;b<a;b++){var c=this.hooks[b];try{this.detach(c.c,c.e,c.f),c.c=null,c.f=null}catch(f){gx.dbg.logEx(f,"gxapi.js","clearHooks")}this.hooks[b]=null}this.hooks=[]},source:function(a){return a.target||a.currentTarget||a.srcElement},createEvent:function(a,b,c,f){var k,b=void 0===b?!0:b,c=void 0===c?!0:c,f=f||{};window.CustomEvent?k=new CustomEvent(a,{bubbles:b,cancelable:c,detail:f}):(k=document.createEvent("CustomEvent"),k.initCustomEvent(a,b,c,f));return k},dispatch:function(a,b){return a.dispatchEvent?
a.dispatchEvent(b):a.fireEvent("on"+b.type,b)},fireEvent:function(a,b){gx.evt.dispatch(a,gx.evt.createEvent(b))},detach:function(a,b,c,f){try{if(f=f||{},"string"==typeof b)a.removeEventListener?a.removeEventListener(b,c,f.useCapture||!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null;else if(gx.lang.isArray(b))for(var k=0,d=b.length;k<d;k++)this.detach(a,b[k],c,f)}catch(j){gx.dbg.logEx(j,"gxapi.js","detach")}},stopPropagation:function(a){a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=
!0)},cancel:function(a,b){if(b&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(c){}"undefined"==typeof a.preventDefault?(a.cancelBubble=b,a.returnValue=!b):b&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(b){gx.dbg.logEx(b,"gxapi.js","checkCtrlFocus")}},doClick:function(a,b){if(gx.isInputEnabled()){var c=gx.evt.source(b);if("button"!=c.type&&
"submit"!=c.type&&(c=gx.dom.el(a),gx.fn.isAccepted(c))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var b=gx.csv.lastId,c=gx.O.focusControl;gx.O.focusControl=a;this.onblur(a,gx.O.focusControl);gx.O.focusControl=c;gx.csv.lastId=b},onblur:function(a,b){if(gx.O&&!0!==gx.csv.IgnoreBlur){var c=gx.fn.controlRowId(a);gx.csv.lastId=b;try{var f=gx.fn.validStruct(b);f&&null!=f.gxgrid&&f.gxgrid.updateControlValue(f,
!1,c);var k=gx.csv.lastControl;if(k){var d=k.getAttribute("maxlength");0<d&&k.value.length>d&&(k.value=k.value.substring(0,d));if(f&&"bits"==f.type&&0==f.ro){var j=gx.fn.getControlGridRef(f.fld,f.gxgrid?f.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>k.id.indexOf(f.fld)&&(k=j);var l=gx.html.multimediaUpload.getContainer(j);gx.html.multimediaUpload.refreshPreviewImg(l,k)}}}catch(m){gx.dbg.logEx(m,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforefocus",arguments);
gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onafterfocus")};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,b,c,f,k,d,j){try{gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return!1;gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),!1;var l=!1;gx.csv.cmpCtx!=c&&(l=!0,gx.O.fromValid=0);gx.setGxO(c,f);l&&gx.fn.changeCmpContext();
gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(m){gx.dbg.logEx(m,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==d||""!=k)&&gx.fn.setCurrentGridRow(d,k);gx.fx.installSuggest(a);var n=!1;if(gx.csv.lastGrid!=d){gx.csv.lastRow[d]=null;if(!j){if(gx.csv.lastGrid<d){var o=gx.fn.firstGridControl(d);gx.O.fromValid>o&&(gx.O.fromValid=o)}gx.csv.lastGrid=d}n=!0}0<b&&(gx.O.focusControl=b);if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(p){gx.dbg.logEx(p,
"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;try{var q=gx.fn.getControlValue("Mode");if("DLT"==q||"DSP"==q||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!j)return gx.evt.setReady(!0),!0}catch(t){gx.dbg.logEx(t,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),
gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&(gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId)&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1).done(function(a){if(a){gx.csv.invalidControl=null;gx.evt.setReady(true)}}),!0;j?(gx.O.fromValid=
gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[d]&&(gx.csv.lastRow[d]!=k&&!n)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var r=gx.fn.controlIds();0<r.length&&gx.O.fromValid<r[0]&&(gx.O.fromValid=r[0]);gx.lang.emptyObject(gx.csv.lastRow[d])&&0!=d&&(gx.csv.rowChanged=
!0,gx.csv.lastRow[d]=k);var s=gx.O,u=gx.csv.lastId,y=gx.fn.validStruct(u,s);if(y)var w=gx.csv.lastRow[y.grid];gx.csv.checkRowChange(u,n,s,w).done(function(b){var c=false,f=false,j=function(){gx.csv.invalidControl==null&&(a.nodeName=="SELECT"?(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=7)&&gx.fn.setSelection(a):(!gx.util.browser.isSafari()||gx.dom.isTextControl(a)&&a.selectionEnd===0)&&gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(true)};if(!gx.lang.emptyObject(w)&&
!gx.lang.emptyObject(k)&&w.length>k.length){c=w.substring(w.length-k.length);c=parseInt(c)<parseInt(k)}if(gx.csv.backwardGridValidation){!gx.lang.emptyObject(w)&&(!gx.lang.emptyObject(k)&&w.length==k.length&&parseInt(w)>parseInt(k))&&(f=s.focusControl>gx.fn.firstGridControl(d));!gx.lang.emptyObject(w)&&(!gx.lang.emptyObject(k)&&w.length==k.length&&parseInt(w)<parseInt(k))&&(f=s.focusControl<u&&s.focusControl>gx.fn.firstGridControl(d))}if(b&&gx.csv.invalidControl==null&&f){s.fromValid=gx.fn.firstGridControl(d);
gx.csv.validControls(s.fromValid,s.focusControl,true,gx.O)}else if((!b||n)&&(s.focusControl>=u||c)){if(gx.fn.lastMainLevelCtrlId(u,d))if((b=gx.fn.getControlRefById(u))&&b.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1)s.fromValid=u+1;gx.csv.validateAll(s).done(j)}else{s.toValid=s.focusControl;j()}});if(d&&k){var v=gx.O.getGridById(d,k);v&&v.allowSelection&&v.setSelection(parseInt(k,10)-1)}}catch(x){gx.dbg.logEx(x,"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&
GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,b,c){gx.pO.MasterPage&&a.req.setRequestHeader(c,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,c,f,k,d){gx.reinit(!d)},oncontentreplace:function(a,b,c,f,k,d,j,l){var a=
gx.lang.getType(f),d=(d=d==j?d:j)?gx.lang.getType(d.toLowerCase()):!1,m=gx.ajax.getJsonResponse();m&&gx.fn.setJsonHiddens(null,m.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);l?gx.setMasterPage(k):d&&gx.setMasterPage(new d);gx.ajax.clearJsonResponse();m?gx.ajax.setJsonResponse({response:m,isPostBack:!1,afterCmpLoaded:function(){l&&(k.restoreTargetComponents(),k.restoreExoEventHandlers());gx.objectLoad(m.gxGrids,m.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):
gx.objectLoad()}}});gx.livePrevWS._init()})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},onunload:function(a){gx.objectUnload(a);gx.spa.stop()},onclick:function(a){var b={event:a};gx.fx.obs.notify("gx.onclick",[b]);b.cancel||(gx.evt.setReady(!1),gx.isInputEnabled(a)||gx.evt.cancel(a,!0),gx.evt.mouse.update(a),setTimeout(function(){gx.fx.ctx.notify()},
10),gx.evt.setReady(!0))},ontouchstart:function(a){a=gx.evt.onmousedown.closure(this,[a]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(a,150):a()},onmousedown:function(a){var b=window.event||a,c=gx.evt.source(b);if(c&&8>=gx.util.browser.ieVersion()&&d(c).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(c);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();c=a.getSource(b);!gx.dom.isMaskElement(b.target)&&null!=c&&(gx.evt.cancel(b,
!0),gx.setGxO(c.obj),a.drag(c.obj,c.types,c.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var b=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var c=gx.popup.ext;c.movepopup();if(null!=c.currIDb||null!=c.currRS)return!1}null!=b.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,b.obj.gxDragTypes)&&b.over(),b.moveControl(b.dragCtrl))},onmouseup:function(a){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var b=gx.fx.dnd;
if(null!=b.dragCtrl){var c=window.event||a,c=b.getTarget(c,b.obj.gxDragTypes);null!=c?(b.deleteClonControl(),gx.setGxO(c.obj),b.drop(b.dropCtrl,c.obj,c.hdl)):b.restoreControl();c=window.event||a;gx.evt.cancel(c,!0)}b.out();b.dragCtrl=null;b.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);var b=window.event||a;(gx.util.browser.isOldIE()||!gx.fx.dom.delayedDispatch(a))&&gx.fx.dom.raiseEvent("dblclick",b)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},
checkMaxLength:function(a,b,c){var c=window.event||c,f=gx.util.browser.isIE(),k=c.keyCode;if(f){if("keydown"==c.type&&229==k)return a.value.length<=b?a.ImeKey=!0:!1;if("keyup"==c.type&&8==k&&a.ImeKey&&a.value.length+1>=b)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==c.type||f)return a.value.length+1<=b||8==k||9==k||46==k||35<=k&&40>=k},fireControlValueChange:function(a,b,c){var f=d.Deferred();if(!a||!b)return f.resolve();var k=a.getValidStructFld(b);return k&&k.evt_cvc?
(gx.evt.startValidation(k.gxgrid),gx.evt.stopPropagation(c),a[k.evt_cvc].call(a).always(function(){gx.fx.delayedValidation=!0;gx.evt.endValidation(k.gxGrid,!0)})):d.Deferred().resolve()},fireControlValueChanging:function(a,b){var c=d.Deferred();if(!a||!b)return c.resolve();var f=a.getValidStructFld(b);return f&&f.evt_cvcing&&!f.gxsgprm?(gx.evt.startValidation(f.gxgrid),"function"==typeof f.c2v&&f.c2v(),"function"==typeof f.v2bc&&f.v2bc.call(a),a[f.evt_cvcing].call(a).always(function(){gx.evt.endValidation(f.gxGrid,
!0)})):c.resolve()},oncontrolvaluechanging:function(a){var b=a.keyCode;8!=b&&32>b||(33<=b&&46>b||112<=b&&123>=b)||(a=gx.evt.source(a))&&gx.evt.fireControlValueChanging(gx.O,a)},onkeypress:function(a,b,c){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,f=13===a.keyCode;27==a.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(a,!0);var k=gx.fn,g=gx.util.browser,b={event:a,hasEnter:b,skipOnEnter:c,cancel:!1};if(27==a.keyCode&&gx.popup.ispopup())k.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",
[b]),!b.cancel){f&&!gx.isInputEnabled()&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var j=a.ctrlKey,b=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(b,a)||this.cancel(a,!0);9!==a.keyCode&&gx.csv.invalidateCtrl(b,a);if(!this.isEnterEvtCtrl(b)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a))if(this.checkFuncKey(a,b),(32==a.charCode||
32==a.keyCode||f&&!c)&&gx.dom.hasClass(b,"gx_newrow")&&d(b).find("span").click(),f&&c||!gx.grid.handleKeyPressEvt(a))switch(a.keyCode){case 13:if(f=this.triggersEvt(b),c){if(k.enterHasFocus())break;if(this.shiftPressed&&"TEXTAREA"==b.nodeName&&g.isIE())break;j&&"TEXTAREA"==b.nodeName?gx.dom.replaceAtCaretPosition(b,"\n"):(g.isIE()&&"file"!=b.type?(gx.evt.isEnterEvtCtrl(b)&&gx.O.executeEnterEvent(a,b),a.keyCode=9,this.lastKey=a.keyCode,11<=g.ieVersion()&&(a.preventDefault(),k.setFocus(k.searchFocus(k.getControlIndex(b)+
1,!0)))):(b.value&&(g.isIE()&&"SELECT"!=b.tagName)&&(g=b.value,b.value="",b.value=g),k.skipFocus(c),this.cancel(a,!0)),this.enter=!1)}else f||gx.O.executeEnterEvent(a,b)}}}},onkeyup:function(a){var a=window.event?window.event:a,b=gx.evt.source(a),c=b.getAttribute("maxlength"),f="undefined"==typeof b.value?"":b.value;if(""==b.type&&9==this.lastKey||this.autoSkip&&""!=b.type&&!this.isControlKey(this.lastKey)&&f.length>=c){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(b)){if(a=b.id||("A"==
b.tagName&&b.parentNode?b.parentNode.id:""))a=gx.O.getValidStructId(a),gx.evt.onfocus(b,a,"",!1,"",0);return}b=b.getAttribute("gxfocusable");if(null!=b&&"1"==b)return;b=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==b)return!0;b=gx.fn.searchFocus(this.shiftPressed?b-1:b+1,!this.shiftPressed);gx.fn.setFocus(b)}gx.grid.handleKeyUpEvt(a)},shouldIgnoreEscKey:function(){var a=gx.popup.getPopup();return gx.evt.processing||a&&"opening"==a.state},validKeypressForCtrl:function(a,
b){var c=gx.O.getValidStructFld(a);if(c){var f=c.type,k=a.value;if("int"==f||"decimal"==f){f=null!==a.selectionStart&&void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:window.getSelection?window.getSelection().toString().length:void 0;if(void 0===f)return!0;dec=c.dec||0;len=c.len-(0<dec?dec+1:0);picinputs=0;if(!isNaN(Number(b.key)))return digits=k.split("").filter(function(a){return"0"<=a&&"9">=a}).length,picinputs=len+(-1==k.indexOf(gx.decimalPoint)?0:dec),digits-f<picinputs}}return!0},setEventRow:function(a,
b){var c=gx.fn.rowGridId(b),f=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(c)||"0001";null!=c&&null!=f&&(void 0!=b.gxGridName&&gx.fn.setHidden(a.CmpContext+b.gxGridName.toUpperCase()+"_ROW",f),gx.csv.lastEvtRow=f,gx.evt.setCurrentGridRows(c,f))},ctrlOnchange:function(a,b,c,f){gx.csv.pkDirty=c;"UPD"==a.value?"1"==b.value?(c?null!=f&&(f.value=gx.getMessage("GXM_captionadd")):null!=f&&(f.value=gx.getMessage("GXM_captionupdate")),b.value="0"):c&&null!=f&&(f.value=gx.getMessage("GXM_captionadd")):"INS"==
a.value&&"1"==b.value&&(null!=f&&(f.value=gx.getMessage("GXM_captionadd")),b.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onchange_impl:function(a,b,c){gx.evt.setReady(!1);gx.evt.lastControl=a;var f=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var k=
gx.O.getValidStructFld(a),d=!1,j=function(){delete gx.fx.delayedValidation;gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);var b=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type),f=!1;if(d&&k&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,k.grid)||k.gxsgprm))f=b=!0;c&&(f=!1);if(b&&a.onblur)a.onblur();f&&("undefined"==typeof a.GXFormatError||!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0,gx.O);gx.fx.obs.notify("gx.validation")};if(gx.csv.controlValueHasChanged(a,
f,k)){d=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(a);var l=!0,m=gx.O;k&&("function"==typeof k.c2v&&k.c2v(),"function"==typeof k.v2bc&&k.v2bc.call(gx.O));c||gx.fn.setControlOldValue(a,f);var n=function(){if(a.type=="select-one"||a.type=="checkbox"||a.type=="radio"){l=false;gx.evt.setReady(false);gx.csv.validate(a,k.id||gx.O.focusControl,true,gx.O).done(function(b){if(b&&gx.csv.invalidControl==a)gx.csv.invalidControl=null;gx.evt.execOnchange(a,
b);gx.evt.setReady(true)}).fail(function(){gx.evt.setReady(true)})}l&&gx.evt.execOnchange(a,false)};gx.evt.fireControlValueChange(m,a,b).always(function(){n.call(this);j.call(this)}.closure(this))}else j.call(this)},execOnchange:function(a,b,c){var f="";if(a.attributes["data-gxoch1"])try{f+=a.attributes["data-gxoch1"].value+";"}catch(k){gx.dbg.logEx(k,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes["data-gxoch2"])try{f+=a.attributes["data-gxoch2"].value+";"}catch(d){gx.dbg.logEx(d,
"gxapi.js","execOnchange")}try{""!=f&&eval(f)}catch(j){gx.dbg.logEx(j,"gxapi.js","execOnchange")}b||gx.fn.setControlGxValid(a,"0");c||(a.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==c&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(a){var b="";try{b=a.attributes["data-gxoch0"].value}catch(c){return!0}return(new Function(b)).call(a)},jsEvent:function(a){if(!gx.isInputEnabled())return!1;a=a.getAttribute?a.getAttribute("data-jsevent")||a.getAttribute("jsevent"):
a.jsevent;return!gx.lang.emptyObject(a)?eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var b=gx.dom.id(a);!b&&"A"==a.tagName&&(b=a.parentNode.id);b&&0==b.indexOf("span_")&&(b=b.substring(5));if(!b)return!1;for(var c=gx.O.EnterCtrl,a=gx.fn.rowGridId(a),f=0,k=c.length;f<k;f++){var d=gx.csv.ctxControlId(c[f]);if(a&&-1!=b.search(RegExp(".*"+d+"_[0-9]{4}$"))||d==b)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),b;for(b in gx.O.CheckCtrl)if(gx.O.CheckCtrl[b]==
a||gx.O.CmpContext+gx.O.CheckCtrl[b]==a)return!0}return!1},isTriggerKey:function(a){for(var b=this.triggerKeys.length,c=0;c<b;c++)if(a.keyCode==this.triggerKeys[c]||a.charCode==this.triggerKeys[c])return!0;return!1},isControlKey:function(a){for(var b=this.controlKeys.length,c=0;c<b;c++)if(a==this.controlKeys[c])return!0;return!1},invalidDSPKey:function(a){var b=a.keyCode-111;a.shiftKey&&(b+=12);return this.keyListeners[b]&&"ENTER"==this.keyListeners[b][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,
b,c){1==b&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[b]&&(this.keyListeners[b]=[]);this.keyListeners[b][a]=c},setEvtName:function(a){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){var b=gx.O;return b&&b.conditionsChanged?(this.cancel(a,!0),b.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(b.Grids||[]),b.executeServerEvent("RFR",!1),!0):!1},resetGridsPagingVarsIfConditionsChanged:function(a){var b=!1;d.each(a,function(a,f){f.conditionsChanged&&f.conditionsChanged()&&
(f.setPagingVars(0,0),b=!0)});return b},setGridEvt:function(a,b){if(gx.isInputEnabled()&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(b)){var c=gx.fn.getGridObj(a);c&&(b=gx.fn.getHidden(gx.O.CmpContext+c.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",b);b&&gx.fn.setCurrentGridRow(a,b)}},checkFuncKey:function(a,b){var c=this.lastKey-111;a.shiftKey&&(c+=12);if(0<c&&24>=c&&void 0!=this.keyListeners[c]){var f=this.keyListeners[c][gx.O.CmpContext];if("undefined"!=
typeof f)this.execFnKeyEvt(a,gx.O,f,b);else for(var k in this.keyListeners[c])if(f=this.keyListeners[c][k],"undefined"!=typeof f){var d=gx.getObj(k,!1);if(null!=d){this.execFnKeyEvt(a,d,f,b);break}}}},execFnKeyEvt:function(a,b,c,f){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(a,!0),"PROMPT"==c){if((a=b.getValidStructFld(f))&&a.attachedCtrls)for(var c=a.attachedCtrls,k=0,d=c.length;k<d;k++)if((f=c[k])&&f.info&&f.info.isPrompt){var j=c[k].id;"function"==typeof b.promptKeyHandlers[j]&&
(f=0<a.grid?"_"+gx.fn.currentGridRowImpl(a.grid):"",f=gx.dom.el(b.CmpContext+j+f),b.promptKeyHandlers[j].call(b,f))}}else b.isTransaction()&&"SELECT"==c?(b=gx.dom.byId(b.CmpContext+"BTN_SELECT"))&&"function"==typeof b.click&&b.click():b.executeEvent(c,!1)},keyModifiesValue:function(a){a=window.event?a.keyCode:a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){if(!gx.lang.emptyObject(a)){if(a==gx.evt.dummyCtrl||"A"===a.nodeName||"TEXTAREA"===a.nodeName)return!0;if("INPUT"===a.nodeName){if("button"===
a.type||"image"===a.type)return!0}else if("IMG"===a.tagName&&gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(a,b){if(("undefined"==typeof b||b)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},startValidation:function(a,b){if(a||b)gx.csv.validatingGrid=a,gx.csv.validating=!0},endValidation:function(a,b){if(!a||a===gx.csv.validatingGrid)gx.csv.validatingGrid=null,gx.csv.validating=!1,b||gx.fx.obs.notify("gx.onaftervalidate")},
setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(a,b){for(;0<a&&b&&b.length&&4<=b.length;){var c=b.substr(0,4),f=b.substr(4);gx.fn.setCurrentGridRow(a,c);if(c=gx.O.getGridById(a,f))c=c.parentGrid;a=c?c.gridId:0;b=b.substr(4,b.length)}},execEvt:function(a,b,c,f,k,d,j,l,m,n){gx.dbg.logPerf("execEvt");
gx.ajax.saveFormForAutoComplete();if(n||!gx.lang.emptyObject(c)&&gx.isInputEnabled()&&gx.ajax.isFormEnabled()){var o=gx.setGxObyCtx(a,b),p=k,q=this.EVT_ROW_ID_REGEXP.exec(c),t=q&&1<q.length?q[1]:null;q&&2<q.length&&gx.evt.setCurrentGridRows(p,t);t||(t=gx.fn.currentGridRowImpl(p));if(n||!o||!o.inputHasFormatErrors(c,k,t)){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(f)&&f!=gx.csv.lastControl&&void 0!=f.onfocus)f.onfocus();gx.fx.obs.notify("gx.validation");gx.setGxObyCtx(a,b);j&&(gx.evt.srvCommand=
!0,f&&(p=gx.fn.rowGridId(f),t=gx.fn.controlRowId(f),!gx.lang.emptyObject(p)&&!gx.lang.emptyObject(t)&&(gx.csv.lastGrid=p,gx.fn.setCurrentGridRow(p,t))));if(0<gx.csv.lastId&&!gx.csv.validatingAll&&(a=gx.O.getValidStruct(gx.csv.lastId),(gx.evt.isEnterEvtCtrl(f)&&0<f.id?gx.O.getValidStructId(f.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(f)||a&&a.isuc)||gx.evt.enter))gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=
!1;this.setEvtName(c,f);this.lastEvent=c;!j&&(gx.grid.drawAtServer||f&&"INPUT"==f.nodeName&&"submit"==f.type)?this.execEvtSubmit(c,f):(gx.evt.setProcessing(!0),f=function(){gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),d,l,m)},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(c,gx.O,p,t,!0,void 0,l).done(m).fail(f):f())}}},execEvtSubmit:function(a,b){if(gx.isInputEnabled()){gx.evt.setProcessing(!0);gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();
gx.fn.forceEnableControls(!1);var c=gx.dom.form(),f=gx.popup.getPopup();if(null!=f){var k=c.action,f=f.window.gx.popup.lvl;if(-1!=f){var d=-1!=k.indexOf("?")?",":"?",d=d+encodeURIComponent("gxPopupLevel="+f+";");c.action=k+d}}c.submit()}},execCliEvt:function(a,b,c,f,k,d){if(gx.isInputEnabled()&&gx.ajax.isFormEnabled()){gx.fx.obs.notify("gx.validation");var d=void 0!=d?d:[],j=gx.getObj(a,b),l;if(null!=j&&(gx.setGxO(a,b),"string"==typeof f&&(""!=f&&4<arguments.length)&&(l=j.getGrid(f),l.instanciateRow(k),
l=l.gridId),!j.inputHasFormatErrors(j.getServerEventName(c),l,k))){var m=j.isServerEvent(c);gx.evt.setProcessing(!0,!m);j.execC2VFunctions();var n=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing(false,!gx.csv.validating&&!m)});j.conditionsChanged?j.executeServerEvent("RFR",true):gx.fx.obs.notify("gx.onafterevent",[])},o=function(){j[c](d);n()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(j.getServerEventName(c),j,l,k,!1,d).done(n).fail(o):o()}}},fixWebKitOnFocus:function(){var a=
gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcherTimeout:100,dispatcher:function(){var a=function(a){for(var c=[],f=0;f<a.length;f++)a[f+1]&&a[f].eventName===a[f+1].eventName||c.push(a[f]);return c};return{dispatchedEvents:{},serialRunner:new function(){this.pendingRun=[];this.addTask=function(a){this.pendingRun.push(a);if(1===this.pendingRun.length)this.pendingRun[0]()};this.signalEndTask=function(){this.pendingRun.shift();if(0<this.pendingRun.length)this.pendingRun[0]()}},
getContextKey:function(a,c,f){return a.CmpContext+a.ServerClass+(c||"")+(f||"")},getEventParmsMetadata:function(a,c,f){return c.EvtParms[a]["input"==f?0:1]},eventDepends:function(a,c,f){for(var c=this.getEventParmsMetadata(c,f,"output"),a=this.getEventParmsMetadata(a,f,"input"),d,g=0,j=c.length;g<j;g++)for(var f=gx.ajax.resolveParmKey(c[g]),l=0,m=a.length;l<m;l++)if(d=gx.ajax.resolveParmKey(a[l]),f==d)return!0;return!1},beforeDispatch:function(a){var c=gx.ajax.getSecurityToken(a);c&&(a.InternalParms[c.id]=
c.value)},dispatch:function(a,c,f,k,g,j,l){var g=void 0===g||g,m=d.Deferred(),n=c.cleanEventName(a),o=c.getClientEventName(a);this.beforeDispatch(c);if(!c.EvtParms[n])return m.reject(),m.promise();var p=this.getContextKey(c,f,k),q=this.dispatchedEvents[p],a={eventName:n,dirtyEventName:a,clientSideEventName:o,serverSide:g,deferred:m,arguments:j,disableForm:l};q?q.events.push(a):(q={gxO:c,grid:f,row:k,events:[a]},this.dispatchedEvents[p]=q,setTimeout(this.serialRunner.addTask.closure(this.serialRunner,
[this.dispatchTimeoutCallback.closure(this,[p])]),gx.evt.dispatcherTimeout));return m.promise()},dispatchTimeoutCallback:function(b){var c=this.dispatchedEvents[b],f=c.gxO,d=c.grid,g=c.row,j=[],l=[],m,n,o=[],p,q={};delete this.dispatchedEvents[b];for(var b=0,t=c.events.length;b<t;b++)if(m=c.events[b],m.serverSide)l.push(m);else{n=!0;for(var r=0;r<b;r++)if(this.eventDepends(m.eventName,c.events[r].eventName,f)){n=!1;break}n?j.push(m):l.push(m)}c=j.concat(l);c=a(c);j=!1;b=0;for(t=c.length;b<t;b++)q[c[b].eventName]=
c[b].deferred,j&&c[b].serverSide?p.addMethod(c[b].eventName):(p=new gx.ajax.message(c[b].eventName,f,d,g,c[b].serverSide,c[b].disableForm),c[b].serverSide||(p.callback=f[c[b].clientSideEventName].closure(f,c[b].evtArguments||[])),o.push(p)),j=c[b].serverSide;var s=function(a,b,c,f){for(var d=0,k=a.methods.length;d<k;d++){var u=q[a.methods[d]];u&&(b?u.resolve(c):u.reject(c))}f.signalEndTask()};runCount=0;var u=this.serialRunner,y=function(){if(runCount<o.length){var a=o[runCount++],b=runCount==o.length;
a.call().done(function(){s(a,!0,b,u);y()}).fail(function(){s(a,!1,b,u)})}};y()}}}(),mouse:{x:-1,y:-1,update:function(a){try{gx.lang.emptyObject(a.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY):0<a.touches.length&&(this.x=a.touches[0].pageX,this.y=a.touches[0].pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=this.lastControl=
null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);
gx.csv_i=function(d){return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,
messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validateAll:function(a){var b=d.Deferred(),a=a||gx.O;this.validControls(a.fromValid,a.toValid,!1,a).done(function(){try{if((null==this.invalidControl||!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))a.fromValid=a.toValid}catch(c){gx.dbg.logEx(c,"gxapi.js","validateAll")}b.resolve()}.closure(this));return b.promise()},validControls:function(a,b,c,f,k){var g=d.Deferred(),j=[],l=0,m=0,n=0,o=gx.csv.fullGridValidation&&
1<=b-a&&gx.O.isTransaction(),p=function(a,b){if(gx.csv.stopOnError)if(-1!=b){var c=gx.fn.validStruct(b,f),c=gx.fn.getControlGridRef(c.fld,c.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(c,f)?gx.fn.setFocus(c):gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;if(b>a){if(o&&(validStruct=gx.fn.validStruct(a),void 0!=
validStruct&&void 0!=validStruct.lvl&&(l=validStruct.lvl),validStruct=gx.fn.validStruct(b),void 0!=validStruct&&void 0!=validStruct.lvl))m=validStruct.lvl;for(var q=a;q<b;q++)if(j.push(this.validControl(q,c,f,null,k)),o&&(q>a&&q<b)&&(validStruct=gx.fn.validStruct(q),void 0!=validStruct&&void 0!=validStruct.lvl&&(n=validStruct.lvl,n!=l&&n!=m&&validStruct&&validStruct.grid))){var t=gx.fn.getGridObj(validStruct.grid),r=t.grid.rows.length,s=gx.fn.currentGridRowImpl(validStruct.grid),u=gx.fn.lastGridControl(validStruct.grid);
if(q==u)for(var y=gx.fn.firstGridControl(validStruct.grid),w=0;w<r;w++){var v=t.grid.rows[w],x=v.gxDeleted(),B=v.gxExists(),C=v.gxIsMod();if(!x&&(B||C)&&v.gxId!=s)for(var E=y;E<=u;E++)j.push(this.validControl(E,c,f,v.gxId))}}if(0<j.length)return gx.evt.setProcessing(!0),d.when.apply(d,j).done(function(){for(var a=!0,b=-1,c=0,f=arguments.length;c<f;c++){var d=arguments[c].ret;if(a&&!d){b=arguments[c].ctrl;a=!1;break}}p(a,b);gx.evt.setProcessing(!1);g.resolve(a)}),g.promise()}p(!0,-1);g.resolve(!0)}catch(z){gx.dbg.logEx(z,
"gxapi.js","validControls")}return g.promise()},validControl:function(a,b,c,f,k){var g=d.Deferred(),c=c||gx.O,j=gx.fn.validStruct(a,c);if(void 0!=j){0!=j.grid&&(f=f?f:gx.fn.currentGridRowImpl(j.grid),gx.lang.emptyObject(f)||gx.fn.setCurrentGridRow(j.grid,f));!0==j.isuc?j.uc.execC2VFunctions():"function"==typeof j.c2v&&j.c2v();"function"==typeof j.v2bc&&j.v2bc.call(c);try{if(0==j.lvl||0!=j.grid&&gx.fn.gridRowIsMod(j.lvl,gx.fn.currentGridRow(j.grid))||!c.isTransaction()){var l=null;if(l=!0==j.isuc?
j.uc.getRealControl():gx.fn.getControlGridRef(j.fld,j.grid))return this.validate(l,a,b,c,k).done(function(b){try{var c=false,f=true,d=-1;j.grid!=0&&(c=gx.fn.rowIsRemoved(j.grid,gx.fn.currentGridRow(j.grid)));if(!b&&!c){gx.csv.invalidControl=l;gx.csv.invalidId=a;f=false;d=a}gx.csv.lastId=a;if(gx.fn.isAccepted(l)==false){gx.evt.executeOnblur(a);if(l.getAttribute("data-gxhiddenonchange")!=l.value){l.setAttribute("data-gxhiddenonchange",l.value);gx.evt.execOnchange(l,false,true)}}}catch(k){gx.dbg.logEx(k,
"gxapi.js","validControl - callback")}g.resolve({ret:f,ctrl:d});return g.promise()}),g.promise()}}catch(m){gx.dbg.logEx(m,"gxapi.js","validControl")}}g.resolve({ret:!0,ctrl:-1});return g.promise()},validate:function(a,b,c,f,k){var g=d.Deferred(),f=f||gx.O;gx.csv.anyError=!1;var j=gx.fn.validStruct(b,f);if(void 0==j)return g.resolve(!0),g.promise();gx.csv.refreshVars(j,f);if(null==j.fnc&&null==j.isvalid){if("SELECT"!=a.tagName&&"checkbox"!=a.type&&!gx.evt.eachKeyAutorefreshType(j.type)&&!gx.lang.emptyObject(j.rgrid))for(var l=
j.rgrid.length,b=0;b<l;b++)j.rgrid[b].filterVarChanged();g.resolve(!0);return g.promise()}try{if(-1!=b&&(c||"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=b;gx.evt.startValidation(j.gxgrid,!0);gx.csv.refreshVars(j);c=!1;c=!0==j.isuc?j.fnc.call(j.uc):null!=j.fnc?j.fnc.call(f):!0;1==f.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=!0,f.AnyError=0);!0==gx.csv.anyError&&(c=!gx.csv.anyError);if(!1==c)return gx.evt.endValidation(),g.resolve(!1),
g.promise();gx.csv.refreshControls(j,f);gx.csv.invalidateDeps(b,f);if(!gx.lang.emptyObject(j.rgrid)&&!gx.lang.emptyObject(j.hc)){l=j.rgrid.length;for(b=0;b<l;b++)j.rgrid[b].filterVarChanged()}var m=gx.fn.isAccepted(a,f),b=function(){g.resolve(true);try{if(!k){var b=gx.dom.byId(a.id);m&&!k?gx.fn.setControlGxValid(b,"1"):gx.fn.setControlGxValid(b,"0")}gx.evt.endValidation()}catch(c){gx.dbg.logEx(c,"gxapi.js","validate")}};if(null!=j.isvalid&&m&&"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!k){var n=
j.gxgrid?j.gxgrid:null;if(gx.pO.supportAjaxEvents){var o=j.isvalid,p=j.gxgrid?j.gxgrid.gridId:!1,q=p?gx.fn.currentGridRowImpl(p):"",t=f.isServerEvent(o);o?gx.evt.dispatcher.dispatch(f.getServerEventName(o),f,p,q,t).done(b).fail(b):(f[j.isvalid](),b())}else{var r=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=n;f[j.isvalid]();gx.csv.instanciatedRowGrid=r;b()}}else b()}}catch(s){gx.dbg.logEx(s,"gxapi.js","validate")}g.resolve(!0);return g.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=
gx.fn.controlIds(),b=a.length,c=0;c<b;c++){var f=gx.fn.validStruct(a[c]);f&&(f.fld&&!f.isuc)&&this.invalidateGXCtrl(gx.fn.getControlGridRef(f.fld,f.grid))}},invalidateGXCtrl:function(a){a&&1==a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&gx.csv.controlValueHasChanged(a)&&gx.fn.setControlGxValid(a,"0")},invalidateCtrl:function(a,b){try{this.invalidateGXCtrl(a);var c=gx.fn.validStruct(gx.O.focusControl);if(c&&0!=c.grid&&gx.evt.keyModifiesValue(b)){var f=gx.fn.controlRowId(a)||gx.fn.currentGridRowImpl(c.grid)||
"0001";c.gxgrid.setRowModified(f)}}catch(d){gx.dbg.logEx(d,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a,b){for(var c=gx.fn.controlIds(),f=c.length,d=0;d<f;d++){var g=c[d];if(g>a)for(var g=gx.fn.validStruct(g,b),j=g.ip?g.ip.length:0,l=0;l<j;l++)if(g.ip[l]==a)if(0==g.grid){var m=gx.fn.getControlGridRef(g.fld,g.grid);m&&gx.fn.setControlGxValid(m,"0")}else{var n=gx.fn.getGridObj(g.grid);if(n)for(var o=n.grid.rows.length,p=0;p<o;p++){var m=n.grid.rows[p],q=m.gxDeleted(),t=m.gxExists();!q&&
t&&(n.setRowModified(m.gxId),(m=gx.fn.getControlRef(g.fld+"_"+m.gxId))&&gx.fn.setControlGxValid(m,"0"))}}}},controlValueHasChanged:function(a,b,c){if(!a)return!1;"undefined"===typeof b&&(b=a.value);var a=a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),f=gx.applyPicture(c,a);return null===a||f!==gx.applyPicture(c,b)},setFormatError:function(a,b){a.id&&(b||"undefined"==typeof b?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===
gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var b=gx.fn.validStruct(gx.O.focusControl);if(b&&b.nac&&!0==b.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var c=gx.fn.searchFocusFwd(cn);null!=c&&gx.fn.setFocus(c);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",
a)}catch(f){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(a,b){var c;if((c=b||gx.O)&&c.IsMasterPage&&0!=a.indexOf("MP")){var f=this.CTRL_ROW_INDEX_REGEXP.exec(a);if(f&&1<f.length)return c=f[1],f=2<f.length?"_"+f[2]:"",c+(-1===c.indexOf("_MPAGE")?"_MPAGE":"")+
f}return(c=(b?b.CmpContext:this.cmpCtx)||"")&&0==a.indexOf(c)||0<=a.search(gx.GxObject.CONTROL_CMP_REGEX)?a:c+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,b,c,f){var k=d.Deferred();try{var g=gx.fn.validStruct(a,c);if("undefined"!=typeof g){var j=g.grid;if(0!=j){var l=gx.fn.currentGridRowImpl(j);if(l&&(l!=f||b)&&1<l.length&&f&&1<f.length){gx.csv.rowChanged=!0;var m=c.Gx_BScreen;
c.Gx_BScreen=1;gx.csv.validGridRowChange(j,l,c,f).done(function(a){a&&(a=c.getGridById(j,f))&&a.instanciateRow(l);c.Gx_BScreen=m;k.resolve(!0)})}else k.resolve(!1);void 0!=l&&gx.fn.setCurrentGridRow(j,l)}else k.resolve(!1)}else k.resolve(!1)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","checkRowChange")}return k.promise()},validGridRow:function(a,b){void 0!=b&&gx.fn.setCurrentGridRow(a,b);var c=gx.fn.firstGridControl(a),f=gx.fn.lastGridControl(a);gx.csv.validControls(c,f+1,!0,gx.O)},validGridRowChange:function(a,
b,c,f){var k=d.Deferred();void 0!=f&&gx.fn.setCurrentGridRow(a,f);var g=gx.fn.firstGridControl(a,c),j=gx.fn.lastGridControl(a,c),f=!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(b)&&f.length==b.length&&parseInt(f)>parseInt(b);gx.csv.validControls(g,j+1,!0,c,f).done(function(c){(c||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,g,b);k.resolve(c)});return k.promise()},changeGridRow:function(a,b,c){gx.csv.lastId=b;gx.O.fromValid>b&&(gx.O.fromValid=b);gx.csv.lastRow[a]=c;Gx_BScreen=1},targetRowIsMod:function(a){return(a=
gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},refreshVars:function(a,b){for(var c=a.ip?a.ip.length:0,f=0;f<c;f++)try{"function"==typeof gx.fn.validStruct(a.ip[f],b).c2v&&gx.fn.validStruct(a.ip[f],b).c2v()}catch(d){gx.dbg.logEx(d,"gxapi.js","refreshVars")}},refreshControls:function(a,b){for(var c=a.op?a.op.length:0,f=0;f<c;f++)try{var d=gx.fn.validStruct(a.op[f],b);gx.fn.v2c(d);var g=null;(g=0==d.grid?gx.dom.el(gx.csv.ctxControlId(d.fld)):gx.fn.getControlGridRef(d.fld,
d.grid))&&gx.fn.setControlGxValid(g,"0")}catch(j){gx.dbg.logEx(j,"gxapi.js","refreshControls")}c=a.ucs?a.ucs.length:0;for(f=0;f<c;f++)try{gx.fn.validStruct(a.ucs[f],b).uc.execV2CFunctions(!0)}catch(l){gx.dbg.logEx(l,"gxapi.js","refreshControls")}},setValidValues:function(a,b,c){var f=[];if(1<c.length-b.length){var d=gx.json.evalJSON(c[c.length-1]);for(h in d)gx.fn.setHidden(h,d[h]);f=gx.json.evalJSON(c[c.length-2])}d={};a={fields:a,msgs:f};gx.O.cmpCtx?d[gx.O.cmpCtx]=a:d.MAIN=a;gx.fn.setErrorViewer(d);
if(!gx.O.AnyError)for(var g=!1,a=b.length,d=0;d<a;d++){var j=b[d],f=c[d];if(this.isProperty(j)){var l=gx.fn.vStructForVar(j[0])||gx.O.getValidStructFld(j[0]);null!=l&&gx.fn.setCtrlProperty(l.fld,j[1],f)}else if(l=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(l.hc)&&(l.hc==j?(gx.O[l.hc]=f,gx.fn.setHidden(this.cmpCtx+"GXH_"+l.fld,f)):l.hd==j&&(gx.O[l.hd]=f)),l=gx.fn.vStructForVarWId(j,this.currentId),gx.lang.emptyObject(l)){l=gx.fn.vStructForHC(j);if(null!=l){var m=
"";0!=l.grid&&(m="_"+gx.fn.currentGridRow(l.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+l.fld+m,f)}l=gx.fn.gridObjFromGxO(j);void 0!=l?(g=!0,l.loadGrid({rowProps:f})):gx.fn.saveLvlOldParm(j,f)&&(gx.setVar(j,f),gx.fn.setGridHidden(j,f))}else if(j=gx.fn.screen_CtrlRef(l.fld),!gx.lang.emptyObject(j)&&f instanceof Object&&("SELECT"==j.tagName?(-1!=j.selectedIndex&&gx.fn.invalidEmptyValue(f)&&(f.s=j.options[j.selectedIndex].value),m=gx.dom.id(j),gx.fn.loadComboBox(m,f.v),gx.fn.setComboBoxValue(m,f.s)):gx.lang.emptyObject(f.s)||
(f.s=gx.fn.trimSelectValue(f.s,l.type)),m=gx.fn.selectedDescription(f,l.type),f=gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(j.value)?j.value:"SPAN"==j.tagName&&!gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(m)?m:f.s,gx.fn.setControlValue_span_safe(this.cmpCtx+l.fld,f,0)),l.v2v)l.v2v(f),gx.fn.v2c(l,f,"bits"==l.type)}gx.O.refreshOlds();gx.fn.enableDisableDelete();g&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=
this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);
gx.http_i=function(d){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(a,b){return"{"!=b[0]&&200==a.status&&0!=a.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+
a.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(a,b,c){null!=gx.dom.el(a,!1,!0,!0)?gx.fn.setControlValue_impl(a,b):c&&(gx.dom.createInput(a,"hidden"),gx.fn.setControlValue_impl(a,b))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;d(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,
"Caption",this.viewState.FORM_Caption)},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=!0;this.applyWellKnownPtys()}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a),a=b;this.useBase64State&&(a=gx.base64.encode(b));b=gx.dom.el("GXState");
null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var b=a.getControlIdsh();
if(null!=b){var c="";a.IsComponent&&null!=a.CmpContext&&(c=a.CmpContext);for(var f="",d=0;d<b.length;d++)if((validStruct=a.getValidStruct(b[d]))&&"function"==typeof validStruct.val)var g=gx.fn.getControlValue_impl(c+validStruct.fld),f="checkbox"==validStruct.ctrltype&&""==gx.text.trim(g)?f+validStruct.val():f+g;gx.http.createHsh(c+"GXHSH11",f)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var c=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,c)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),c=b.length,f=0;f<c;f++){for(var d=b[f];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null},setCookie:function(a,b,c,f){f=f?";path="+f+";":"";c=c||1;c=new Date((new Date).getTime()+864E5*c);document.cookie=a+"="+escape(b)+"; expires="+c.toGMTString()+f;return this.getCookie(a)==b},checkResponseStatus:function(a){return a.status==
this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(),!0):this.isBadResponse(a)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",a.status)),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&(b&&a&&gx.pO.AjaxSecurity)&&a.readyState==
this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(){if((gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,b,c,f){f=f||gx.O;gx.evt.setProcessing(!0);var d=gx.popup.getPopup();
if(null!=d&&gx.util.sameAppUrl(a)&&(d=d.window.gx.popup.lvl,-1!=d))var g=-1!=a.indexOf("?")?",":"?",g=g+encodeURIComponent("gxPopupLevel="+d+";"),a=a+g;gx.isabsoluteurl(a)||(a=gx.absoluteurl(a));b?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=f?f.endFeedback():gx.ajax.enableForm();gx.evt.setProcessing(!1)},200);gx.spa.started&&!c?(gx.spa.redirect(a),gx.pO!=f?f.endFeedback():gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&(a=new XMLHttpRequest);if(!a)try{a=
new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,b){var b=b||gx.http.postDataFormat.HTTP,c=b==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)c=a.reqData;else for(var f=a.formNode,f="Form"==f.tagName?f.elements:d("input[type!=file],textarea,select"),k=f.length,g=0;g<k;g++){var j=gx.http.elementPostData(f[g],b);null!=j&&(b==gx.http.postDataFormat.HTTP?c.push(j):c[j[0]]=j[1])}gx.lang.isArray(c)&&
b==gx.http.postDataFormat.HTTP&&(c=c.join("&")+"&");return c},elementPostData:function(a,b){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var c="";if("select-multiple"==a.type)for(var f=a.options.length,d=0;d<f;d++)a.options[d].selected&&(c=a.options[d].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)c=a.value;else{if("radio"==a.type)return null}else c="image"===a.type?a.src:this.element_gxvalue(a);return b==gx.http.postDataFormat.HTTP?encodeURIComponent(a.name)+
"="+encodeURIComponent(c):[a.name,c]},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,dt.HasDatePart=0<a.gxtype.len,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK||b.handleAllStatusCodes?this.doCallHandler(a,b):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(gx.dom.writeError,
document,[a.responseText,gx.getMessage("GXM_runtimeappsrv"),a.status],50),b.always&&b.always.call(b.obj||window,a,b),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a,b){b.error&&b.error.call(b.obj||window,a,b);b.always&&b.always.call(b.obj||window,a,b);gx.evt.setProcessing(!1,!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==
this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){gx.util.alert.hide();!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&!a.sync){var c=gx.http.doHandleRequest.closure(this,[b,a]),f=gx.http.onRequestError.closure(this,[b,a]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?
b.onreadystatechange=c:(b.onload=c,b.onerror=f)}c=null;"POST"==a.method&&(c=gx.http.getPostData(a));f=!1!==a.avoidCache?this.uncache(a.url):a.url;b.open(a.method,f,!a.sync);!1!==a.ajaxHeader&&b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&(gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore)&&b.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(b,
a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||window,b);try{b.send(c)}catch(d){gx.dbg.logEx(d,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a);return b}}return null},doCallHandler:function(a,b){b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a);if(window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");
b.setAttribute("action",a.url);a.oldTarget=b.getAttribute("target");b.setAttribute("target",this.iframeName);a.reqData&&(gx.http.saveHidden("GXAjaxMultipart",a.reqData,!0),this.setSecurityToken(null,a.gxO));b.submit()},setSecurityToken:function(a,b){var c=gx.ajax.getSecurityToken(b);c&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",c.value,!0):a.setRequestHeader("X-GXAUTH-TOKEN",c.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},
iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.byId(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe id="'+a+'" name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.height="1px",
b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,this.iFrameloadEventName(),gx.http.iframeOnload);return b},iFrameJsonResponse:function(a){return d(a).find("input[data-response-content-type='application/json']").val()},iframeOnload:function(){var a=gx.dom.byId(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&
(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,c=b.formNode;c.setAttribute("action",b.oldAction);c.setAttribute("target",b.oldTarget);if(a=a.contentDocument?a.contentDocument:a.contentWindow.document){var c=a.body,f=gx.http.iFrameJsonResponse(c),d=!gx.lang.emptyObject(f);d||(d=gx.dom.allChildrenAreText(c))&&(f=gx.http.multipartResponse(c));if(d){a=gx.base64.decode(f);gx.http.clearMultipartHidden();b.handler(null,a,b);if(window.gx&&"function"===
typeof b.onReady)b.onReady();b.always&&b.always.call(b.obj||window,null,b)}else document.write(a.documentElement.innerHTML)}}},multipartResponse:function(a){try{for(var b=a.childNodes[0];"#text"!=b.nodeName;)b=b.childNodes[0];var c=b.nodeValue;if(!gx.util.browser.isIE())for(b=b.nextSibling;b;)null!=b.offsetParent&&(c+=b.nodeValue),b=b.nextSibling;return c}catch(f){return gx.dbg.logEx(f,"gxapi.js","multipartResponse"),""}},uncache:function(a){var b=(new Date).getTime(),c=a.indexOf("?");return a+(0<
c?c<a.length-1?",":"":"?")+"gx-no-cache="+b},callBackend_simple:function(a,b,c,f,d,g,j,l){gx.http.callBackend_impl(void 0,a,b,gx.http.modes.none,c,f,d,g,j,l)},callBackend:function(a,b,c,f,d,g,j,l,m,n,o){gx.http.callBackend_impl(a,b,f,d,g,j,l,m,n,o)},callBackend_impl:function(a,b,c,f,d,g,j,l,m,n){var o=this.getRequest(),n=n||{};if(o){try{var p=gx.O;d||p.startFeedback();g="undefined"!=typeof g?g:"GET";j="undefined"!=typeof j?j:null;m="undefined"!=typeof m?m:!1;l||(b=this.uncache(b));o.open(g,b,m);o.setRequestHeader(gx.ajax.reqHeader,
"2");for(var q in n)o.setRequestHeader(q,n[q]);try{"POST"==g?o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore)&&o.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(t){gx.dbg.logEx(t,"gxapi.js","callBackend_impl: gx.O cannot be null")}o.send(j);d||p.endFeedback();this.lastStatus=o.status;this.lastResponse=o.responseText}catch(r){window.status="GXAjax HTTP error: "+r.message}window.status=
"";if(o.readyState!=this.STATE_DONE||o.status!=this.STATUS_OK)gx.http.checkResponseStatus(o)||(window.status="GXAjax HTTP error: ("+o.status+") - "+o.statusText,gx.dbg.logEx(o.responseText));else if(f!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(f==this.modes.full)this.handleFull(this.lastResponse);else if(f==this.modes.call)return this.handleCall(this.lastResponse,a);return this.handleRetVal(this.lastResponse,a,c)}catch(s){gx.dbg.logEx(s,
"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b){if(b){var c=d.parseJSON(a);if(gx.lang.isArray(c))return b(c);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},handleRetVal:function(a,b,c){var f=gx.json.evalJSON(a),k=f[0];this.lastStatus=f[1];void 0==this.lastStatus&&(this.lastStatus=0);if(b&&(c||null==this.lastStatus||
0==this.lastStatus)){c=d.parseJSON(a);if(gx.lang.isArray(c))return b(c);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}else return k},postHandler:function(a,b,c,f){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>c.status||299<c.status)gx.dom.writeError(c.responseText,gx.getMessage("GXM_runtimeappsrv"),c.status);else if(gx.http.validJsonResponse(c,b)){var d=gx.json.evalJSON(b);null==d?gx.dom.writeError(b.toString(),gx.getMessage("GXM_runtimeappsrv"),
c.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=d,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(d,gx.O,f).done(function(a){a||gx.fx.obs.notify("gx.onafterevent",[d])}))}}catch(g){gx.dbg.logEx(g,"gxapi.js","postHandler")}},encodeUriSegment:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},formatLink:function(a,b){a=gx.ajax.objectUrl(a);if(b&&0<b.length)for(var a=a+"?",c=b.length,f=0;f<c;f++)0<f&&(a+=","),a+=gx.http.encodeUriSegment("function"==typeof b[f].getUrlVal?b[f].getUrlVal():
b[f]);return a},loadScripts:function(a,b,c,f){"undefined"==typeof c&&(c=0);c>=a.length?b():gx.http.loadScript(a[c],function(a,b,c){gx.http.loadScripts(a,b,c+1,f)}.closure(this,[a,b,c]),f)},loadStyle:function(a,b,c,f){if(f=f?gx.dom.byId(f):null)f.href=a;else{var k=gx.dom.byTag("head")[0],f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=a;"function"==typeof b&&(f.onload=b);c?(a=gx.getThemeElement(),d(f).insertBefore(a),gx.util.browser.isIE()&&d(a).insertAfter(f)):k.appendChild(f)}},
applyDeferredStyles:function(){d("link[rel='preload'][as='style']").each(function(a,b){b.rel="stylesheet"})},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var c=a[b];(new gx.util.Url(c)).isRelative()&&(c=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c,!1));gx.cache.fileLoaded(c)||(gx.cache.addRemoteFile(c),this.loadStyle(c))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}}}(gx.$);
gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);gx.config={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}}};var GlobalEvents=function(){return{executeMethod:function(d,a){gx.fx.obs.notify(d,a);try{for(var b=window;null!=b&&b.parent!==b;)b=b.parent,b!=window&&b.gx&&b.gx.fx.obs.notify(d,a)}catch(c){}}}}(jQuery);
gx.util.browser.isIE()&&function(){function d(a,b){var b=b||{bubbles:!1,cancelable:!1,detail:void 0},c=document.createEvent("CustomEvent");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c}if("function"===typeof window.CustomEvent)return!1;d.prototype=window.Event.prototype;window.CustomEvent=d}();
(function(d){var a=gx.GxObject.prototype;a.sPrefix=function(){return this.CmpContext};a.declareDomainHdlr=function(a,b){this.GXValidFnc[a].dom_hdl=b};a.setVCMap=function(a,b,c,f,d,k){this.VarControlMap[a]={id:b,grid:c,type:f,length:d,decimals:k}};a.Initialize=function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};a.InitStandaloneVars=function(){var a=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=a&&gx.setGxO(a)};a.getCmpType=function(a){a=this.cmpRegex.exec(a);this.cmpRegex.lastIndex=
0;return a};a.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return d(".gx-content-placeholder").get(0)||document.body;var a,b=this.getCmpType(this.CmpContext);b&&(a=gx.dom.byId(b[1]+"gxHTMLWrp"+b[2]+(b[3]||"")));if(a)return a};a.setContainer=function(a){this.containerControl=a};a.setObjectType=function(a){this.ObjectType=a};a.getObjectType=function(){return this.ObjectType};a.isTransaction=function(){return null!=
this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};a.setAjaxSecurity=function(a){this.AjaxSecurity=a};a.setOnAjaxSessionTimeout=function(a){switch(a){case "Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.timeoutActions.callObj}};a.addKeyListener=function(a,b){gx.evt.addKeyListener(this.CmpContext,a,b)};a.clearMessages=function(){this.MsgList.length=0};a.addMessage=function(a){this.MsgList.push(a)};a.showMessages=function(){for(var a=[],
b=this.MsgList.length,c=0;c<b;c++)a.push({att:"",type:2,text:this.MsgList[c]});b={};b[""==this.CmpContext?"MAIN":this.CmpContext]=a;gx.fn.setErrorViewer(b);this.clearMessages()};a.setPrompt=function(a,b){gx.fn.attachCtrl(this.CmpContext+a,{id:a,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[a]=function(b){if((b=(b||gx.dom.el(a)).parentNode)&&b.href)if((b=b.href.match("javascript:(.+)"))&&b.length>
1){b=decodeURIComponent(b[1]);try{eval(b)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setPrompt")}}}};a.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var a=[],b=gx.csv.lastEvtResponse.gxValues,c=b.length,f=0;f<c;f++){var d=b[f];if(d.CmpContext==this.CmpContext&&gx.lang.booleanValue(d.IsMasterPage)==this.IsMasterPage){a.push(d);break}}gx.fn.setJsonValues(a)}};a.call=function(a,b,c){gx.nav.willRedirect(a)?this.postEventRedirect={url:gx.http.formatLink(a,b),forceDisableFrm:!1}:
gx.nav.call.apply(gx.nav,arguments)};a.callUrl=function(a,b){gx.nav.willRedirectByUrl(a)?this.postEventRedirect={url:a,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,arguments)};a.popupOpen=function(a){this.postEventPopupCommands.push({popup:gx.lang.clone(a)})};a.popupOpenUrl=function(a,b){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(a,b)})};a.refreshInputs=function(a){for(var b=a.length,c=0;c<b;c++){var f=this.getValidStructFld(a[c][1]);null!=f&&"function"==typeof f.c2v&&
f.c2v()}};a.refreshOutputs_impl=function(a){for(var b=[],c=0,f=a.length;c<f;c++){var d=a[c];if(d.fld){var k=this.getValidStructFld(d.fld);if(null!=k)gx.fn.v2c(k),d=gx.fn.getControlGridRef(k.fld,k.grid),gx.csv.invalidateGXCtrl(d),gx.fn.setControlOldValue(d,k.val());else{k=this.getVariable(d.av);if(null!=k&&"object"==typeof k){var g=this.getFormBCForVar(d.av);null!=g&&this.bcToScreen(g,k);(g=this.getGridForColl(d.av))&&g.refreshCollection(k)}gx.fn.setHidden(gx.csv.ctxControlId(d.fld,this),k)}}else d.ctrl&&
b.push(d)}gx.uc.StartRender();c=0;for(f=b.length;c<f;c++)d=b[c],gx.uc.isUserControl(d.ctrl)&&(d.ctrl.execV2CFunctions(!1),d.ctrl.execShowFunction());gx.uc.EndRender()};a.refreshOutputs=function(a){var b=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(b.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<b.length&&gx.ajax.dispatchCommands(b);this.refreshOutputs_impl(a);this.showMessages()};a.refreshRowOutputs=function(a){this.refreshOutputs_impl(a)};
a.refreshServerOutputs=function(a){for(var b=a.length,c=0;c<b;c++){var f=a[c],d=gx.fn.getHidden(this.CmpContext+f.fld);void 0!=d&&((f=this.getValidStructFld(f.fld))&&f.v2v?(f.v2v(d),gx.fn.v2c(f,d)):this.setVariable(a[c].av,d))}};a.getContextObject=function(a){return null!=this.getValidStructFld(a)&&(a=gx.fn.getControlValue_impl(this.CmpContext+a),null!=a)?a:""};a.getValidStructId=function(a){if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=0;c<b.length;c++)if(this.isSameField(this.getValidStruct(b[c]),
a))return b[c];return-1};a.getValidStructFld=function(a){if("function"==typeof a||"object"==typeof a&&a.tagName)a="object"==typeof a&&"radio"===a.type&&a.name?a.name:gx.dom.id(a);var b=this.getValidStructFld_cache[a];if(b)return b;if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=b.length,f=0;f<c;f++){var d=this.getValidStruct(b[f]);if(this.isSameField(d,a))return this.getValidStructFld_cache[a]=d}return this.getValidStructFld_cache[a]=null};a.isSameField=function(a,b){var c=a.fld;if(c==
b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));0!=a.grid&&(b=b.replace(this.rowPatternRegex,""));this.IsMasterPage&&(c=c.replace(/_MPAGE$/,""),b=b.replace(/_MPAGE$/,""));return c==b};a.getUserFocus=function(){var a=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(a)&&"notset"!=a){var b=gx.dom.byId(a);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var c=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());
gx.O=c;gx.csv.cmpCtx=a;a=gx.lang.emptyObject(b)?"":b.id}}if(gx.lang.emptyObject(a)){if(this.hasMasterPage()&&(a=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(a)))return a;b=[];for(c=0;c<this.WebComponents.length;c++)if(0==this.WebComponents[c].CmpContext.indexOf("MP"))b.push(this.WebComponents[c]);else if(a=this.WebComponents[c].getUserFocus(),!gx.lang.emptyObject(a))return a;for(c=0;c<b.length&&!(a=b[c].getUserFocus(),!gx.lang.emptyObject(a));c++);}return a};a.getGridColumn=function(a,b){var c=
null,f=null,f=gx.fn.controlGridId(a);0!=f&&(f=gx.O.getGridById(f,b))&&(c=f.grid.getColumnByHtmlName(a));return c};a.hasMasterPage=function(){return null!=this.MasterPage};a.setComponent=function(a){this.CmpControls[a.id.toLowerCase()]=a};a.getComponentByPrefix=function(a){var b=d.map(this.CmpControls,function(b){return b.Prefix==a?b:null});return 1==b.length?b[0]:null};a.refreshGrid=function(a){(a=this.getGrid(a))&&a.doRefresh()};a.refreshComponent=function(a){var b=this.getWebComponent(this.CmpContext+
this.getComponentData(a).Prefix);b?gx.evt.dispatcher.dispatch("REFRESH",b):(b=gx.fn.controlGridId(a),0!==b&&(b=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix+gx.fn.currentGridRow(b)))&&gx.evt.dispatcher.dispatch("REFRESH",b))};a.getComponentPrefix=function(a){return(a=this.getComponentData(a))?a.Prefix||"":""};a.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};a.createWebComponent=function(a,b,c,f,d,k,g){k=k||this.getComponentPrefix(a);f||(a=gx.fn.controlGridId(a),
f=0!==a?gx.fn.currentGridRow(a):"");var d=d||this.CmpContext+"gxHTMLWrp"+k+f,k=this.CmpContext+k,j=gx.getObj(k,!1);j?j.startFeedback():(a=gx.dom.byId(d),a.firstChild&&gx.dom.mask(d));a=gx.gen.isJava()&&gx.pO.PackageName?gx.pO.PackageName+".":"";gx.ajax.dynComponent(a+b,c,k,f).done(function(a){if(!a.DynComponentMap)a.DynComponentMap={};a.DynComponentMap[k+f]=d;gx.ajax.setJsonResponse({response:a,isPostBack:true,gxObject:j||gx.O,afterCmpLoaded:function(){g&&g(k)}});j?j.endFeedback():gx.dom.unmask(d)})};
a.registerComponent=function(a){this.WebComponents[a.CmpContext]=a;this.WebComponents.push(a)};a.setWebComponent=function(a,b){this.deleteComponent(a.CmpContext,a,!1);b&&this.restoreComponentHiddens(a.CmpContext,b);this.registerComponent(a);a.JustCreated=!0;gx.fn.setHidden(a.CmpContext,a.ServerClass);gx.fx.obs.notify("webcom.render",[a])};a.getWebComponent=function(a){return this.WebComponents[a]};a.deleteComponent=function(a,b,c){var c="undefined"==typeof c?!0:c,f=this.getWebComponent(a);if(f){var d=
gx.gen.isJava()&&f.PackageName?f.PackageName+".":"";gx.cache.deleteInlineCode(a+d+f.ServerClass.toLowerCase());c&&this.deleteComponentHiddens(a);gx.lang.emptyObject(b)||gx.fn.setHidden(b.CmpContext,b.ServerClass);f.ondestroy();delete this.WebComponents[a];b=this.WebComponents.length;for(c=0;c<b;c++)if(this.WebComponents[c].CmpContext==a){this.WebComponents.splice(c,1);break}for(b=gx.attachedControls.length;b--;)gx.attachedControls[b].info.wc===a&&gx.attachedControls.splice(b,1);var b=this.WebComponents,
k;for(k in b)isNaN(parseInt(k))&&0===k.indexOf(a)&&this.deleteComponent(k)}};a.deleteComponentHiddens=function(a){if(gx.lang.isArray(a)){if(0==a.length)return;a=gx.fn.getCmpRegex("("+a.join("|")+")")}else a=gx.fn.getCmpRegex(a);var a=gx.fn.filterHiddens(a,gx.http.viewState),b;for(b in a)b&&gx.fn.deleteHidden(b)};a.restoreComponentHiddens=function(a,b){var c=gx.fn.getCmpRegex(a),c=gx.fn.filterHiddens(c,b),f;for(f in c)f&&gx.fn.setHidden(f,c[f])};a.setCmpContext=function(a){void 0!=a&&(this.IsTypeComponent=
!0,""!==a&&(this.IsComponent=!0),this.CmpContext=a)};a.getOldLvl=function(a){for(var b in this.LvlOlds)for(var c=this.LvlOlds[b],f=c.length,d=0;d<f;d++)if(c[d]==a)return b;return-1};a.refreshDependantGrids=function(a){for(var b=this.Grids.length,c=0;c<b;c++)for(var f=this.Grids[c],d=f.refreshVars,k=d.length,g=0;g<k;g++)if(d[g].fld==a.fld){f.filterVarChanged();break}};a.getCtrlPropertyValue=function(a,b){var c=gx.fn.getCtrlProperty(a,b);void 0===c&&(c=gx.fn.getHidden(a+"_"+b));return c};a.setGrid=
function(a){this.Grids[a.gridName]=a;this.GridsUpper[a.gridName.toUpperCase()]=a;var b=this.getGridIdxByName(a.gridName);-1!=b?this.Grids[b]=a:this.Grids.push(a)};a.getGrid=function(a){a=a||"";return this.Grids[a]||this.GridsUpper[a.toUpperCase()]};a.getGridIdxByName=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridName==a)return c;return-1};a.getGridIdx=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridId==a)return c;return-1};a.getGridById=function(a,
b){for(var b=b||"",c=this.Grids.length,f=0;f<c;f++){var d=this.Grids[f];if(d.gridId==a&&(!d.parentRow||gx.text.endsWith(b,d.parentRow.gxId)))return d}return null};a.getGridForColl=function(a){for(var b=this.Grids.length,c=0;c<b;c++){var f=this.Grids[c];if(f.boundedCollName==a)return f}return null};a.getFormBCForVar=function(a){for(var b in this.FormBCs){var c=this.FormBCs[b];if(c&&c.gxvar==a)return c}return null};a.getGridBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=
a.substring(this.CmpContext.length));return this.GridBCs[b]};a.getFormBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.FormBCs[b]};a.addGridBCProperty=function(a,b,c,f){var d=this.getGridBC(a);"undefined"==typeof d&&(d={},d.gxvar=f,this.GridBCs[a]=d);this.addBCProperties(d,b,c,f)};a.addBCProperty=function(a,b,c,f){var d=this.getFormBC(a);"undefined"==typeof d&&(d={},d.gxvar=f,this.FormBCs[a]=d);this.addBCProperties(d,b,c,
f)};a.addBCProperties=function(a,b,c,f){if(a)if(b instanceof Array)for(var k=b.length,g=function(){var a=this[c.gxvar];gx.lang.emptyObject(c.hc)||(a=this[c.hc]);if("date"==c.type)a=(new gx.date.gxdate(a)).getString("Y4MD");else if("bitstr"===c.type&&gx.pO.fullAjax){var k=gx.fn.getControlGridRef(c.fld,c.grid);k&&d(k).val()&&(a="gxformdataref:"+k.id)}this.valueToBCProp(this[f],b,c,a)},j=0;j<k;j++){if("undefined"==typeof a[b[j]])if(j<k-1)a[b[j]]={};else{a[b[j]]=c;"object"==typeof this[f]&&(c.v2bc=g);
break}a=a[b[j]]}else"string"==typeof b&&(a[b]=c)};a.valueToBCProp=function(a,b,c,f){try{if(a)for(var d=b.length,k=0;k<d;k++){if(gx.lang.isArray(a)&&c&&c.grid){if(0==a.length)continue;var g=gx.fn.getGridObj(c.grid),j=g&&g.grid?g.grid.firstRecordOnPage:0,l=gx.fn.currentGridRow(c.grid);4<l.length&&(l=l.substr(l.length-4*(k+1),4));a=a[Number(j||0)+Number(l)-1]}1<d&&(k<d-1&&void 0===a[b[k]])&&(a[b[k]]={});if("object"==typeof a[b[k]]&&k<d-1)a=a[b[k]];else{a[b[k]]=f;void 0!==a[b[k]+"_N"]&&(a[b[k]+"_N"]=
0);break}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","valueToBCProp")}};a.bcToScreen=function(a,b){for(var c in a)if("gxvar"!=c)try{if("object"==typeof b[c])this.bcToScreen(a[c],b[c]);else{var f=a[c];if((0==f.grid||gx.csv.validatingGrid&&f.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(f.hc)&&void 0!=b[c]&&f.v2v)f.v2v(b[c]),gx.fn.v2c(f,b[c])}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","bcToScreen")}};a.addGridUCEventHandler=function(a,b,c){gx.lang.emptyObject(this.GridUCsEvts[a])&&(this.GridUCsEvts[a]=
[]);this.GridUCsEvts[a].push({e:b,h:c})};a.getGridUCEventHandlers=function(a){a=this.GridUCsEvts[a];return gx.lang.emptyObject(a)?[]:a};a.setGridUCDynProp=function(a,b,c,f,d){this.setGridUCProp(a,b,c,void 0,d)};a.setGridUCProp=function(a,b,c,f,d){gx.lang.emptyObject(this.GridUCsProps[a])&&(this.GridUCsProps[a]=[]);this.GridUCsProps[a].push({p:b,h:c,v:f,t:d});"InternalTitle"==b&&(this.GridUCsProps[a].title=f)};a.getGridUCProperties=function(a){a=this.GridUCsProps[a];return gx.lang.emptyObject(a)?[]:
a};a.addUsercontrolBinding=function(a,b,c){this.UCBindings[a]||(this.UCBindings[a]={fld:b,uc:[]},this.UCBindingsHiddens[b]=this.UCBindings[a]);gx.util.inArray(c,this.UCBindings[a].uc)||this.UCBindings[a].uc.push(c)};a.setUserControl=function(a){a.ContainerName&&(this.UserControls[a.ContainerName]=a)};a.getUserControl=function(a){var b=this.UserControls[a];!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+a]);return b};a.getUserControlGrids=function(){return d.map(this.Grids,function(a){if(a.grid&&
a.isUsercontrol)return a.grid})};a.execV2CFunctions=function(a,b){b||(b=this.UserControls);var c=this;gx.uc.StartRender();d.each(b,function(b,f){f&&c==f.ParentObject&&f.updateAndShow(a)});gx.uc.EndRender()};a.execC2VFunctions=function(){d.each(this.UserControls,function(a,b){try{b.execC2VFunctions()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}try{b.saveProperties()}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execC2VFunctions")}})};a.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",
this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};a.setVariable=function(a,b){var c=this[a]=b;0!=a.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+a,b);if(void 0!=this.VarControlMap[a]){var f=this.VarControlMap[a].type;if("date"==f||"dtime"==f)("string"==typeof b&&(b=new gx.date.gxdate(b),this[a]=b),"date"==f)?c=b.getStringWithFmt("Y4MD"):(c=this.VarControlMap[a].decimals,c=b.getStringWithFmt("Y4MD")+" "+b.getTimeString(!0,!0,1<c,12<=c));"decimal"==f&&"."!=gx.decimalPoint?
(c=b.toString().replace(".",gx.decimalPoint),"string"==typeof b&&(this[a]=gx.num.parseFloat(b))):"int"==f&&"string"==typeof b&&(this[a]=gx.num.parseInt(b));gx.fn.setHidden(this.CmpContext+this.VarControlMap[a].id,c)}"Gx_mode"==a&&this.setMode();void 0!=this.UCBindings[a]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[a].fld,b)};a.getVariable=function(a){return this[a]};a.isServerEvent=function(a){return this.Events[a][1]||!1};a.getServerEventName=function(a){return this.Events[a][0]||""};a.getClientEventName=
function(a){for(var b in this.Events)if(this.Events[b][0]==a)return b;return""};var b={RFR:"REFRESH",RFR_MPAGE:"REFRESH"};a.cleanEventName=function(a){var a=a.replace(RegExp("^"+this.CmpContext),""),c=/^E('?(\w+)\.?([^\.]*)'?)/.exec(a),a=c&&c.length&&1<c.length?c[1].replace(/\.\d*$/,""):a;return b[a]||a};a.inputHasFormatErrors=function(a,b,c){var f,d;f=this.cleanEventName(a);var k,g,a=!1,j=gx.csv.anyFormatError(),l;if(!this.fullAjax&&j)return!0;if(!j||!this.EvtParms[f])return!1;d=this.EvtParms[f][0];
var m=this,r=function(a){if(a)if(b&&c&&a.grid==b){if((k=gx.fn.getControlGridRef(a.fld,b,c))&&k.id&&gx.csv.gxFormatErrors[k.id])return!0}else if((k=gx.fn.getControlGridRef(a.fld,a.grid))&&k.id)for(l in gx.csv.gxFormatErrors)if(a==m.getValidStructFld(l))return!0;return!1};f=0;for(len=d.length;f<len&&!a;f++){var n=d[f];if(n.postForm)return j;if(n.fld)if(g=this.getValidStructFld(n.fld))a=a||r(g);else if(n=this.getFormBCForVar(n.av),null!=n)for(var o in n)g=n[o],"object"===typeof g&&(a=a||r(g))}return a};
a.setEventParameters=function(a,b){gx.csv.lastEvtRow=null;gx.O=this;var c=!0,f=-1;gx.csv.cmpCtx=this.CmpContext;for(var d=a.length,k=0;k<d;k++){var g=a[k][0],j=a[k][1],l=a[k][2],r=!1;if(b instanceof m)this.setVariable(l,b.parms[k]),r=!0;else for(var n in b)if(n.toLowerCase()==g.toLowerCase()){this.setVariable(l,b[n]);r=!0;break}r||this.setVariable(l,b);g=this.getValidStructFld(j);null!=g?(0!=g.grid&&-1==f?f=g.grid:0!=g.grid&&g.grid!=f&&(c=!1),gx.fn.v2c(g)):gx.fn.setHidden(this.CmpContext+j,this.getVariable(l))}c&&
(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(f))};a.executeEvent=function(a,b,c,f,d){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var k=this.getClientEventName(a);(k?this.isServerEvent(k):1)?(d?(d=this.getGrid(d))&&c?d.instanciateRow(c):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,this.executeServerEvent(a,b,c,f)):gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,k,d,c,"");gx.csv.instanciatedRowGrid=null};a.executeServerEvent=function(a,b,c,f,k){var g=d.Deferred();gx.O=this;gx.csv.cmpCtx=
this.CmpContext;var j=!0;void 0!=b&&!1==b&&(j=!1);b="string"==typeof c?c:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(b=gx.csv.lastEvtRow);(c=gx.csv.validatingGrid||gx.csv.instanciatedRowGrid)&&c.parentObject!=this&&(c=null);var l=!gx.lang.emptyObject(c)?c.gridId:!1;k?b="":(""==b&&l&&(b=gx.csv.lastRow[l]),"undefined"==typeof b&&(b=gx.fn.currentGridRowImpl(c.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+a+"."+(b||""),gx.evt.dummyCtrl,l,j,null,null,function(){g.resolve()}.closure(this),
f);return g.promise()};a.executeEnterEvent=function(a,b,c){var f=!1;if(b&&b.onblur)b.onblur();if((gx.pO.fullAjax||null==d)&&gx.evt.cancelAndRefresh(a)){if(!this.refreshAndEnter)return;f=!0}gx.dom.hasSubmitControl()&&gx.evt.cancel(a,!0);b&&("INPUT"==b.nodeName&&gx.dom.isEditControl(b))&&gx.evt.cancel(a,!0);var d=this.gxOWithEnter(b);if(null!=d){gx.evt.enter=!0;var k="ENTER";d.IsMasterPage&&(k+="_MPAGE");var k=d.CmpContext+"E"+k+".",g;if(gx.evt.isEnterEvtCtrl(b)){var j=gx.fn.controlRowId(b);g=gx.fn.controlGridId(b.id);
j&&(k+=j)}gx.evt.execEvt(d.CmpContext,d.IsMasterPage,k,gx.evt.dummyCtrl,g,!1,null,c,null,f);gx.evt.enter=!1;gx.evt.cancel(a,!0)}};a.gxOWithEnter=function(a){if(a&&(a=gx.json.evalJSON(d(a).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||"{}"))&&1<a.length)if((a=gx.getObj(a[0],a[1]))&&a.hasEnterEvent)return a;if(this.hasEnterEvent)return this;if(this.IsComponent){var a=this.getCmpType(this.CmpContext),b=""==a[1]&&0==a[0].indexOf("MP"),a=gx.getObj(a[1],b);if(!gx.lang.emptyObject(a))return a.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();
return null};a.getLastControlId=function(){return this.GXLastCtrlId};a.getValidStruct=function(a){return this.GXValidFnc[a]};a.getControlIds=function(){return this.GXCtrlIds};a.getControlIdsh=function(){return this.GXCtrlIdsh};a.getUsercontrolFromChild=function(a){d.each(this.UserControls,function(b,c){var f=c.getContainerControl();if(gx.dom.isChildNode(a,f))return c});return null};a.installFlatLevelDatePickers=function(){for(var a=null,b=this.getControlIds(),c=b.length,f=0;f<c;f++)a=this.getValidStruct(b[f]),
void 0!=a&&(0==a.grid&&void 0!=a.dp)&&gx.fn.installDatePicker(this.CmpContext+a.fld,a.dp.f,a.dp.st,a.dp.wn,a.dp.mf,gx.fn.datePickerFormat(a.dp.pic,a.dp.dec,a.len),a.len,a.dp.dec)};a.installImageControls=function(){for(var a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),b=0,c=a.length;b<c;b++)gx.html.multimediaUpload.createControl(a[b]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};a.initControlsEnabledFlag=function(a){if("bits"!=a.type&&("audio"!=a.type&&"video"!=
a.type)&&(a=gx.fn.getControlRef(a.fld))){var b=gx.http.viewState[gx.dom.id(a)+"_Enabled"];void 0!==b&&gx.fn.setEnabledProperty(a,gx.lang.gxBoolean(b),!1)}};a.initControlsBehaviour=function(){var a=this;d.each(gx.O.GXValidFnc,function(b,c){if(c&&c.fld&&(a.initControlsEnabledFlag(c),c.gxsgprm)){var f=gx.fn.getControlRef(c.fld);f&&gx.fx.installSuggest(f)}})};var c=function(a){try{var b=new Function("return "+a);if(b)return b()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","evaluateCode")}return!1},f=function(){var a=
{select:!0,textarea:!0},b=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(c){if(!c)return!1;var f=c.tagName.toLowerCase();return"input"==f?b[c.type.toLowerCase()]:a[f]}}(),k=function(a){if(!("keypress"===a.type&&13!==a.keyCode)){var b=a.target,c=d(b),k=d(a.currentTarget),l=gx.json.evalJSON(k.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)),m=k.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR),r;if(!b||!("A"===b.tagName.toUpperCase()&&void 0===d(b).attr(gx.GxObject.GX_EVENT_DATA_ATTR)&&
b.href))if(l&&1<l.length&&(r=gx.getObj(l[0],l[1])),r){if(!k.hasClass("gx-disabled")){if(!(l=f(b)))a:{if(b&&"label"==b.tagName.toLowerCase()&&(l=b.getAttribute("for"))){l=gx.dom.el(l);l=f(l)&&gx.fn.isVisible(l,0);break a}l=!1}if(!l||d(b).is(k))gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?j.apply(this,[a,c,r,m]):g.apply(this,[a,c,r,m])}}else a.preventDefault()}},g=function(a,b,c,f){var d=function(){b.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);c.handleControlEvent(a,f,this)}.closure(this);
gx.fx.dom.delayedDispatch(a)?b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?gx.fx.dom.raiseEvent("dblclick",a):(d=setTimeout(d,gx.config.evt.dblclick.delay),b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,d)):d.call()},j=function(a,b,c,f){if(!b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var d=function(){b.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);c.handleControlEvent(a,f,this)}.closure(this);gx.fx.dom.delayedDispatch(a)?(d=setTimeout(d,gx.config.evt.dblclick.delay),b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,
d)):d.call()}},l=function(a,b,c){try{c&&a.preventDefault(),b&&a.stopPropagation()}catch(f){}};a.handleControlEvent=function(a,b,f){var k=this.controlEventMap;if(k[b]){var g=k[b],j=k[b].evt,b=this.Events[j]?this.Events[j][0]:k[b].std,j=d(f).is("SPAN"),k=d(f).attr(gx.GxObject.GX_EVENT_DATA_ATTR)||(j?d(f).find("> a").first().attr(gx.GxObject.GX_EVENT_DATA_ATTR):""),j=d(f).attr(gx.GxObject.GX_EVENT_CODE_DATA_ATTR)||(j?d(f).find("> a").first().attr(gx.GxObject.GX_EVENT_CODE_DATA_ATTR):""),m;m="img"==f.tagName.toLowerCase()?
d(f).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):d("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",f).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR);var r=0<g.grid?gx.fn.controlRowId(a.currentTarget):null,n=this.getGridById(g.grid,r),o,p=!0,s=!1;d(a.target);if("combo"!=g.ctrltype)switch(k){case "1":l(a,!0,!0);gx.fn.closeWindow();break;case "3":case "4":l(a,!0,!0);j&&c(j);break;case "8":gx.ajax.doRefresh(this);break;default:if(!m||c(m))if(n&&(o=n.gridName),"checkbox"===g.ctrltype&&(gx.fn.checkboxClick(g,
f,g.values[0],g.values[1]),p=!1,s=!0),b&&this.executeEvent(b,!1,r,!1,o),s)gx.evt.onchange(f);l(a,!0,p)}}};a.registerCtrlsEventHandlers=function(){var a,b,c=this.GXCtrlIds,f=this.GXValidFnc,g,j=this.IsMasterPage,l=this.CmpContext,m=j?"_MPAGE":"",r="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",n,o,p=!l&&!j,s,q=gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES,t;void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1);this.controlEventMap||(this.controlEventMap={});t=this.controlEventMap;a=0;for(b=
c.length;a<b;a++)if(g=f[c[a]],o=(s=g.evt||g.evt2)||this.hasEnterEvent&&!gx.lang.emptyObject(g.ctrltype),!gx.util.inArray(g.ctrltype,q)&&(s||o))s&&(t[g.fld]=g),0===g.grid&&(n=l+g.fld+(g.gxvar?"":m),o="#span_"+n,n="#"+n,o=g.gxvar&&0<d(o).length?d(o):d(n),s&&(o.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,g.fld),o.is("img")&&o.attr("tabindex","0")),o.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([l,j])));p&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,d(document.body).on("click keypress",
r,k))};a.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&d(document.body).off("click keypress",k);this.listeningControlEvents=!1};a.clearMultimediaValue=function(a){a=gx.html.multimediaUpload.getElements(a);a.fileField.onchange(a.fileField);gx.fn.setHidden(a.fileField.id,"");gx.fn.setHidden(a.uriField.id,"");gx.fn.setHidden(a.fileField.id+"_gxBlob","")};a.refreshOlds=function(){for(var a in this.LvlOlds){var b=this.LvlOlds[a];if("function"!=typeof b){var c=gx.fn.lvlGrid(parseInt(a,
10)),f;0!=c&&(f=gx.fn.currentGridRow(c));for(var c=b.length,d=0;d<c;d++){var k=b[d],g=k,j="",l=gx.fn.vStructForOld(g);if(l){if(!l.gxgrid||0<l.gxgrid.grid.rows.length)j=gx.typedOld(l.fld,g,l.type)}else gx.lang.emptyObject(f)||(k+="_"+f),j=gx.fn.getHidden(this.CmpContext+k);"undefined"!=typeof j&&(l||(window[g]=j),this[g]=j)}}}};var m=function(a){this.parms=a;return this};a.addExoEventHandler=function(a,b){var c=function(){var a=gx.O;gx.setGxO(this);b.call(this,null,null,new m(Array.prototype.slice.call(arguments,
0)));gx.setGxO(a)};gx.fx.obs.addObserver(a,this,c);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[a]=c};a.deleteExoEventHandlers=function(){for(var a in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(a)&&gx.fx.obs.deleteObserver(a,this,this.exoEventHandlers[a])};a.restoreExoEventHandlers=function(){for(var a in this.exoEventHandlers)gx.fx.obs.addObserver(a,this,this.exoEventHandlers[a])};a.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),
gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","deleteEventHandlers")}};a.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),d.each(this.UserControls,function(a,b){if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","ondestroy")}}),this.UserControls=[],delete this.containerControl}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","ondestroy")}};a.onpost=function(){var a=
gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,c=0;c<b;c++)this.WebComponents[c].onpost();this.ReadonlyForm&&(this.IsComponent&&a!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(a)};a.roControlsAsHidden=function(){for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var f=this.getValidStruct(a[c]);if(0==f.grid&&"function"==typeof f.val){var f=this.CmpContext+f.fld,d=gx.dom.el(f);d&&!gx.fn.isAccepted(d)&&gx.fn.setHidden(f,
gx.fn.getControlValue(f))}}};a.onload=function(a,b){d.Deferred();var c=[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this));var f=this.Grids.length;if(!1!==a)for(var k=0;k<f;k++)c.push(this.Grids[k].loadGrid());f=this.WebComponents.length;for(k=0;k<f;k++)c.push(this.WebComponents[k].onload(a));b?this.afterLoad():gx.fx.obs.addObserver("gx.onready",this,this.afterLoad.closure(this),{single:!0});
gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var g=this;d.when.apply(d,c).done(function(){g.onLoadDeferred.resolve()})};a.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",
this.getContainer()),function(a){gx.fn.disableCtrl(a.getAttribute("data-gx-disable"));a.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);this.notify("onafterload")};a.onunload=function(a){if(this.hasMasterPage()&&!1!==a)this.MasterPage.onunload();a=this.Grids.length;for(a-=1;0<=a;a--)delete this.Grids[this.Grids[a].gridName],this.Grids[a].cleanup(),this.Grids.splice(a,
1);a=this.WebComponents.length;for(a-=1;0<=a;a--)delete this.WebComponents[this.WebComponents[a].CmpContext],this.WebComponents[a].onunload(),this.WebComponents.splice(a,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};a.clean=function(a){this.cleanHiddens();this.onunload(a)};a.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};a.screenToVars=function(){try{for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var f=this.getValidStruct(a[c]);
f&&(0==f.lvl&&"function"==typeof f.c2v)&&f.c2v()}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","screenToVars")}};a.postbackLoad=function(a,b){var c=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(a);for(var f=this.WebComponents.length,d=0;d<f;d++)this.WebComponents[d].postbackLoad(a);c&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,c?!1:a);this.conditionsChanged=this.JustCreated=!1;this===
gx.pO&&gx.fn.doAttachs(b);this.notify("onafterload");this.onLoadDeferred.resolve()};a.addDragSource=function(a,b,c,f){gx.fx.dnd.addSource(this,a,b,c,f)};a.addDropTarget=function(a,b,c,f){gx.fx.dnd.addTarget(this,a,b,c,f)};a.addContextSetter=function(a,b,c,f){gx.fx.ctx.addSetter(this,a,b,c,f)};a.addContextTracker=function(a,b,c,f){gx.fx.ctx.addTracker(this,c,f)};a.addOnMessage=function(a,b,c,f,d){gx.fx.notifications.addTracker(this,a,b,c,f,d)};a.addEventHandler=function(a,b,c){gx.fx.dom.addEventHandler(this,
a,b,c)};a.updateBitmapValue=function(a,b,c,f){a=gx.html.multimediaUpload.getContainer(a);"file"==gx.html.multimediaUpload.getOptionValue(a)?this[b]=f:this[c]=f};var n,o=0,p=void 0===gx.NotificationDelay?200:gx.NotificationDelay;a.getFeedbackContainer=function(){return gx.pO&&!gx.pO.fullAjax||this==gx.pO?document.body:this.getContainer()};a.startFeedback=function(a){o++;var b=!0===a?0:p,c=function(){var a=this.getFeedbackContainer();a&&gx.dom.mask(a)};1==o&&(0===b?c.call(this):n||(b=gx.lang.doCallTimeout(c,
this,arguments,b),n=b.t))};a.endFeedback=function(){0<o&&o--;if(0==o){n&&(clearTimeout(n),n=!1);var a=this.getFeedbackContainer();a&&gx.dom.unmask(a)}};a.isFeedbackOn=function(){return 0<o};(function(){var a=9996,b=this;return function(c){var f="MPW"+a++,k=b.CmpContext+"gxHTMLWrp"+f;b.setComponent({id:q(c),GXClass:null,Prefix:f,lvl:1});return d('<div class="gx-call-target '+c+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+k+'"></div></div>')}}).call(this);var q=function(a){return"GX-"+
a.toUpperCase()+"-TARGET"};a.initSingleTarget=function(a){var b="MPW"+this.targetsCounter++,c=this.CmpContext+"gxHTMLWrp"+b;this.setComponent({id:q(a),GXClass:null,Prefix:b,lvl:1});return d('<div class="gx-call-target '+a+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+c+'"></div></div>')};a.initTargets=function(){var a,b,c,f,k;gx.pO&&(gx.pO.fullAjax&&this.IsMasterPage)&&(a=d(gx.dom.form()),b=a.children("[data-abstract-form]").first(),b.length||(b=d("<div></div>"),b.append(a.children()),
a.append(b)),a=b.addClass("gx-center-target"),b=this.initSingleTarget("top"),c=this.initSingleTarget("right"),f=this.initSingleTarget("bottom"),k=this.initSingleTarget("left"),d('<div id="gx-column-targets"></div>').insertBefore(a).append(k).append(a).append(c).before(b).after(f))};a.createObjectInTarget=function(a,b,c){var a=a.toLowerCase(),f=t(a);this.createWebComponent(q(a),b,c,void 0,void 0,void 0,function(b){this.targetComponents=this.targetComponents||{};(b=gx.pO.getWebComponent(b))&&(this.targetComponents[a]=
b)});d(f.selector).removeClass("empty")};a.restoreTargetComponents=function(){var a;this.targetComponents=this.targetComponents||{};for(a in this.targetComponents)targetComponents.hasOwnProperty(a)&&gx.pO.registerComponent(this.targetComponents[a])};var t=function(a){return{selector:".gx-call-target."+a,centerSelector:".gx-center-target"}},r,s={useCapture:!0};a.showTarget=function(a,b){var a=a.toLowerCase(),c=t(a),f=c.selector,k=c.centerSelector,g;d(c.selector).removeClass("empty");d(f).removeClass("off");
d(k).addClass("slideout "+a);d(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[a]);!1!==b&&(r=function(a){!d(a.target).closest(f).length&&!d(a.target).is(f)&&d(f).is(":visible")&&(g.call(this),a.stopImmediatePropagation(),a.preventDefault())}.closure(this),g=function(){this.hideTarget(a)},gx.evt.attach(document,"click",r,!1,s),gx.spa.addObserver("onnavigate",this,g))};a.hideTarget=function(a){var a=a.toLowerCase(),b=t(a),c=b.centerSelector;d(b.selector).addClass("off");
d(c).removeClass("slideout "+a);d(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",r,s);gx.fx.obs.notify("gx.targethidden",[a])};a.collapseTarget=function(a){var a=a.toLowerCase(),b=t(a),c=b.selector,b=b.centerSelector;this.showTarget(a,!1);d(c).addClass("collapsed");d(b).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[a])};a.expandTarget=function(a){var a=a.toLowerCase(),b=t(a),c=b.selector,b=b.centerSelector;this.showTarget(a,!1);d(c).removeClass("collapsed");
d(b).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[a])}})(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);
gx.uc=function(d){return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(a,b,c,f,k,g,j,l,m,n){f=eval(f);gx.lang.inherits(f,gx.uc.UserControl,!0);f=new f(d);f.ContainerName=k;f.DesignContainerName=k;f.setupControl(a,g,j,b,c,l,m,n);return f},fromChild:function(a){var b=gx.pO.getUsercontrolFromChild(a);if(null!=b||gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUsercontrolFromChild(a),null!=b))return b;for(var c=gx.pO.WebComponents.length,f=0;f<c;f++)if(b=gx.pO.WebComponents[f].getUsercontrolFromChild(a),
null!=b)return b;return null},getUserControlObj:function(a){var b=gx.O.getUserControl(a);if(gx.lang.emptyObject(b)){if(gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUserControl(a),!gx.lang.emptyObject(b)))return b;for(var c=gx.pO.WebComponents.length,f=0;f<c&&!(b=gx.pO.WebComponents[f].getUserControl(a),!gx.lang.emptyObject(b));f++);}return b},CtrlId:function(a){return a.replace(/Container$/,"")},userControlContainerId:function(a){var b=a.lastIndexOf("_");return-1!=b&&(b=a.substring(0,b)+"Container"+
a.substring(b),null!=gx.dom.byId(b))?b:0<=a.indexOf("ContainerDiv")?a:a+"Container"},setProperties:function(a,b){var c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a));if(null!=c)if(void 0!=b.length)for(var f=b.length,d=0;d<f;d++)for(var g in b[d]){var j=b[d][g];c[g]=j}else for(g in b)j=b[g],c[g]=j},isUserControl:function(a,b){var b=b||gx.O,c;if(gx.lang.emptyObj(b.UserControls))return!1;if(a instanceof gx.uc.UserControl)return!0;c=gx.dom.byId(gx.uc.userControlContainerId(a));return null!=
c&&"DIV"==c.tagName?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(a){d.each(a&&a.Scripts||[],function(a,c){PostRenderScripts[c]=c})},EndRender:function(){var a=gx.lang.objToArray(PostRenderScripts);gx.http.loadScripts(a,function(){},0,!0)},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];
this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(a){return gx.dom.byId(this.DesignContainerName+a+(""!=this.GridRow?
"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(a,b,c,f,d,g,j,l){this.ParentObject=a;this.ControlName=b;this.ControlId=f;this.LastIdBefore=d;this.ControlLvl=void 0!=g?g:0;this.GridId=void 0!=j?j:0;this.GridRow=void 0!=l?l:"";gx.util.pushOnce(this.ControlId,this.ParentObject.GXCtrlIds);this.ParentObject.GXValidFnc[this.ControlId]=
{id:this.ControlId,lvl:this.ControlLvl,fld:c,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};this.addValidFunction=function(a,b,c){this.ValidFunctions.push(a);this.ParentObject.addUsercontrolBinding(b,c+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var a=this.ValidFunctions.length,b,c=0;c<a;c++)if((b=this.ValidFunctions[c])&&!b.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;
return!0};this.attachEvents=function(){try{var a=this.getContainerControl();if(gx.lang.emptyObject(document.frames))a.onfocus=this.onfocus,this.RealControl=a;else{var b=document.frames.length;if(0<b)for(var c=0,c=0;c<b;c++){var f=document.frames[c];if(!0==gx.dom.isChildNode(f,a)){f.frameElement.onfocus=this.onfocus;this.RealControl=f.frameElement;break}}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,
this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(a){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=a};this.createWebComponent=function(a,b,c,f,d){this.ParentObject.createWebComponent(a,
b,c,this.GridRow,f,d)};this.deleteWebComponent=function(a){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(a))};this.notifyContext=function(a,b){gx.fx.ctx.notify(null,a,b)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var a=arguments[0],b=arguments[1],c=arguments[2],f=arguments[3];this.ParentObject.addUsercontrolBinding(a,b,this);this.V2CFunctions.push(function(d,g,j){var l=b;j&&(g&&(l=b+"_"+g),f?d.ParentObject[a][f]=
gx.fn.getControlValue(l):d.ParentObject[a]=gx.fn.getControlValue(l));d[c](d.ParentObject[a])})}};this.addC2VFunction=function(a){this.C2VFunctions.push(a)};this.setC2ShowFunction=function(a){this.C2ShowFunction=a};this.execV2CFunctions=function(a){var b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var c=0,f=this.V2CFunctions,d=f.length,c=0;c<d;c++)try{f[c](this,this.GridRow,a)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=b};this.execC2VFunctions=function(){var a=
gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var b=0,c=this.C2VFunctions,f=c.length,b=0;b<f;b++)try{c[b](this,this.GridRow)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=a};this.sdtV2c=function(a,b,c,f,d){if(null!==b){if(b=parseInt(b,10)-1,void 0!==this.ParentObject[a][b])this[d](this.ParentObject[a][b][c])}else this.ParentObject[a]=gx.fn.getControlValue(f,null,this.ParentObject),this[d](this.ParentObject[a][c])};this.sdtC2v=function(a,b,c,f,d){null!==b?(b=
parseInt(b,10)-1,this.ParentObject[a][b][c]=this[d]()):this.ParentObject[a][c]=this[d]();gx.fn.setControlValue(f,this.ParentObject[a])};this.execShowFunction=function(){var a=this.getContainerControl();try{null!=this.C2ShowFunction&&a&&this.C2ShowFunction(this)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execShowFunction")}this.IsPostBack=!0;a&&gx.plugdesign.applyTemplateObject({selector:"#"+a.id,templateSelector:function(a){return!0===a.onDemandInvoke}});gx.uc.pushPostRenderScripts(this)};this.updateAndShow=
function(a){try{this.execV2CFunctions(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","updateAndShow")}a&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(a){var b=this.ParentObject,c=b.IsMasterPage?"_MPAGE":"",a=this.ControlName.toUpperCase()+c+"."+a.toUpperCase()+c;if(a=b.getClientEventName(a))return b.isServerEvent(a);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(a,b,c){gx.evt.setReady(!1);var f=gx.O;
gx.setGxO(this.ParentObject);if(0<a){var d=this.DesignContainerName,g=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);g&&g[1]&&(d=g[1]);this.ParentObject[d]=this;(a=this.ParentObject.getGridById(a))&&a.instanciateRow(b)}this.execC2VFunctions();c.call(this.ParentObject,this.getEventRow()).always(function(a){gx.setGxO(a)}.closure(this,[f]));gx.evt.setReady(!0);gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(a,b){this[a]=function(c){var f=this.isServerEvent(a);
f&&"function"===typeof c&&gx.fx.obs.addObserver("gx.onafterevent",this,c,{single:!0});this.eventHandler(this.GridId,this.GridRow,b);!f&&"function"===typeof c&&c.call(this)}.closure(this)};this.addProperty=function(a,b){this.Properties[a]=b};this.setProp=function(a,b,c,f){this.addProperty(a,b);this.PropTypes[a]=f;gx.lang.isBooleanType(f)?this[a]=gx.lang.gxBoolean(c):"color"==f?gx.lang.emptyObject(c)||(this[a]="number"==typeof c||"string"==typeof c?gx.color.html(c):c):gx.lang.isNumericType(f)?gx.lang.emptyObject(c)||
(this[a]=gx.num.parseFloat(c)):this[a]=c};this.setDynProp=function(a,b,c,f,d){this.addProperty(a,b);this.DynProperties.push(a);this.PropTypes[a]=f;var g=function(){var d=this.getDynPropertyValueFromHidden(a,b);void 0===d&&(d=c);this.setProp(a,b,d,f)};d?g.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(a){a===this.ParentObject&&g.call(this)}):gx.fx.obs.addObserver("gx.onready",this,g,{single:!0})};this.refreshDynProperties=function(){for(var a=0,b=this.DynProperties.length;a<
b;a++){var c=this.DynProperties[a];this[c]=this.getDynPropertyValueFromHidden(c,this.Properties[c])}};this.getDynPropertyValueFromHidden=function(a,b){var c=gx.fn.getHidden(this.getHiddenName(b));void 0===c&&(c=gx.fn.getHidden(this.getHiddenName(a)));return c};this.setGridProperties=function(){for(var a=this.ParentObject.getGridUCProperties(this.ControlName),b=a.length,c=0;c<b;c++){var f=a[c],d=f.v;"undefined"==typeof d&&(d=this.getHiddenName(f.h),d=gx.fn.getHidden(d),"color"==f.t&&(d=gx.color.html(d)));
this.setProp(f.p,f.h,d,f.t)}};this.setGridEventHandlers=function(){for(var a=this.ParentObject.getGridUCEventHandlers(this.ControlName),b=a.length,c=0;c<b;c++){var f=a[c];this.addEventHandler(f.e,f.h)}};this.getHiddenName=function(a){var b="",c=this.ControlName.toUpperCase();""!=this.GridRow&&(b="_"+this.GridRow,this.ownerGrid&&(c=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+c+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+a+b};this.saveProperties=function(){for(var a in this.Properties){var b=
this[a];"function"!=typeof this.Properties[a]&&("undefined"!=typeof b&&("undefined"!=typeof b.R&&"undefined"!=typeof b.G&&"undefined"!=typeof b.B)&&(b=gx.color.rgb(b.R,b.G,b.B)),gx.lang.isBooleanType(this.PropTypes[a])&&(b=b?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[a]),b))}}}}}(gx.$);
gx.printing=function(d){return{loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(a){if(gx.printing.avoidPrintingApplet)this.printDirect(a);else{if(!this.loaded){var b='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',b=b+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(b+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(a):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(a){a&&(gx.printing._deinit(),$iframe=d("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),d(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",a.reportFile))},printWhenReady:function(a){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(a.reportFile,a.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(a)},this.waitInterval))},isReady:function(){var a=document.GeneXusPrintAppletForWindows;return a&&("function"==typeof a.isReady||"unknown"==typeof a.isReady)?a.isReady():!1},_deinit:function(){d("#"+gx.printing.IFrameId).remove()}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(d,a){this.map[d]=a};this.remove=function(d){delete this.map[d]};this.get=function(d){return null==d?null:this.map[d]};this.first=function(){return this.get(this.nextKey())};this.next=function(d){return this.get(this.nextKey(d))};this.nextKey=function(d){for(i in this.map){if(!d)return i;d==i&&(d=null)}return null}},Command:function(d,a,b){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){a.apply(d,
b)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(d,a,b,c){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof c=="function")try{c.call(d,retVal)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(d,a,b);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var d=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(d)?null:d;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var d=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(d)?null:d},encrypt:function(d,a){try{if(a=null==a?this.key:a,null!=a){var b=this.rijndael,a=b.hexToByteArray(a),c=b.rijndaelEncrypt(d,a);return b.byteArrayToHex(c)}}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","encrypt")}return d},decrypt:function(d,a){try{if(a=null==a?this.key:a,null!=a){var b=this.rijndael,a=b.hexToByteArray(a),c=b.hexToByteArray(d),f=b.rijndaelDecrypt(c,a);return b.byteArrayToString(f)}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","decrypt")}return d},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(d,a){return d<<a|d>>>32-a},AddUnsigned:function(d,a){var b,c,f,k,g;f=d&2147483648;k=a&2147483648;b=d&1073741824;c=a&1073741824;g=(d&1073741823)+(a&1073741823);return b&c?g^2147483648^f^k:b|c?g&1073741824?g^3221225472^f^k:g^1073741824^f^k:g^f^k},F:function(d,a,b){return d&a|~d&b},G:function(d,a,b){return d&b|a&~b},H:function(d,a,b){return d^a^b},I:function(d,a,b){return a^(d|~b)},FF:function(d,a,b,c,f,k,g){d=gx.MD5.AddUnsigned(d,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(a,
b,c),f),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(d,k),a)},GG:function(d,a,b,c,f,k,g){d=gx.MD5.AddUnsigned(d,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(a,b,c),f),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(d,k),a)},HH:function(d,a,b,c,f,k,g){d=gx.MD5.AddUnsigned(d,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(a,b,c),f),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(d,k),a)},II:function(d,a,b,c,f,k,g){d=gx.MD5.AddUnsigned(d,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(a,b,c),f),g));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(d,k),a)},ConvertToWordArray:function(d){var a,b=d.length;a=b+8;for(var c=16*((a-a%64)/64+1),f=Array(c-1),k=0,g=0;g<b;)a=(g-g%4)/4,k=8*(g%4),f[a]|=d.charCodeAt(g)<<k,g++;a=(g-g%4)/4;f[a]|=128<<8*(g%4);f[c-2]=b<<3;f[c-1]=b>>>29;return f},WordToHex:function(d){var a="",b="",c;for(c=0;3>=c;c++)b=d>>>8*c&255,b="0"+b.toString(16),a+=b.substr(b.length-2,2);return a},Utf8Encode:function(d){for(var d=d.replace(/\r\n/g,"\n"),a="",b=0;b<d.length;b++){var c=d.charCodeAt(b);
128>c?a+=String.fromCharCode(c):(127<c&&2048>c?a+=String.fromCharCode(c>>6|192):(a+=String.fromCharCode(c>>12|224),a+=String.fromCharCode(c>>6&63|128)),a+=String.fromCharCode(c&63|128))}return a},getHsh:function(d){var a=[],b,c,f,k,g,j,l,m,d=gx.MD5.Utf8Encode(d),a=gx.MD5.ConvertToWordArray(d);g=1732584193;j=4023233417;l=2562383102;m=271733878;for(d=0;d<a.length;d+=16)b=g,c=j,f=l,k=m,g=gx.MD5.FF(g,j,l,m,a[d+0],7,3614090360),m=gx.MD5.FF(m,g,j,l,a[d+1],12,3905402710),l=gx.MD5.FF(l,m,g,j,a[d+2],17,606105819),
j=gx.MD5.FF(j,l,m,g,a[d+3],22,3250441966),g=gx.MD5.FF(g,j,l,m,a[d+4],7,4118548399),m=gx.MD5.FF(m,g,j,l,a[d+5],12,1200080426),l=gx.MD5.FF(l,m,g,j,a[d+6],17,2821735955),j=gx.MD5.FF(j,l,m,g,a[d+7],22,4249261313),g=gx.MD5.FF(g,j,l,m,a[d+8],7,1770035416),m=gx.MD5.FF(m,g,j,l,a[d+9],12,2336552879),l=gx.MD5.FF(l,m,g,j,a[d+10],17,4294925233),j=gx.MD5.FF(j,l,m,g,a[d+11],22,2304563134),g=gx.MD5.FF(g,j,l,m,a[d+12],7,1804603682),m=gx.MD5.FF(m,g,j,l,a[d+13],12,4254626195),l=gx.MD5.FF(l,m,g,j,a[d+14],17,2792965006),
j=gx.MD5.FF(j,l,m,g,a[d+15],22,1236535329),g=gx.MD5.GG(g,j,l,m,a[d+1],5,4129170786),m=gx.MD5.GG(m,g,j,l,a[d+6],9,3225465664),l=gx.MD5.GG(l,m,g,j,a[d+11],14,643717713),j=gx.MD5.GG(j,l,m,g,a[d+0],20,3921069994),g=gx.MD5.GG(g,j,l,m,a[d+5],5,3593408605),m=gx.MD5.GG(m,g,j,l,a[d+10],9,38016083),l=gx.MD5.GG(l,m,g,j,a[d+15],14,3634488961),j=gx.MD5.GG(j,l,m,g,a[d+4],20,3889429448),g=gx.MD5.GG(g,j,l,m,a[d+9],5,568446438),m=gx.MD5.GG(m,g,j,l,a[d+14],9,3275163606),l=gx.MD5.GG(l,m,g,j,a[d+3],14,4107603335),j=
gx.MD5.GG(j,l,m,g,a[d+8],20,1163531501),g=gx.MD5.GG(g,j,l,m,a[d+13],5,2850285829),m=gx.MD5.GG(m,g,j,l,a[d+2],9,4243563512),l=gx.MD5.GG(l,m,g,j,a[d+7],14,1735328473),j=gx.MD5.GG(j,l,m,g,a[d+12],20,2368359562),g=gx.MD5.HH(g,j,l,m,a[d+5],4,4294588738),m=gx.MD5.HH(m,g,j,l,a[d+8],11,2272392833),l=gx.MD5.HH(l,m,g,j,a[d+11],16,1839030562),j=gx.MD5.HH(j,l,m,g,a[d+14],23,4259657740),g=gx.MD5.HH(g,j,l,m,a[d+1],4,2763975236),m=gx.MD5.HH(m,g,j,l,a[d+4],11,1272893353),l=gx.MD5.HH(l,m,g,j,a[d+7],16,4139469664),
j=gx.MD5.HH(j,l,m,g,a[d+10],23,3200236656),g=gx.MD5.HH(g,j,l,m,a[d+13],4,681279174),m=gx.MD5.HH(m,g,j,l,a[d+0],11,3936430074),l=gx.MD5.HH(l,m,g,j,a[d+3],16,3572445317),j=gx.MD5.HH(j,l,m,g,a[d+6],23,76029189),g=gx.MD5.HH(g,j,l,m,a[d+9],4,3654602809),m=gx.MD5.HH(m,g,j,l,a[d+12],11,3873151461),l=gx.MD5.HH(l,m,g,j,a[d+15],16,530742520),j=gx.MD5.HH(j,l,m,g,a[d+2],23,3299628645),g=gx.MD5.II(g,j,l,m,a[d+0],6,4096336452),m=gx.MD5.II(m,g,j,l,a[d+7],10,1126891415),l=gx.MD5.II(l,m,g,j,a[d+14],15,2878612391),
j=gx.MD5.II(j,l,m,g,a[d+5],21,4237533241),g=gx.MD5.II(g,j,l,m,a[d+12],6,1700485571),m=gx.MD5.II(m,g,j,l,a[d+3],10,2399980690),l=gx.MD5.II(l,m,g,j,a[d+10],15,4293915773),j=gx.MD5.II(j,l,m,g,a[d+1],21,2240044497),g=gx.MD5.II(g,j,l,m,a[d+8],6,1873313359),m=gx.MD5.II(m,g,j,l,a[d+15],10,4264355552),l=gx.MD5.II(l,m,g,j,a[d+6],15,2734768916),j=gx.MD5.II(j,l,m,g,a[d+13],21,1309151649),g=gx.MD5.II(g,j,l,m,a[d+4],6,4149444226),m=gx.MD5.II(m,g,j,l,a[d+11],10,3174756917),l=gx.MD5.II(l,m,g,j,a[d+2],15,718787259),
j=gx.MD5.II(j,l,m,g,a[d+9],21,3951481745),g=gx.MD5.AddUnsigned(g,b),j=gx.MD5.AddUnsigned(j,c),l=gx.MD5.AddUnsigned(l,f),m=gx.MD5.AddUnsigned(m,k);return(gx.MD5.WordToHex(g)+gx.MD5.WordToHex(j)+gx.MD5.WordToHex(l)+gx.MD5.WordToHex(m)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(d){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(d)))},encode:function(d){return this.encodeImpl(this.UTF8BytesFromString(d))},bytesFromUTF8Bytes:function(d){for(var a=[],b=0,c=c1=c2=0,f=d.length;b<f;)c=d[b],128>c?(a.push(c),b++):191<c&&224>c?(c2=d[b+1],a.push((c&31)<<6|c2&63),b+=2):(c2=d[b+1],c3=d[b+2],a.push((c&15)<<12|(c2&63)<<6|c3&63),b+=3);return a},UTF8BytesFromString:function(d){for(var d=d.replace(/\r\n/g,"\n"),a=[],b=d.length,c=
0;c<b;c++){var f=d.charCodeAt(c);128>f?a.push(f):(127<f&&2048>f?a.push(f>>6|192):(a.push(f>>12|224),a.push(f>>6&63|128)),a.push(f&63|128))}return a},bytesToString:function(d){for(var a=gx.util.browser.isChrome()?32765:5E4,b=[];d.length>=a;)b.push(eval("String.fromCharCode("+d.slice(0,a).join(",")+");")),d=d.slice(a);0!=d.length&&b.push(eval("String.fromCharCode("+d.join(",")+");"));return b.join("")},decodeImpl:function(d){for(var a=this.f64,b=[],c=0,d=d.replace(/\n|\r/g,""),d=d.replace(/=/g,""),
f=d.length;c<f;)b[b.length]=a[d.charAt(c)]<<2|a[d.charAt(c+1)]>>4,b[b.length]=(a[d.charAt(c+1)]&15)<<4|a[d.charAt(c+2)]>>2,b[b.length]=(a[d.charAt(c+2)]&3)<<6|a[d.charAt(c+3)],c+=4;2==d.length%4&&(b=b.slice(0,b.length-2));3==d.length%4&&(b=b.slice(0,b.length-1));return b},encodeImpl:function(d){var a=this.b64,b=[],c=0,f=d.length;1==f%3&&(d[d.length]=0,d[d.length]=0);2==f%3&&(d[d.length]=0);for(var k=d.length;c<k;)b[b.length]=a[d[c]>>2],b[b.length]=a[(d[c]&3)<<4|d[c+1]>>4],b[b.length]=a[(d[c+1]&15)<<
2|d[c+2]>>6],b[b.length]=a[d[c+2]&63],c+=3;1==f%3&&(b[b.length-1]=b[b.length-2]="=");2==f%3&&(b[b.length-1]="=");return b.join("")},_init:function(){for(var d=0;64>d;d++){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d);this.b64[d]=a;this.f64[a]=d}}};
gx.webSocket=function(d){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=d.maxRetries||3;this.retryDelay=d.retryDelay||1E4;this._init=function(a){if(!this.initialized&&"WebSocket"in window){a=a||{};a.clientId=a.clientId||"";a.basePath=a.basePath||"";this.namespace="."+a.namespace;try{var b=a.wsProtocol+a.host+a.basePath+a.resourceUrl+a.clientId;this.create(a.wsURL||b);this.initialized=!0;this.wsOpts=a}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","Could not initialize WebSocket")}}};
var a=this,b=function(){this.initialized=this.opened=!1;if(this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries))this.retryCount++,gx.lang.doCallTimeout(this._init,this,[this.wsOpts],1E4)};this.create=function(c){try{this.ws=new WebSocket(c),this.ws.onopen=function(){a.opened=!0;a.retryCount=0;gx.fx.obs.notify("gx.ws.onOpen"+a.namespace,[])},this.ws.onerror=function(b){gx.dbg.logDebug("gx.webSocket - Error: "+b.data);gx.fx.obs.notify("gx.ws.onError"+a.namespace,[b.data])},this.ws.onmessage=
function(b){gx.dbg.logDebug("gx.webSocket - New Message: "+b.data);gx.fx.obs.notify("gx.ws.onMessage"+a.namespace,[b.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");a.opened&&(a.retryCount=0,b.apply(a))}}catch(f){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+a.namespace,[f]],100)}};window.onbeforeunload=function(){a.opened&&a.ws.close()};this.close=function(){a.opened&&(a.opened=!1,a.ws.close())};this.send=function(a){this.ws?this.ws.send(a):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};
this._init(d)};
gx.util.alert=function(d){var a=!1,b=!1,c=function(c){var c=c||{},g=c.message||"",j=c.cssClass||"",l=c.cssDisBtnClass||"",m=c.dataDisAtt,c=c.dismissmitAt;if(!a||0==d("#gx-main-error").length)d(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),a=!0;f();var n=d("#gx-main-error");n.html('<div class="'+j+'"><button type="button" class="'+l+'" data-dismiss="'+m+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+g+"</span></div>");n.slideDown();
b=!0;c&&window.setTimeout(function(){f()},c)},f=function(){b&&(d("#gx-main-error").fadeOut(500,function(){d(this).empty()}),b=!1)};return{showMessage:function(a,b){d("#gx-main-error");c(d.extend({message:a,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},b))},showError:function(a,b){d("#gx-main-error");c(d.extend({message:a,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},b))},hide:f}}(gx.$);
gx.geolocation=function(d){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(a){a.attachedCtrl=d("#"+a.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(a);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(a){var b=attachedCtrls.shift(),c=gx.fn.validStruct(gx.O.getValidStructId(b.attachedCtrl.id)),
a=a.coords.latitude+","+a.coords.longitude;gx.evt.setEventRow(gx.pO,b.attachedCtrl);c.v2v&&(c.v2v(a),c.v2c());c.gxgrid&&c.gxgrid.updateControlValue(c,!0)},handle_errors:function(a){attachedCtrls.shift();switch(a.code){case a.PERMISSION_DENIED:a="user did not share geolocation data";break;case a.POSITION_UNAVAILABLE:a="could not detect current position";break;case a.TIMEOUT:a="retrieving position timed out";break;default:a="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(a);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(d,a){var b=d.slice(0,a);return d=d.slice(a).concat(b)},xtime:function(d){d<<=1;return d&256?d^283:d},mult_GF256:function(d,a){var b,c=0;for(b=1;256>b;b*=2,a=this.xtime(a))d&b&&(c^=a);return c},byteSub:function(d,a){var b;b="encrypt"==a?this.SBox:this.SBoxInverse;for(var c=0;4>c;c++)for(var f=0;f<this.Nb;f++)d[c][f]=b[d[c][f]]},shiftRow:function(d,a){for(var b=
1;4>b;b++)d[b]="encrypt"==a?this.cyclicShiftLeft(d[b],this.shiftOffsets[this.Nb][b]):this.cyclicShiftLeft(d[b],this.Nb-this.shiftOffsets[this.Nb][b])},mixColumn:function(d,a){for(var b=[],c=0;c<this.Nb;c++){for(var f=0;4>f;f++)b[f]="encrypt"==a?this.mult_GF256(d[f][c],2)^this.mult_GF256(d[(f+1)%4][c],3)^d[(f+2)%4][c]^d[(f+3)%4][c]:this.mult_GF256(d[f][c],14)^this.mult_GF256(d[(f+1)%4][c],11)^this.mult_GF256(d[(f+2)%4][c],13)^this.mult_GF256(d[(f+3)%4][c],9);for(f=0;4>f;f++)d[f][c]=b[f]}},addRoundKey:function(d,
a){for(var b=0;b<this.Nb;b++)d[0][b]^=a[b]&255,d[1][b]^=a[b]>>8&255,d[2][b]^=a[b]>>16&255,d[3][b]^=a[b]>>24&255},keyExpansion:function(d){var a=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var b=0;b<this.Nk;b++)a[b]=d[4*b]|d[4*b+1]<<8|d[4*b+2]<<16|d[4*b+3]<<24;for(b=this.Nk;b<this.Nb*(this.Nr+1);b++)d=a[b-1],0==b%this.Nk?d=(this.SBox[d>>8&255]|this.SBox[d>>16&255]<<8|this.SBox[d>>24&255]<<16|this.SBox[d&255]<<24)^this.Rcon[Math.floor(b/
this.Nk)-1]:6<this.Nk&&4==b%this.Nk&&(d=this.SBox[d>>24&255]<<24|this.SBox[d>>16&255]<<16|this.SBox[d>>8&255]<<8|this.SBox[d&255]),a[b]=a[b-this.Nk]^d;return a},Round:function(d,a){this.byteSub(d,"encrypt");this.shiftRow(d,"encrypt");this.mixColumn(d,"encrypt");this.addRoundKey(d,a)},InverseRound:function(d,a){this.addRoundKey(d,a);this.mixColumn(d,"decrypt");this.shiftRow(d,"decrypt");this.byteSub(d,"decrypt")},FinalRound:function(d,a){this.byteSub(d,"encrypt");this.shiftRow(d,"encrypt");this.addRoundKey(d,
a)},InverseFinalRound:function(d,a){this.addRoundKey(d,a);this.shiftRow(d,"decrypt");this.byteSub(d,"decrypt")},encrypt:function(d,a){var b;if(d&&8*d.length==this.blockSizeInBits&&a){d=this.packBytes(d);this.addRoundKey(d,a);for(b=1;b<this.Nr;b++)this.Round(d,a.slice(this.Nb*b,this.Nb*(b+1)));this.FinalRound(d,a.slice(this.Nb*this.Nr));return this.unpackBytes(d)}},decrypt:function(d,a){var b;if(d&&8*d.length==this.blockSizeInBits&&a){d=this.packBytes(d);this.InverseFinalRound(d,a.slice(this.Nb*this.Nr));
for(b=this.Nr-1;0<b;b--)this.InverseRound(d,a.slice(this.Nb*b,this.Nb*(b+1)));this.addRoundKey(d,a);return this.unpackBytes(d)}},byteArrayToString:function(d){for(var a="",b=d.length,c=0;c<b;c++)0!=d[c]&&(a+=String.fromCharCode(d[c]));return a},stringToByteArray:function(d){for(var a=[],b=d.length,c=0;c<b;c++)a[a.length]=d.charCodeAt();return a},byteArrayToHex:function(d){var a="";if(d){for(var b=d.length,c=0;c<b;c++)a+=(16>d[c]?"0":"")+d[c].toString(16);return a}},hexToByteArray:function(d){var a=
[];if(!(d.length%2)){if(0==d.indexOf("0x")||0==d.indexOf("0X"))d=d.substring(2);for(var b=d.length,c=0;c<b;c+=2)a[Math.floor(c/2)]=parseInt(d.slice(c,c+2),16);return a}},packBytes:function(d){var a=[];if(d&&!(d.length%4)){a[0]=[];a[1]=[];a[2]=[];a[3]=[];for(var b=d.length,c=0;c<b;c+=4)a[0][c/4]=d[c],a[1][c/4]=d[c+1],a[2][c/4]=d[c+2],a[3][c/4]=d[c+3];return a}},unpackBytes:function(d){for(var a=[],b=d[0].length,c=0;c<b;c++)a[a.length]=d[0][c],a[a.length]=d[1][c],a[a.length]=d[2][c],a[a.length]=d[3][c];
return a},formatPlaintext:function(d){var a=this.blockSizeInBits/8,b;if("string"==typeof d||d.indexOf){var d=d.split(""),c=d.length;for(b=0;b<c;b++)d[b]=d[b].charCodeAt(0)&255}for(b=a-d.length%a;0<b&&b<a;b--)d[d.length]=0;return d},rijndaelEncrypt:function(d,a){var b,c,f,k=this.blockSizeInBits/8,g;if(d&&a&&8*a.length==this.keySizeInBits){mode="ECB";g=[];d=this.formatPlaintext(d);b=this.keyExpansion(a);for(var j=0;j<d.length/k;j++){f=d.slice(j*k,(j+1)*k);if("CBC"==mode)for(c=0;c<k;c++)f[c]^=g[j*k+
c];g=g.concat(this.encrypt(f,b))}return g}},rijndaelDecrypt:function(d,a,b){var c=this.blockSizeInBits/8,f=[],k,g;if(d&&(a&&"string"!=typeof d)&&8*a.length==this.keySizeInBits){b||(b="ECB");a=this.keyExpansion(a);for(g=d.length/c-1;0<g;g--)if(k=this.decrypt(d.slice(g*c,(g+1)*c),a),"CBC"==b)for(var j=0;j<c;j++)f[(g-1)*c+j]=k[j]^d[(g-1)*c+j];else f=k.concat(f);"ECB"==b&&(f=this.decrypt(d.slice(0,c),a).concat(f));return f}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.popup=function(d){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var a=function(b){0===d(this.getEl()).find(b.target).length&&(d(document.body).off("click",a),this.close())}.closure(this);this.open=function(b){this.state=
"opening";this.id=b.id||"gxdialog";this.callbacks=b.callbacks;var c=void 0===b.resizable||b.resizable,f="PopupBorder gx-popup gx-popup-default";this.cssClass&&(f=f.replace("gx-popup-default",""),f+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,b.w,b.h,b.contentHtml,"white",b.title,"black","black","black","black",void 0===b.isModal||b.isModal,!0,!0,c,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",f,"PopupShadow",
b.showParentPopups,!1,b.callbacks,b.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){d(document.body).on("click",a)},1)};this.close=function(){d(document.body).off("click",a);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(a,b){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=b?b:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(a))this.url=a[0],this.autoresize=a[1],this.width=a[2],this.height=a[3],this.position=a[4],this.top=
a[5],this.left=a[6],this.OncloseCmds=a[7]||[],this.ReturnParms=a[8]||[],this.cssClass=a[9];else if(a&&a.Url&&(this.url=a.Url,"undefined"!=typeof a.Autoresize&&(this.autoresize=a.Autoresize),"undefined"!=typeof a.Width&&(this.width=a.Width),"undefined"!=typeof a.Height&&(this.height=a.Height),"undefined"!=typeof a.Position&&(this.position=a.Position),"undefined"!=typeof a.Top&&(this.top=a.Top),"undefined"!=typeof a.Left&&(this.left=a.Left),"undefined"!=typeof a.Class&&(this.cssClass=a.Class),"undefined"!=
typeof a.OncloseCmds&&(this.OncloseCmds=a.OncloseCmds),"undefined"!=typeof a.ReturnParms))this.ReturnParms=a.ReturnParms};this.open=function(){this.state="opening";var a=gx.popup.gxOpener();this.lvl=-1;this.lvl=a&&a.gx&&a.gx.popup.ext.win&&a.gx.popup.ext.win.gx?a.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;a=this.url;if(this.IsPrompt){gx.popup.currentPrompt=this;
for(var b="?",d="",g="",j=this.ReturnParms.length,l=0;l<j;l++){d="";if(gx.lang.emptyObject(this.ReturnParms[l].Ctrl))if("string"==typeof this.ReturnParms[l])d=gx.util.urlValue(this.ReturnParms[l])+",";else if("number"==typeof this.ReturnParms[l])d=gx.util.urlValue(this.ReturnParms[l].toString())+",";else if(this.CustomRenderGrid)g=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[l].id),gx.lang.emptyObject(g)||(d=gx.util.urlValue(g+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[l].id))continue;
else g=gx.fn.getHidden(this.ReturnParms[l].id),gx.lang.emptyObject(g)||(d=gx.util.urlValue(g)),d+=",";else d=gx.util.urlValue(this.ReturnParms[l].Ctrl)+",";b="out"==this.ReturnParms[l].IOType?b+",":b+d;this.ReturnParms[l].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[l])&&!this.PromptIsGet)&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);a+=b}b=document.activeElement;gx.csv.lastControl&&(b&&gx.util.inArray(b.tagName,
["BODY","FORM"]))&&(b=gx.csv.lastControl);b&&(b&&(this.callerActiveElement=b),b.blur&&b.blur());this.InternalPopup=gx.popup.Impl(this,a,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var a=[];if(this.IsPrompt)for(var b=this.ReturnParms.length,d=0;d<b;d++){var g=this.ReturnParms[d];gx.fn.isOutputParm(g)&&a.push(g)}else return this.ReturnParms;return a};this.close=function(a,b,d){b=b||{};this.state="closing";a&&(this.RawReturnedParms=a);var g=
window;gx.popup.ext.win?(g=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var j=function(){var g,j;this.beforeClose&&this.beforeClose(a);if(!this.isPdf&&this.frameWindow&&this.frameWindow.gx){if(this.IsPrompt)this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null;this.frameWindow.gx.evt.onunload.call(this.frameWindow);if(!gx.util.browser.isIE())this.frameDocument.gxPopup=
null;this.frameWindow=this.frameDocument=null}gx.popup.ext.close(this);var l=this.getOutputParms();if(a!=null&&this.IsPrompt){if(d&&b.parmsMetadata&&b.updateParms){j=b.parmsMetadata.length;for(g=0;g<j;g++){var p=b.parmsMetadata[g];gx.util.inArray(p,b.updateParms)&&(a[g]=d[p])}}g=gx.popup.assignPromptFields;j=gx.popup;if(!gx.lang.emptyObject(this.CustomRenderGrid)){g=this.CustomRenderGrid.grid.setCellValue;j=this.CustomRenderGrid.grid}g.apply(j,[l,a]);p=null;j=l.length;for(g=0;g<j;g++){var q=l[g].Ctrl;
gx.fn.isAccepted(q)&&(p=q)}if(p&&gx.TabOnPrompSelect){g=gx.fn.getControlIndex(p);g!=-1&&(p=gx.fn.searchFocus(g+1,true))}gx.fn.setFocus(p);if(this.PromptIsGet)if(this.Opener.fullAjax){var t;(g=gx.csv.ctxControlId(p.id))&&(t=gx.O.getValidStructFld(g));t&&gx.csv.validControls(t.id,t.id+1,true,this.Opener)}else{gx.csv.loadScreen();gx.fn.setFocus(p)}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof window.GXPkIsDirty==
"undefined"?false:window.GXPkIsDirty,null,"eng")}catch(r){gx.dbg.logEx(r,"gxpopup.js","close")}}else a&&l&&(l instanceof Array&&l.length>0)&&gx.fn.setReturnParms(this.Opener,l,a,this.CustomRenderGrid);if(b&&b.ignoreCmds===true)this.OncloseCmds=[];gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:l});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(a);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",
[this])},l=gx.util.browser;l.isFirefox()||l.isIE()?g.setTimeout(j.closure(this),10):j.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(a){gx.dbg.logEx(a,"gxpopup.js","popupObj.cleanup")}};
this.setPopupData()},getWindowIframeElement:function(a){for(var b,a=a.document.getElementsByTagName("iframe"),c=0;c<a.length&&!b;c++){var f=a[c];f.contentWindow===window&&(b=f)}return b},gxOpener:function(){try{parent.gxTestAvailable=1;var a=this.getWindowIframeElement(parent);return a&&void 0!==d(a).attr("data-gx-popup-ct")?parent:window}catch(b){}return null},setFocus:function(){var a=this.getPopup();a&&a.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},
waitCallback:function(a){var b=gx.popup.getPopup();b?"opened"==b.state?a():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[a],50):a()},getPopup:function(){var a=this.gxOpener();try{if(!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.gx))return a.gx.popup.currentPopup}catch(b){}return null},setPopup:function(a){this.currentPopup=a},open:function(a,b){return this.openPopup(a,b)},openUrlToOpenPopupParms:function(a,b,c){var f=1,d=0,g=0,j=0,l=0,m=0;c&&(f=c[0],d=c[1],g=c[2],j=c[3],l=c[4],m=c[5]);return[a,
f,d,g,j,l,m,[],b]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(a,b){var c=this.getPopup(),f,d,g;if(!c||c.Opener!==gx.O||!gx.lang.isArray(a)){var j=new this.Popup(a,!1);j.Opener=b||gx.O;c=0;for(d=j.ReturnParms.length;c<d;c++)if((g=gx.fn.vStructForVar(j.ReturnParms[c]))&&g.grid)if(f=gx.O.getGridById(g.grid))break;f&&f.isUsercontrol&&(j.CustomRenderGrid=f);j.open();return j}c.OncloseCmds.push({popup:a})},openDialog:function(a){var b=
new this.Dialog;b.Opener=gx.O;b.open(a);return b},openPrompt:function(a,b,c,f,d,g){if(null==gx.popup.currentPrompt){f&&gx.setGxO(f,d);var j=b[0].Ctrl,l=!1,m,n;if(j)m=gx.fn.rowGridId(j),j=gx.fn.controlRowId(j),!gx.lang.emptyObject(m)&&!gx.lang.emptyObject(j)&&(gx.csv.lastGrid=m,gx.fn.setCurrentGridRow(m,j));else{for(var j=0,o=b.length;j<o;j++)if(b[j].IOType){m=b[j].id;break}if(m&&(m=gx.O.getValidStructFld(m),!gx.lang.emptyObject(m)&&(n=gx.O.getGridById(m.grid))))if(l=n.isUsercontrol)m=n.gridId+"",
j=!gx.lang.emptyObject(n.grid.getSelectedRow)?gx.text.padl(n.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(m)&&!gx.lang.emptyObject(j)&&(gx.csv.lastGrid=m,gx.fn.setCurrentGridRow(m,j))}if(g||this.outParmsAccepted(b)||l)a=new this.Popup([a,1,0,0,0,0,0,[],b],!0),a.IsMod=c,a.Opener=gx.getObj(f,d),l&&(a.CustomRenderGrid=n),a.open()}},outParmsAccepted:function(a){for(var b=a.length,c=!1,f=0;f<b;f++){var d=a[f];gx.fn.isOutputParm(d)&&(c=!0);if(gx.fn.isOutputParm(d)&&d.Ctrl&&gx.fn.isAccepted(d.Ctrl))return!0}return!c},
gxReturn:function(a){gx.fn.closeWindow(a)},parmId:function(a){a=gx.dom.id(a);0===a.indexOf("span_")&&(a=a.substring(5));return a},popuplvl:function(){var a=gx.popup.getPopup();return!a||!a.window?-1:a.window.gx.popup.lvl},assignPromptFields:function(a,b){for(var c=gx.O,f=[],d=99999,g=b.length,j=0,j=0;j<g;j++){var l=a[j],m=b[j];if(l.Ctrl&&!gx.lang.emptyObject(l)){gx.csv.pkDirty=l.isKey;"checkbox"==l.Ctrl.type&&l.Ctrl.value!=m&&(l.Ctrl.checked=!l.Ctrl.checked);l.Ctrl.value!=m&&l.isKey&&(gx.popup.gxOpener().GXPkIsDirty=
!0);var n=gx.csv.ctxControlId(this.parmId(l.Ctrl)),o=c.getValidStructFld(n);f.push({idx:o?o.id:d++,ParmCtrl:l.Ctrl,ControlId:n,VStruct:o,PValue:m})}}f.sort(function(a,b){return a.idx<b.idx?-1:a.idx>b.idx?1:0});for(j=0;j<f.length;j++)this.assignPromptField(f[j],c)},assignPromptField:function(a,b){var c=a.ControlId,f=a.VStruct,d=a.ParmCtrl,g=a.PValue,j;if(!gx.lang.emptyObject(f)&&(j=b.getValidStructId(f.fld)))j>gx.O.toValid&&(b.toValid=j),gx.csv.validateAll();!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(f.v2c)&&
("date"==f.type||"dtime"==f.type)?(f.v2v(g),gx.fn.v2c(f,g)):gx.fn.setControlValue(this.parmId(d),g,0);gx.fn.setControlGxValid(d,"0");gx.evt.execOnchange(d);d=gx.dom.byId("span_"+d.name);null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),d.childNodes[0].nodeValue=g);f&&f.gxgrid&&f.gxgrid.updateControlValue(f,!1);gx.util.balloon.clear(c);if(j&&(gx.O.toValid=j+1,gx.csv.validateAll(),!gx.lang.emptyObject(f.rgrid))){c=f.rgrid.length;for(g=0;g<c;g++)f.rgrid[g].filterVarChanged()}},
autofit:function(){var a=this.getPopup();!gx.lang.emptyObject(a)&&"opened"==a.state&&this.ext.autofit(a,null,!1)},Impl:function(a,b,c,f,d,g,j,l){var m="PopupBorder gx-popup gx-popup-default";a.cssClass&&(m=m.replace("gx-popup-default",""),m+=" "+a.cssClass);return new this.ext.popUp(a,c,g,l,j,f,d,"gxp",b,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header",
"PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",m,"PopupShadow",void 0)},setZIndex:function(a){a=gx.dom.getStyle(a,"zIndex");isNaN(a)&&(a=999);a++;this.zindex=a;this.ext.zdx=a},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(a){var b=gx.dom.byId;gx.popup.ext.compatMode()&&(b(a+"_t").style.visibility="hidden",b(a+"_c").style.visibility=
"hidden",b(a+"_rs").style.visibility="hidden");b(a+"_b").style.visibility="hidden"},show:function(a){var b=gx.dom.byId,c=d("#"+a+"_b");gx.popup.ext.compatMode()?(b(a+"_t").style.visibility="visible",b(a+"_c").style.visibility="visible",b(a+"_rs").style.visibility="visible"):d(document.body).toggleClass("gx-popup-opened",!0);c.css("visibility","visible")},close:function(a,b){d(document.body).toggleClass("gx-popup-opened",!1);if(!b||!("function"==typeof b&&!1===b())){gx.popup.ext.iFrame=null;gx.popup.ext.win=
null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var c=a.id,f=document.getElementById(c+"_b"),c=document.getElementById(c+"_ifrm");gx.popup.ext.deinitmodal(a);gx.popup.setPopup(a.parentPopup);var k=a.callerActiveElement;k&&k.focus&&k.focus();a.parentPopup?a.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[a]):gx.fx.obs.notify("popup.close",[a]);c&&(c.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?f.parentNode.removeChild(f):
gx.dom.removeControlSafe(f)}},move:function(a,b,c){a=d("#"+a+"_b");a.toggleClass("gx-popup-centered",!1);void 0!==b?a.css({left:Math.max(b,0)}).toggleClass("gx-popup-horizontal-center",!1):a.toggleClass("gx-popup-horizontal-center",!0);void 0!==c&&a.css({top:Math.max(c,0)})},resize:function(a,b,c){var f=gx.dom.byId;if(f(a+"_rs").rsEnable){var k=f(a+"_rs"),g=f(a+"_b"),j=f(a+"_t"),f=f(a+"_c");gx.popup.ext.compatMode()?(k.style.left=Math.max(b,92)+"px",k.style.top=Math.max(c,72)+"px",g.style.width=Math.max(b+
8,100)+"px",g.style.height=Math.max(c+8,80)+"px",j.style.width=Math.max(b+3,92)+"px",f.style.width=Math.max(b-5,87)+"px",f.style.height=Math.max(c-28,44)+"px"):(a=document.getElementById(a+"_ifrm"),d(a).css({width:b,height:c}));this.resizePopupContent(b,c)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=
null},startRS:function(a,b){var c=gx.popup.ext,f=a.pageX,k=a.pageY,g=d(b);gx.popup.ext.compatMode()?(c.rsxoff=parseInt(b.style.left,0)-f,c.rsyoff=parseInt(b.style.top,0)-k):(c.rsxoff=g.position().left-f,c.rsyoff=g.position().top-k);c.currRS=b;return!1},changez:function(a){var a=null!=a?a:this,b=gx.popup.ext,c=gx.dom.byId;a.style.zIndex=++b.zdx;c(a.cid+"_rs").style.zIndex=++b.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(a,b){var c=gx.popup.ext,f=gx.dom.byId,f=f(b.cid+"_b");
gx.evt.mouse.update(a);var k=gx.evt.mouse.x,g=gx.evt.mouse.y;gx.popup.ext.compatMode()?(c.xoff=parseInt(f.style.left,0)-k,c.yoff=parseInt(f.style.top,0)-g):(c.xoff=d(f).position().left-k,c.yoff=d(f).position().top-g);c.currIDb=f;return!1},subBox:function(a,b,c,f,d,g){d=document.createElement("div");d.setAttribute("id",g);d.style.position="absolute";d.style.left=a+"px";d.style.top=b+"px";d.style.width=c+"px";d.style.height=f+"px";d.style.visibility="visible";d.style.padding="0px";d.style.width=c+"px";
return d},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(a,b,c,f,k,g,j,l,m,n,o,p,q,t,r,s,u,y,w,v,x,B,C,E,z,A,I,H){z=void 0!==z?z:gx.popup.showParentPopups;b=a.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);c=this.win.gx.dom.byId.closure(this.win.gx.dom);f=d("<div/>",{id:b+"_rs"})[0];u&&(f.className+="gx-popup-resize",f.innerHTML='<img src="'+w+'" width="7px" height="7px" alt="'+
gx.getMessage("GXM_resize")+'">',f.style.cursor="se-resize");f.rsEnable=u;w=d("<div/>",{id:b+"_b",style:!r?"visibility:hidden;":""})[0];d(w).addClass("gx-responsive-popup gx-popup-centered "+C+" gx-popup-initial");C=d("<div/>",{id:b+"_t"})[0];C.className=v;C.innerHTML='<span id="'+b+'_gxtitle" class="PopupTitle">'+m+'</span><span class="'+x+'"; id="'+b+'_cls"></span>';m=d("<div/>",{id:b+"_c"})[0];m.className=B;"string"==typeof j?m.innerHTML=j:m.appendChild(j);w.appendChild(C);w.appendChild(m);w.appendChild(f);
H=gx.dom.byId(H)||this.doc.body;H.appendChild(w);r||this.hide(b);var F=c(b+"_b"),G=d(F),j=c(b+"_rs"),r=c(b+"_cls");F.cid=b;F.isExt=y?!0:!1;var J=c(b+"_t");J.cid=b;u&&(j.cid=b,gx.evt.attach(j,"mousedown",this.startRS.closure(this,[j],!0)),gx.evt.attach(j,"mouseup",this.stopRS.closure(this,[j],!0)));gx.evt.attach(r,"click",I.close||this.close.closure(this,[a,I.beforeClose]));s&&(gx.evt.attach(J,"mousedown",function(a){this.grab_id(a,J);G.css({top:G.position().top,left:G.position().left});G.toggleClass("gx-popup-centered",
false);gx.evt.attach(F,"mouseup",this.stopdrag.closure(this,[J],true),this,{single:true})},this),u&&gx.evt.attach(f.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(t||z)&&this.initmodal(a,z,A)},window_compat:function(a,b,c,f,d,g,j,l,m,n,o,p,q,t,r,s,u,y,w,v,x,B,C,E,z,A,I,H){z=void 0!==z?z:gx.popup.showParentPopups;p=a.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);q=this.win.gx.dom.byId.closure(this.win.gx.dom);d=Math.max(d,100);g=Math.max(g,80);b=new this.subBox(d-
8,g-8,7,7,"",p+"_rs");u&&(b.className+="gx-popup-resize",b.innerHTML='<img src="'+w+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',b.style.cursor="se-resize");b.rsEnable=u;c=new this.subBox(c,f,d,g,o,p+"_b");c.className=C;c.style.display="block";c.style.boxSizing="content-box";c.style.zIndex=++this.zdx;r||(c.style.visibility="hidden");n=new this.subBox(2,2,d-5,20,n,p+"_t");n.style.overflow="hidden";n.style.boxSizing="content-box";n.className=v;n.innerHTML=
'<span id="'+p+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+m+'</span><span class="'+x+'" style="z-index:'+ ++this.zdx+';" id="'+p+'_cls"></span>';d=new this.subBox(2,24,d-13,g-36,l,p+"_c");d.className=B;"string"==typeof j?d.innerHTML=j:d.appendChild(j);d.style.overflow="hidden";d.style.boxSizing="content-box";r||(c.style.visibility="hidden",n.style.visibility="hidden",d.style.visibility="hidden");c.appendChild(n);c.appendChild(d);
c.appendChild(b);H=gx.dom.byId(H)||this.doc.body;H.appendChild(c);r||this.hide(p);var F=q(p+"_b");F.cid=p;F.isExt=y?!0:!1;var G=q(p+"_t");G.cid=p;u&&(j=q(p+"_rs"),j.cid=p,j.style.boxSizing="content-box",gx.evt.attach(j,"mousedown",this.startRS.closure(this,[j],!0)),gx.evt.attach(j,"mouseup",this.stopRS.closure(this,[j],!0)));j=q(p+"_cls");gx.evt.attach(j,"click",I.close||this.close.closure(this,[a,I.beforeClose]));s&&(gx.evt.attach(G,"mousedown",function(a){this.grab_id(a,G);gx.evt.attach(F,"mouseup",
this.stopdrag.closure(this,[G],true),this,{single:true})},this),u&&gx.evt.attach(b.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(t||z)&&this.initmodal(a,z,A)},popUp:function(a,b,c,f,k,g,j,l,m,n,o,p,q,t,r,s,u,y,w,v,x,B,C,E,z,A,I,H,F,G,J,N,O,L,M){o=gx.popup.ext;null!=a.parentPopup?(p=a.parentPopup.window,o=p.gx.popup.ext,o.win=p,o.doc=p.document,gx.popup.ext=o):(o.win=window,o.doc=o.win.document);o.win.gx.popup.setPopup(a);a.window=o.win;a.document=o.doc;o.win.gx.popup.lvl++;l+=o.win.gx.popup.lvl;
a.id=l;!a.IsPrompt&&!gx.util.sameAppUrl(m)?(gx.popup.setPopup(null),a=new Date,a=a.getTime(),l="",1==c&&(l="left="+f+",top="+k),f="",b||(f=",width="+g+",height="+j),window.open(E?m:"","gx"+a,"status=no,menubar=no"+f+",resizable="+(B?"yes":"no")+",scrollbars=yes,"+l)):(m+=-1!=m.indexOf("?")?",":"?",m+=encodeURIComponent("gxPopupLevel="+o.win.gx.popup.lvl+";"),c="",c=gx.util.getFileName(m),c=c.charAt(0).toUpperCase()+c.slice(1),gx.popup.ext.compatMode()?(p=gx.HTML5?"auto":"100%",c='<iframe id="'+l+
'_ifrm" src="'+m+'" width="'+p+'" height="'+p+'" frameborder="0" style="overflow:auto;" title="'+c+'" data-gx-popup-ct=""></iframe>'):(p=!b&&0<g?g:gx.dom.fixes.getPopupMinWidth(),m=d("<iframe/>",{id:l+"_ifrm",src:m,title:c,style:"width:"+gx.dom.addUnits(p)}),m.attr("data-gx-popup-ct",""),c=m[0].outerHTML),m={close:a.close.closure(a,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},o.window(a,b,f,k,g,j,c,n,q,t,s,u,y,w,v,x,B,E,F,G,J,N,O,L,M,!0,m),b=o.win.gx.dom.byId(l+"_ifrm"),o.iFrame=b,gx.lang.doCallTimeout(o.showIfLoaded,
o,[a,b,1],50))},initmodal:function(a,b,c){a.showParentPopups=b;null==a.parentPopup?gx.ajax.disableForm(c,!0):b||this.hide(a.parentPopup.id)},deinitmodal:function(a){if(null==a.parentPopup)gx.ajax.enableForm();else{this.show(a.parentPopup.id);var b=a.parentPopup.frameWindow;b&&b.gx&&a.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(a){return a.contentType||d(a.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(a,b){if(void 0===b.isPdf){var c=
a.src;if(gx.util.getContentTypeFromExt(c)==gx.util.contentTypes.pdf)return b.isPdf=!0;var f=gx.util.contentTypes.html;try{var d=a.contentDocument,d=a.contentWindow.document,f=this.getDocumentContentType(d);if(f==gx.util.contentTypes.pdf)return b.isPdf=!0}catch(g){f=null}if(gx.lang.emptyObject(f)){var j,f={};f.url=c;f.method="HEAD";f.sync=!0;f.ajaxHeader=!1;f.handler=function(a,b,c){j=c.getResponseHeader("Content-Type")};f.obj=!0;gx.http.doCall(f);if(j&&0<=j.indexOf(gx.util.contentTypes.pdf))return b.isPdf=
!0}return!1}return b.isPdf},showIfLoaded:function(a,b,c){try{if(a.isActive()&&(this.docReady(b,c)||10<c&&this.isPDFPopup(b,a))){var f=gx.dom.iFrameDoc(b),d=!1;try{d=f&&"about:blank"!=f.URL}catch(g){}var j=this.isPDFPopup(b,a);if(d||j){a.state="opened";this.autofit(a,f,!0);return}}}catch(l){gx.dbg.logEx(l,"gxpopup.js","showIfLoaded")}c++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[a,b,c],50*c)},docReady:function(a,b){if("complete"==a.readyState)return!0;var c=gx.dom.iFrameDoc(a);
if(c){var f;try{f="undefined"!=typeof c.gxReadyState?c.gxReadyState:c.readyState}catch(d){return!0}if("complete"==f)return!0}return!gx.util.browser.isIE()&&50<=b&&c&&c.body&&0!==c.body.childNodes.length?!0:!1},resizePopupContent:function(a,b){if(gx.HTML5&&this.iFrame){var c=gx.dom.iFrameDoc(this.iFrame),f=0<b?b:"100%",k=0<a?a:"100%",g=d(this.iFrame),j=0<a&&0<b,l=gx.popup.ext.compatMode(),m;if(c){var n=c.documentElement;if(n)if(l)k=f="100%";else{try{m=g[0].contentWindow.gx&&g[0].contentWindow.gx.runtimeTemplates}catch(o){}j?
(d(n).width(a),d(n).height(b),d(n).css("min-width",""),g.width(k),g.height(f)):(m||g.width(50),d(n).width(d(n).width()),g.width(d(n).width()));k=Math.max(Math.max(c.body.scrollWidth,c.documentElement.scrollWidth),Math.max(c.body.offsetWidth,c.documentElement.offsetWidth));try{k+=d(window).height()<=c.body.offsetHeight?d.position.scrollbarWidth():0}catch(p){}f=void 0}}g.width(k);void 0===f&&(f=Math.max(Math.max(c.body.scrollHeight,c.documentElement.scrollHeight),Math.max(c.body.offsetHeight,c.documentElement.offsetHeight)));
g.height(f)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(a,b,c){if(!gx.lang.emptyObject(a)){var f=document,k=a.id,g=a.isPdf,j=d("#"+k+"_c");this.doc||(this.doc=a.document);var f=this.doc,l=f.getElementById(k+"_ifrm"),m=d(f.getElementById(k+"_gxtitle"));!b&&gx.popup.ispopup()&&(b=gx.dom.iFrameDoc(l));m.text(b&&!g?b.title:"");a.frameDocument=b;a.frameWindow=l.contentWindow;b&&!g&&(b.gxPopup=
a);gx.util.browser.isIPad()&&(j.css("overflow-y","auto"),j.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var n=this.getiFrameSizeInfo(f);n.accessParentFrame&&(m=n.scrollTop,l=n.maxHeight+Math.min(window.top.document.body.scrollTop-n.y,0)-50,j.css("max-height",l).parent().css("margin-top","0px"),n=Math.max(window.top.document.body.scrollTop-n.y,0),b=Math.min(b.body.offsetHeight,l),this.move(k,void 0,n+m+(l-b)/2))}var o,p;g&&(j.addClass("gx-popup-pdf"),o=0.5*f.body.clientWidth,
p=0.85*f.body.clientHeight);a.autoresize||(o=a.width,p=a.height);this.resizePopupContent(o,p);c&&(a.position&&(c=parseInt(a.top,0),a=parseInt(a.left,0),this.move(k,a,c)),this.show(k))}},autofit_comp:function(a,b,c){if(!gx.lang.emptyObject(a)){var f=document;a.zindex=null!=f.gxPopup?this.zdx+f.gxPopup.zindex:this.zdx;var k=a.id,g=a.isPdf;this.doc||(this.doc=a.document);var f=this.doc,j=f.getElementById(k+"_ifrm");!b&&gx.popup.ispopup()&&(b=gx.dom.iFrameDoc(j));a.frameDocument=b;a.frameWindow=j.contentWindow;
b&&!g&&(b.gxPopup=a);var j=f.getElementById(k+"_rs"),l=f.getElementById(k+"_t"),m=f.getElementById(k+"_b"),n=f.getElementById(k+"_c"),o=f.getElementById(k+"_gxtitle");o.innerHTML=b&&!g?b.title:"";o.style.width="auto";var p=gx.dom.getComputedStyle(n),q=gx.dom.getComputedStyle(l),t=gx.dom.getComputedStyle(m),r=gx.dom.getComputedStyle(j),s=parseInt(p.height,0),u=parseInt(p.width,0),y=this.getiFrameSizeInfo(f),w=y.maxWidth,v=y.maxHeight,x=y.scrollTop,B=y.scrollLeft,C=y.x,y=y.y,E=gx.dom.dimensions(m);
a.autoresize||(s=a.height-s+E.h,u=a.width-u+E.w);var z=a.width-u,A=a.height-s;a.autoresize&&(!g&&b?(b=gx.HTML5?b.documentElement||b.body:b.body,f=c&&gx.util.browser.isEdge()?d.position.scrollbarWidth():0,b?(b.gxwidth||(b.gxwidth=b.scrollWidth),z=b.gxwidth+f,f=b.gxwidth+30-w,A=b.scrollHeight+30-v,z=Math.max(z,o.clientWidth+15)-u-(0<f?f:0)+0,A=b.scrollHeight-s-(0<A?A:0)):gx.util.browser.isIE()&&(0>z&&(z=0),0>A&&(A=0))):g&&(z=f.body.clientWidth/2,A=f.body.clientHeight/2));o=parseInt(a.top,0);s=parseInt(a.left,
0);if(!a.position&&(o=(v-A)/2-E.h/2+x-y,s=(w-z)/2-E.w/2+B-C,0>o&&(o=5,A-=5),0>s))s=5,z-=5;m.style.top=parseInt(o,0)+"px";m.style.left=parseInt(s,0)+"px";a.autoresize?(a=function(a,b){var c=parseInt(a,0)+b;return c>0?c:a},l.style.width=a(q.width,z)+"px",m.style.height=a(t.height,A)+"px",m.style.width=a(t.width,z)+"px",n.style.height=a(p.height,A)+"px",n.style.width=a(p.width,z)+"px",a=gx.util.browser.isIE()?4:2,j.style.top=parseInt(t.height,0)-parseInt(r.height,0)-a+"px",j.style.left=parseInt(t.width,
0)-parseInt(r.width,0)-a+"px"):(s=a.height,u=a.width,j.style.left=Math.max(u,92)+"px",j.style.top=Math.max(s,72)+"px",m.style.width=Math.max(u+8,100)+"px",m.style.height=Math.max(s+8,80)+"px",l.style.width=Math.max(u+3,92)+"px",n.style.width=Math.max(u-5,87)+"px",n.style.height=Math.max(s-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(n.style["overflow-y"]="auto",n.style["-webkit-overflow-scrolling"]="touch"):n.style.overflow="hidden";g&&gx.util.browser.isIE()?this.resizePopupContent("100%",
"100%"):this.resizePopupContent(parseInt(n.offsetWidth,10),parseInt(n.offsetHeight,10));c&&this.show(k)}},getiFrameSizeInfo:function(a){var b=gx.util.getWindowInfo().canAccessFrame,c={x:0,y:0,accessParentFrame:b};!b||window==window.top||gx.lang.emptyObject(window.top)?(c.maxWidth=window.innerWidth||a.documentElement.clientWidth||a.body.offsetWidth,c.maxHeight=window.innerHeight||a.documentElement.clientHeight||a.body.offsetHeight,c.scrollTop=gx.dom.documentScroll(a).scrollTop,c.scrollLeft=gx.dom.documentScroll(a).scrollLeft):
(b=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>a.body.clientHeight?c.maxHeight=a.body.clientHeight:(c.maxHeight=window.top.document.body.clientHeight,c.y=b.y),c.scrollTop=a.body.scrollTop,c.scrollLeft=a.body.scrollLeft,c.maxWidth=Math.min(window.top.document.body.clientWidth,a.body.clientWidth),window.top.document.body.clientWidth>a.body.clientWidth)?c.maxWidth=a.body.clientWidth:(c.maxWidth=window.top.document.body.clientWidth,c.x=b.x);return c},_init:function(){setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),
40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var a=this.getPopup();if(a){try{a.frameDocument&&(gx.util.browser.isIE()?a.frameDocument=a.frameWindow.document:a.frameDocument.gxPopup=a)}catch(b){a.frameDocument=a.frameWindow.document,gx.dbg.logEx(b,"gxpopup.js","_init")}a=a.window.gx.popup;gx.fx.obs.addObserver("gx.onload",a,function(){this.autofit()}.closure(a));gx.fx.obs.addObserver("grid.onafterrefresh",a,function(a,b,d){b<d&&this.autofit()}.closure(a));gx.fx.obs.addObserver("gx.onafterevent",
a,function(){this.autofit()}.closure(a))}}}}(gx.$);
gx.ajax=function(d){var a=/\?(.*)/,b=function(a,b,d){gx.dbg.logMsg("Unable to execute external object "+a+" - "+b+"("+d+")")};return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(a){var b=!1;a.av?b=a.av:a.ctrl&&a.prop?b=a.ctrl+a.prop:a.ctrl&&(b=a.ctrl);return b},serviceUrl:function(b,f){var d=gx.ajax.selfUrl();f&&(d=a.test(d)?d.replace(a,"?"+f+",$1"):d+("?"+f));return d},message:function(a,b,k,g,j,l){var m;return{disableForm:l,gxO:b,grid:k,row:g,methods:[a],addMethod:function(a){this.methods.push(a)},
gridsData:function(){var a=this.gxO.getGridById(this.grid,this.row),b=a,c={};if(a){var f=function(a,b,c,g){d.each(a.childGrids,function(a,d){var k=c.getGridById(d.gridId,g);k?(b[k.gridName]={id:k.gridId,lastRow:k.lastRowId,pRow:k.parentRow?k.parentRow.gxId:""},f(k,b,c,g+k.grid.GridRow)):gx.dbg.write("gx.ajax.gridsData - grid not found for row: "+g,!0)})};f(a,c,this.gxO,this.row)}else for(d.each(this.gxO.Grids,function(a,b){c[b.gridName]={id:b.gridId,lastRow:b.lastRowId,pRow:b.parentRow?b.parentRow.gxId:
""}});b;)c[a.gridName]={id:a.gridId,lastRow:a.lastRowId},b=b.parentGrid;return c},to_json:function(){var a={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(a.fullPost=this.fullPost);this.addGXStateParms(a);this.grid&&(a.grid=this.grid);a.grids=this.gridsData();this.row&&(a.row=this.row.substring(0,4),a.pRow=this.row.substring(4));return gx.json.serializeJson(a)},
getParmsMetadata:function(a){for(var b=[],c={},f=0,d=this.methods.length;f<d;f++){var g=this.methods[f];if(this.gxO.EvtParms[g])for(var g=this.gxO.EvtParms[g]["input"==a?0:1],k=0;k<g.length;k++)if(g[k].postForm||g[k].sPrefix||g[k].sSFPrefix||g[k].sCompEvt)b.push(g[k]);else{var j=gx.ajax.resolveParmKey(g[k]);j&&(void 0===c[j]?(c[j]=b.length,b.push(g[k])):void 0===b[c[j]].grid&&void 0!==g[k].grid&&(b[c[j]]=g[k]))}}return b},parmFromHidden:function(a,b){var c=gx.O,f;gx.setGxO(b);!gx.lang.emptyObject(a)&&
(!gx.lang.emptyObject(b)&&a.v2v)&&(f=gx.fn.getHidden(this.gxO.IsMasterPage?a.fld+"_MPAGE":gx.O.CmpContext+a.fld),a.v2v(f),f=b[a.gxvar]);gx.setGxO(c);return f},getInputParms:function(){for(var a=this.getParmsMetadata("input"),b=this.gxO.CmpContext,c=[],f=[],g,k,j,l,m,w=0,v=a.length;w<v;w++)if(g=a[w],g.postForm){l={};l.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(l,gx.http.postDataFormat.JSON);for(var x in gx.http.viewState)this.fullPost[x]||(this.fullPost[x]=gx.http.viewState[x])}else if("Referrer"==
g.prop)c.push(gx.referrer?gx.referrer:document.referrer);else if(g.sPrefix)c.push(this.gxO.sPrefix());else if(g.sSFPrefix)c.push("");else if(g.sCompEvt)c.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else{if(g.ctrl)g.prop?"GridRC"==g.prop?(l=(l=gx.parentGridRow(g.grid,this.gxO))?"_"+l:"",k={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+g.av+l),rowSuffix:l}):k=this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+g.ctrl,g.prop):(j=this.gxO.getValidStructFld(g.ctrl),null!=j&&gx.html.controls.isMultiSelection(j.ctrltype)&&
(l=gx.fn.getControlGridRef(j.fld,j.grid),(l=gx.dom.comboBoxToObj(l,k))&&(k=l)));else if(void 0!==g.fld&&(j=g.fld?this.gxO.getValidStructFld(g.fld):null)&&("function"==typeof j.c2v&&"function"==typeof j.val&&void 0!==j.val())&&j.c2v(),k="function"==typeof this.gxO[g.av]?this.gxO[g.av](this.row):void 0===this.gxO[g.av]?g.fld?gx.fn.getControlValue(g.fld):"":this.gxO[g.av],void 0!==g.grid){var B=k,C=[];d.each(this.gxO.Grids,function(a,c){if(c.gridId===g.grid){var f=c.parentRow?c.parentRow.gxId:"";if(j){k=
{pRow:f,c:[],hc:[],hsh:[],v:B};for(var d=1;d<=c.lastRowId;d++){m=gx.grid.getPaddedRowId(d);var l=j.isuc?gx.fn.getControlValue(j.fld+"_"+m+f):j.val(m+f);k.c.push(l);g.hsh&&k.hsh.push(gx.fn.getHash(b,j.fld,m+f));gx.lang.emptyObject(j.hc)||k.hc.push(gx.fn.getControlValue("GXHC"+j.fld+"_"+m+f))}}else gx.lang.isArray(k)&&(k={pRow:f,c:k,v:k[Number(gx.fn.currentGridRowImpl(g.grid))-1]});C.push(k)}});k=C}else g.hsh&&(j&&j.grid?(m=gx.fn.currentGridRowImpl(j.grid)||"",""===m&&(k=this.parmFromHidden(j,this.gxO))):
m="",f.push({hsh:gx.fn.getHash(this.gxO.CmpContext,g.fld,m),row:m}));c.push(void 0!==k?k:null)}return{input:c,hashed:f}},addGXStateParms:function(a){var b={};gx.notifications&&(gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID"))&&(b.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(b)||(a.gxstate=b)},call:function(){m=d.Deferred();var a=gx.O;gx.setGxO(this.gxO);var b;this.grid&&this.row&&(b=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,
this.row));j&&gx.fn.objectOnpost();var c=this.getInputParms();j?(this.parms=c.input,this.hashedParms=c.hashed,this.doFullAjaxCall(!1,this.disableForm)):this.doClientSideCall();this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,b);gx.setGxO(a);return m.promise()},doFullAjaxCall:function(a,b){var c=this.to_json();gx.evt.setProcessing(!0);!1!==b&&this.gxO.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,a]);var f=gx.ajax.getPostInfo(this.gxO,c,a);f.handler=this.postHandlerFullAjax.closure(this);
f.handleAllStatusCodes=!0;f.url=gx.ajax.serviceUrl(gx.pO,gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));f.reqData=c;f.always=this.callback;f.contentType="application/json";gx.http.doCall(f)},doClientSideCall:function(){this.callback();m.resolve()},postHandlerFullAjax:function(a,b,c){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=c.status;var a=!1,f;c.status==gx.http.STATUS_FORBIDDEN?(alert(gx.getMessage("GXM_runtimeappsrv")+" ("+c.status+")"),a=!0):gx.http.checkResponseStatus(c)?
a=!0:200>c.status||299<c.status?(gx.dom.writeError(c.responseText,gx.getMessage("GXM_runtimeappsrv"),c.status),a=!0):gx.http.validJsonResponse(c,b)?(f=gx.json.evalJSON(b),null==f?gx.dom.writeError(b.toString(),gx.getMessage("GXM_runtimeappsrv"),c.status):(gx.csv.lastEvtResponse=f,gx.ajax.setJsonResponse({response:f,isPostBack:!0,gxObject:this.gxO,gridId:this.grid,row:this.row}).done(function(){gx.fx.obs.notify("gx.onafterevent",[f])}))):a=!0;gx.evt.setProcessing(!1);m.resolve();a&&gx.fx.obs.notify("gx.onafterevent",
[f])}}},maxGETLength:function(a){return a.AjaxSecurity?600:1350},getImageUrl:function(a,b){var d=a[b];if(gx.lang.emptyObject(d))return"";"object"==typeof d&&(a[b]=gx.ajax.resolveImageUrl(d));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a[b],!0)},imageGuidToUrl:function(a){try{if(!gx.lang.emptyObject(this.resourceProvider)){var b=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(a)+",,"+encodeURIComponent(gx.theme);gx.http.callBackend_simple(b,!0,!0,"GET",null,!0);
return gx.http.lastResponse}}catch(d){gx.dbg.logEx(d,"gxcallrpc.js","getImageUrl")}return a},resolveImageUrl:function(a){var b,d;for(b=0;b<a.length;b++)if(d=a[b],d.l==gx.languageCode&&d.t==gx.theme)return(d.i?"Resources/":"")+d.p},sendHeader:function(a){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend_simple(location.href,!0,!0,"HEAD",null,!0,!0,a),!0}catch(b){}return!1},encryptParms:function(a,b){return a.AjaxSecurity?gx.sec.encrypt(b):b},doPost:function(a,b,d,g){!1!==
d&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);b=this.getPostInfo(gx.O,a,b);b.url=gx.ajax.serviceUrl(gx.O,a);b.onReady=function(){gx.evt.setProcessing(!1);!1!==d&&!gx.popup.getPopup()&&gx.O.endFeedback()};b.always=g;gx.http.doCall(b)},getPostInfo:function(a,b,d){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=a;!0===d&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);
return b},multipartInfo:function(a){gx.dom.hasSelectedFile()&&(a.multipart=!0,a.mimetype="text/html",a.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(a,b){var k=void 0!==a.refresh_form,g,j;if("GET"==(a.refresh||a.refresh_form))gx.http.reload(!0);else return g="RFR",b.IsMasterPage&&(g+="_MPAGE"),k=k||!gx.pO.fullAjax?gx.pO:b,j=k.fullAjax,k.executeServerEvent(g,!gx.pO.fullAjax,null,!0,j);return d.Deferred().resolve()},doRefresh:function(a){var b=a.IsMasterPage?"RFR_MPAGE":
"RFR",a=!gx.pO.fullAjax?gx.pO:a;a.executeServerEvent(b,!0,null,!0,a.fullAjax)},dispatchCommands:function(a,b,d,g){var d=d||{},j,l,m=d.ignoreCmds||[],b=b||gx.O;if(a&&0<a.length)for(var n=a.length,o=void 0===g?0:g;o<n;o++)if(g=a[o],j=Object.keys?Object.keys(g)[0]:"",!gx.util.inArray(j,m)){g.set_focus&&gx.fn.usrSetFocus(g.set_focus,!0);g.print&&gx.printing.print(g.print);g.close&&(j=[],g.close.values instanceof Array&&(j=g.close.values),gx.fn.closeWindow(j,{parmsMetadata:g.close.metadata,updateParms:d.updateParms},
b));if(void 0!==g.refresh||void 0!==g.refresh_form||""===g.cmp_refresh){gx.ajax.dispatchRefreshCommand(g,b).then(function(){gx.ajax.dispatchCommands(a,b,d,o+1)});break}g.redirect&&(j=g.redirect,j.url=gx.ajax.removeGXParms(j.url),gx.http.redirect(j.url,j.forceDisableFrm,!1,b));g.calltarget&&gx.nav.callFromServerRedirect(g.calltarget.url,g.calltarget.target);g.callback&&g.callback.apply(g.callback.scope,g.args||[]);g.cmp_refresh&&(j=gx.pO.getWebComponent(g.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",
j));if(g.popup){b.endFeedback();a.length>o+1&&(gx.lang.isArray(g.popup)?g.popup[7]=a.slice(o+1):g.popup.OncloseCmds=a.slice(o+1));gx.popup.open(g.popup,b);break}if(g.ucmethod&&(l=gx.getObj(g.ucmethod.CmpContext,g.ucmethod.IsMasterPage))){j=gx.O;gx.setGxO(l);if((l=gx.O.getUserControl(g.ucmethod.Control))&&"function"==typeof l[g.ucmethod.Method])try{l[g.ucmethod.Method].apply(l,g.ucmethod.Parms)}catch(p){gx.dbg.logEx(p,"gxcallrpc.js","Failed to execute usercontrol method: "+g.ucmethod.Method)}gx.setGxO(j)}g.exomethod&&
gx.ajax.dispatchExoMethod(g.exomethod);g.exoprop&&gx.ajax.dispatchExoProperty(g.exoprop)}},resolveExoObject:function(a,b){var d=a[b],g,j,l;if(!d){d=b.split(".");g=window;j=0;for(l=d.length;j<l;j++)if(g=g[d[j]],void 0===g)return;d=g}return d},dispatchExoMethod:function(a){var f=gx.getObj(a.CmpContext,a.IsMasterPage),d,g,j;if(f){d=gx.O;gx.setGxO(f);try{(g=this.resolveExoObject(f,a.ObjectName))&&"GlobalEvents"===a.ObjectName?g.executeMethod(a.Method,a.Parms):a.IsEvent?gx.fx.obs.notify(a.Method,a.Parms):
g?(j=g[a.Method])?j.apply(g,a.Parms):b("method","Method not found",a.Method):b("method","Object not found",a.ObjectName)}catch(l){gx.dbg.logEx(l,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(d)}}},dispatchExoProperty:function(a){var f=gx.getObj(a.CmpContext,a.IsMasterPage),d,g;if(f){d=gx.O;gx.setGxO(f);try{(g=this.resolveExoObject(f,a.ObjectName))?g[a.PropertyName]=a.Value:b("property","Object not found",a.ObjectName)}catch(j){gx.dbg.logEx(j,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(d)}}},
ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(a,b,d,g,j,l,m,n){b=b||gx.O;if(a&&0<a.length){d=a.length;for(l=0;l<d;l++){var o=a[l];if(o.load){if(g=b.getGridById(o.load.grid,n))o.load.props.values=o.load.values,g.loadNewRows(o.load.props)}else o.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,j),gx.lang.doCall(gx.fn.setJsonProperties,m,n),(g=b.getGridById(o.addlines.grid,n))&&g.getNewRows(o.addlines.count))}}},willLeavePage:function(a){if(a)for(var b=a.length,d=0;d<b;d++)if(a[d].close)return!0;
return!1},getRedirectCommand:function(a){if(a)for(var b=a.length,d=0;d<b;d++){var g=a[d];if(g.popup)break;if(g.redirect)return g}return null},saveJsonResponse:function(a){this.lastJsonResponse=a},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(a,b,d){return this.setJsonResponse({response:a,isPostBack:!0,gxObject:b||gx.O,context:d})},setJsonResponse:function(a){var b=
d.Deferred(),k=a.response,g=a.isPostBack,j=a.afterCmpLoaded,l=a.gxObject,m=a.gridId,n=a.row,o=a.context||{},p=gx.fn,q=gx.lang.doCall,t,r,s=this.willLeavePage(k.gxCommands);l&&(t=gx.O,gx.O=l);m&&n&&(r=gx.fn.currentGridRow(m),gx.fn.setCurrentGridRow(m,n));if(gx.evt.srvCommand)gx.evt.srvCommand=!1,q(gx.ajax.dispatchCommands,k.gxCommands,l),b.resolve(s);else if((a=this.getRedirectCommand(k.gxCommands))&&a.redirect.forceDisableFrm)q(gx.ajax.dispatchCommands,k.gxCommands,l,{ignoreCmds:["refresh","cmp_refresh"]}),
b.resolve(s);else if(s)q(gx.ajax.dispatchCommands,k.gxCommands,l),b.resolve(s);else{q(gx.ajax.dispatchPreCommands,k.gxCommands,l,k.gxComponents,k.gxHiddens,k.gxValues,k.gxGrids,k.gxProps,n);q(p.clearCompontHiddens,k.gxComponents);var u=q(p.setJsonHiddens,l,k.gxHiddens);q(p.setJsonComponents,k.gxComponents,k.DynComponentMap,k.gxHiddens,function(a){gx.http.loadStyles();gx.updateTheme();g&&gx.fn.installComponents(false);typeof j=="function"&&j();if(t)gx.O=t;var c=q(p.setJsonValues,k.gxValues),v=q(p.setJsonProperties,
k.gxProps,n),x=[],B=d.map(a,function(a){a=p.cmpContextFromCtrl(a);if(a=gx.pO.WebComponents[a])return gx.lang.objToArray(a.UserControls).concat(a.getUserControlGrids())});gx.util.balloon.clearAll();p.enableDisableDelete();g&&(x=q(p.loadJsonGrids,k.gxGrids,g));q(p.setErrorViewer,k.gxMessages);if(g){var C;gx.pO.supportAjaxEvents&&(C=gx.lang.arrayUnique(v.concat(c,B,x,u)));p.objectPostback(C,a);p.setFocusAfterLoad(true);gx.dom.indexElements()}o.autoRefreshing||(g||!gx.popup.currentPopup)&&l.endFeedback();
q(gx.ajax.dispatchCommands,k.gxCommands,l);r&&gx.fn.setCurrentGridRow(m,r);b.resolve(s)},g)}return b},swallowKeys:function(a){a.cancel=!0;a.event.preventDefault()},disableForm:function(a,b){a=void 0===a||a;gx.pO.startFeedback(b);a&&gx.fx.obs.addObserver("gx.keypress",this,this.swallowKeys)},enableForm:function(a){a=a||gx.O;gx.pO&&gx.pO.endFeedback();a!=gx.pO&&a.endFeedback();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},isFormEnabled:function(){return gx.pO?!gx.pO.isFeedbackOn()&&
!gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(gx.ajax.formAutocomplete&&!(gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var a=gx.dom.form(),b=document.createElement("iframe");b.id="gx_iframe_force_ajax_autocomplete";b.name="gx_iframe_force_ajax_autocomplete";b.style.cssText="display: none";b.src="/content/blank";document.body.appendChild(b);var k=document.createElement("input");k.type="submit";
k.style.cssText="display: none";a.appendChild(k);var g=a.target,j=a.action;a.target=b.name;a.action=b.src;var l=d(k);gx.evt.attach(k,"click",function(a){a.stopPropagation();return!0});l.click();setTimeout(function(){a.target=g;a.action=j;a.removeChild(k);document.body.removeChild(b)})}},suggest:function(a,b,d,g,j,l,m){a=new gx.fx.suggestProvider(a,b,d,g);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(d),a,d,j,l,m)},hideCode:function(a,b,d){for(var g=this.objectUrl()+"?",b="gxajaxHideCode_"+
b,j=a.length,l=0;l<j;l++)b+=","+encodeURIComponent(eval(a[l]));g+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,a)},g,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(a,b,d){var g=d?gx.fn.setGridComboValues:gx.fn.setComboValues,j=d?b:gx.fn.screen_CtrlRef(b).name,d=this.objectUrl()+"?",a="gxajaxCallCrl_"+b+","+this.arrayToUrl(a),d=d+gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(a){g(j,a)},d,!0,gx.http.modes.retval)},refreshGrid:function(a,
b){var d=gx.O;gx.setGxO(a.parentObject);var g="GET",j=gx.ajax.gxObjectUrl(a.parentObject)+"?",l="gxajaxGridRefresh_"+a.gridName+","+b,m;gx.fx.obs.notify("grid.onbeforerefresh",[a]);a.autoRefreshing=!0;gx.csv.autoRefreshing=a;var n=a.grid.rows.length;a.setPagingVars(0,0);if(l.length>gx.ajax.maxGETLength(gx.O)){g="POST";m=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+a.gridName)];for(var l=b.split(","),o=0,p=l.length;o<p;o++)m.push("GXParm"+o+"="+l[o])}else j+=gx.ajax.encryptParms(gx.O,
l);a.grid.mask();gx.http.doCall({method:g,url:j,reqData:m,handler:function(b,f,d){gx.http.postHandler(b,f,d,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[a,n,a.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;a.autoRefreshing=!1;a.grid.unmask();gx.setGxO(d)}})},newRows:function(a,b,d,g,j,l,m,n){var o=this.objectUrl()+"?",p=[],q=gx.O,a=gx.fn.gridObj(a,m?d+"_"+m:d,b);p.push("gxajaxNewRow_"+d);p.push(g);p.push(j);p.push(l);(q.IsComponent||q.IsTypeComponent)&&p.push(q.CmpContext);
p=p.concat(a.getParmsValues(!1,a.postingVariables));o+=gx.ajax.encryptParms(q,p.join(","));gx.http.callBackend_simple(o,!0);if(d=gx.http.lastResponse)d=gx.json.evalJSON(d),n.call(a,d),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[d])},loadCrl:function(a,b,d){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var g=this.objectUrl()+"?",a="gxajaxExecAct_"+a+","+this.arrayToUrl(b),g=g+gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,
a)},g,!0,gx.http.modes.retval)}},udp:function(a,b,d){var g=this.objectUrl()+"?",a=a+","+this.arrayToUrl(b),g=g+gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,a)},g,!0,gx.http.modes.retval)},srvEvt:function(a,b,d,g){var j=this.objectUrl()+"?",a=a+","+b+","+this.arrayToUrl(d),j=j+gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(g,a)},j,!0,gx.http.modes.full)},validSrvEvt:function(){gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",
this,this.validSrvEvt_impl.closure(this,arguments),{single:!0}):this.validSrvEvt_impl.apply(this,arguments)},validSrvEvt_impl:function(a,b,d,g){var j=function(a){gx.csv.setValidValues(d,g,a)},l=this.objectUrl(),m=a+","+b+","+this.arrayToUrl(d,!0);m.length>this.maxGETLength(gx.O)?this.validAsPost(l,j,a,b,d):(l+="?"+gx.ajax.encryptParms(gx.O,m),gx.http.callBackend_impl(j,l,!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(a,b,d,g,j){d="GXEvent="+gx.ajax.encryptParms(gx.O,d)+"&GXAction="+
g;0<j.length&&(d+="&"+this.getParmsPostData(j));gx.http.callBackend_impl(b,a,!0,gx.http.modes.call,!gx.ajax.isFormEnabled(),"POST",d)},getParmsPostData:function(a){for(var b="",d=0;d<a.length;d++)0<d&&(b+="&"),b+="GXParm"+d+"="+this.parmToUrl(a[d],!0);return b},getCallerUrl:function(a){if(gx.stackSupported()){var a=(a=gx.call_stack_storage.get(gx.stackId(a)))||[],b=1==a.length&&a[0]!=gx.ajax.selfUrl()?a[0]:"";return b=1<a.length?a[a.length-2]:b}return gx.fn.getHidden("sCallerURL")},pushReferer:function(a,
b){b="undefined"==typeof b?location.href:gx.ajax.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof a&&(a=gx.popup.popuplvl());var d=gx.call_stack_storage.get(gx.stackId(a)),d=d||[];b!=gx.util.lastArray(d)&&d.push(b);gx.call_stack_storage.set(gx.stackId(a),d)}else{var d=this.objectUrl()+"?",g="dyncall,PushReferer,"+encodeURIComponent(b),d=d+gx.ajax.encryptParms(gx.O,g);gx.http.callBackend_simple(d,!0,!0)}},windowClosed:function(a){if(gx.stackSupported())if(-1==a){var b=gx.stackId(gx.popup.popuplvl()),
a=(a=gx.call_stack_storage.get(b))||[];a.pop();gx.call_stack_storage.set(b,a)}else gx.call_stack_storage.remove(gx.stackId(a));else b="",b=-1==a?",PopReferer":",DeleteReferer,"+a.toString(),a=this.objectUrl()+"?",a+=gx.ajax.encryptParms(gx.O,"dyncall"+b),gx.http.callBackend_simple(a,!0,!0)},aggSel:function(a,b,d){var g=this.objectUrl()+"?",a="gxajaxAggSel"+b+"_"+a+","+this.arrayToUrl(d),g=g+gx.ajax.encryptParms(gx.O,a);return gx.http.callBackend_impl(null,g,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(a,
b,d,g,j){return gx.num.parseFloat(this.aggSel(a,b,j),d,g)},aggSelInteger:function(a,b,d){return parseInt(this.aggSel(a,b,d),10)},dynComponent:function(a,b,k,g){var j=d.Deferred(),a=a.toLowerCase();gx.gen.isDotNet()&&(a+=".aspx");a=gx.ajax.objectUrl(a);k="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(k)+"&GXParm0="+encodeURIComponent(g);for(g=0;g<b.length;g++)k+="&GXParm"+(g+1).toString()+"="+encodeURIComponent("function"==typeof b[g].getUrlVal?b[g].getUrlVal():
b[g]);gx.http.doCall({method:"POST",url:a,reqData:k,handler:function(a,b){j.resolve(gx.json.evalJSON(b))},error:function(){j.reject()}});return j.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(a){return a.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(a){if(a&&a.ajaxSecurityToken){var b="GX_AUTH_"+(a.CmpContext?a.CmpContext:"")+a.ServerClass,b=b.toUpperCase(),a=gx.fn.getHidden(b)||a.InternalParms[b];return{id:b,value:a}}},
arrayToUrl:function(a,b){for(var d="",g=a.length,j=0;j<g;j++)d+=this.parmToUrl(a[j],b)+",";return d},parmToUrl:function(a,b){var d=eval(a);if(d instanceof Array&&2==d.length&&"string"==typeof d[0]&&"string"==typeof d[1]){var g=gx.fn.vStructForVar(d[0]);null!=g&&(d=gx.fn.getGridCtrlProperty(g.grid,g.fld,d[1]))}b&&(g=gx.fn.vStructForVar(gx.unprefixVar(a)),null!=g&&gx.html.controls.isMultiSelection(g.ctrltype)&&(g=gx.fn.getControlGridRef(g.fld,g.grid),(g=gx.dom.comboBoxToObj(g,d))&&(d=g)));"object"==
typeof d&&(d=gx.json.serializeJson(d));if("undefined"==typeof d||null==d){g=!1;if(a&&0===a.indexOf("gx.O.")){var a=gx.unprefixVar(a),j=gx.fn.getHidden(gx.O.CmpContext+a);null!=j&&"undefined"!=typeof j&&(d=j,g=!0)}g||(d="")}return encodeURIComponent(d)},gxObjectUrl:function(a){var b="";a&&a.serviceUrl?b=a.serviceUrl:a.fullAjax&&a&&(b=gx.fn.getControlValue(a.CmpContext+"_CMPPGM")||"");return this.objectUrl(b)},objectUrl:function(a){var b="";a?b=a:(b=gx.csv.cmpCtx?gx.fn.getControlValue(gx.csv.cmpCtx+
"_CMPPGM"):gx.ajax.selfUrl(),null!=b&&(b=b.replace(/\?.*/,""),b=b.replace(/#[\s\S]*$/,"")),b=this.objnameFromUrl(b));return this.absoluteurl(this.objToRelativeUrl(b))},objToRelativeUrl:function(a){if(gx.isabsoluteurl(a))return a;var b=location.pathname;if(null!=a){for(var d=location.pathname.split("/"),b="",g=d.length,j=1;j<g-1;j++)b+="/"+d[j];b+="/"+a}return b},absoluteurl:function(a){if(!gx.isabsoluteurl(a)){if("/"!==a.charAt(0)){for(var b="",d=location.pathname.split("/"),g=1;g<d.length-1;g++)b+=
"/"+d[g];return location.protocol+"//"+location.host+b+"/"+a}return location.protocol+"//"+location.host+a}return a},objnameFromUrl:function(a){0<=a.indexOf("?")&&(a=a.split("?")[0]);var b=a.split("/"),d=b.length;return 0===d?a:b[d-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var a=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(a)for(var b=0;b<a.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),a[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),
window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function d(a){var b=$("#"+a.id+"_dp_trigger");if(0<b.length)return b.get(0);b=$("[data-gx-attached-ctrl~='"+a.id+"']");if(0<b.length)return b.parent().get(0)}this.init=function(a,b){this.id=a;this.balloonid=a+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=b||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=
!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(a){this.hasMessage||(this.messageWar=a,this.hasMessage=!0)};this.setError=function(a){this.hasMessage||(this.messageErr=a,this.hasMessage=this.isError=!0)};this.create=function(a,b,c,f){var k;k=document.createElement("span");k.id=a;k.className=c;a=document.createElement("div");a.style.position="absolute";a.style.zIndex=100;a.style.display="none";f=document.createTextNode(f);k.appendChild(f);a.appendChild(k);"right"==gx.csv.messagePosition||
"bottom"==gx.csv.messagePosition?(f=$(b).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<f.length?f.append(a):(f=d(b))?0<=f.id.indexOf("_dp_trigger")?$(f).closest(".dp_container").append(a):$(f).after(a):$(b).after(a)):!0===gx.csv.overlap?$(b).after(a):$(b).before(a);!0===gx.csv.overlap?(k.style.position="static",k.style.zIndex="1"):(a.style.position="relative",k.style.position="relative");return k};this.getControlValue=function(){for(var a=[gx.fn.getControlValue(this.id)],b=
0,c=this.sourceElements.length;b<c;b++)a.push(gx.fn.getControlValue(this.sourceElements[b]));return a.join(";")};this.groupControl=function(a){(a=gx.dom.el(a))&&("INPUT"===a.nodeName&&"radio"===a.type)&&(a=a.parentNode&&"SPAN"==a.parentNode.tagName?a.parentNode:gx.dom.findParentByTagName(a,"table"));return a};this.hideBalloon=function(a){a=a.parentNode;try{a&&(a.style.display="none")}catch(b){gx.dbg.logEx(b,"gxballoon.js","hideBalloon")}};this.showBalloon=function(a){try{var b=gx.csv.messagePosition,
c=gx.dom.el(this.id),f=a.parentNode,k=$(f),g,j,l=gx.popup.ispopup()?"flipfit":"none",a=c,m=d(c);if(!0===gx.csv.overlap){switch(b){case "top":g="left bottom";j="left top";break;case "right":g="left center";j="right center";a=m||a;break;case "bottom":g="left top";j="left bottom";break;case "left":g="right center",j="left center"}k.fadeIn().css("display","block");k.position({my:g,at:j,of:a,collision:l})}else f.style.display=("top"==b||"bottom"==b)&&!1===gx.csv.overlap?"block":"inline"}catch(n){gx.dbg.logEx(n,
"gxballoon.js","showBalloon")}};this.show=function(a){var b,c,d,k,g,j,l,m,n,o;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===this.hasMessage)return!0;c=gx.dom.el(this.id);null===c&&null!==gx.csv.validatingUC&&(c=gx.csv.validatingUC.getContainerControl());"hidden"==c.type?(b=gx.dom.byId("span_"+this.id),null!==b&&(c=b)):"INPUT"===c.nodeName&&"radio"===c.type&&(m=gx.dom.byName(gx.dom.id(c)),c.parentNode&&"SPAN"==c.parentNode.tagName?c=c.parentNode:(l=m[0],c=gx.dom.findParentByTagName(c,
"table")));if(m){b=[];n=0;for(o=m.length;n<o;n++)b.push(m[n]);m=b}else{m=[c];n=0;for(o=this.sourceElements.length;n<o;n++)m.push(gx.dom.el(this.sourceElements[n]))}this.active=g=!0;0<this.messageErr.length?(d="Error",k=this.messageErr):0<this.messageWar.length&&(d="Warning",k=gx.html.encode(this.messageWar));""!==d&&(b=d+"Messages",gx.dom.addPrefixClass(c,d),(j=gx.dom.byId(this.balloonid))?(j.innerHTML=k,g=!1):j=this.create(this.balloonid,l?l:c,b,k));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);
gx.util.balloon.lastLbl=j;!0===a?gx.csv.oneAtAtime||this.showBalloon(j):this.showBalloon(j);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(g){gx.csv.oneAtAtime&&(gx.evt.attach(c,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(c,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));o=m.length;for(n=0;n<o;n++)"INPUT"===m[n].nodeName&&
"radio"===m[n].type?gx.evt.attach(m[n],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(m[n],"blur",gx.util.balloon.cvsHide,this)}this.errorValue=this.getControlValue()}catch(p){gx.dbg.logEx(p,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var d,a,b;try{d=this.groupControl(this.id),b=this.getControlValue(),b!=this.errorValue&&(this.errorValue=b,a=gx.dom.byId(this.balloonid),null!=a&&(d&&(gx.dom.removePrefixClass(d,"Error"),gx.dom.removePrefixClass(d,"Warning")),this.hideBalloon(a),
this.active=!1))}catch(c){}},cvsMouseOutHandler:function(){if(this.active){var d=gx.dom.byId(this.balloonid);null!=d&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=d.id&&this.hideBalloon(d):this.hideBalloon(d))}},cvsMouseOverHandler:function(){if(this.active){var d=gx.dom.byId(this.balloonid);null!=d&&this.showBalloon(d)}},clearAll:function(){var d,a,b;this.timerOn=!1;for(b in this.balloons)d=this.balloons[b],a=gx.util.balloon.cvsHide.closure(d),d.clear(),a()},clear:function(d){var a,b,c;try{a=
gx.csv.ctxControlId(d),this.balloons[a]&&(b=this.balloons[a],c=gx.util.balloon.cvsHide.closure(b),b.clear(),c())}catch(f){gx.dbg.logEx(f,"gxballoon.js","clear")}},getNew:function(d,a,b){var b=b||[],c,f,k,g=b.length;"undefined"!=typeof a&&(d=d+"_"+a);try{c=gx.fn.screen_CtrlRef(d);f=gx.dom.id(c);d=gx.csv.ctxControlId(f);for(k=0;k<g;k++)c=gx.fn.screen_CtrlRef(b[k]),f=gx.dom.id(c),b[k]=gx.csv.ctxControlId(f)}catch(j){gx.dbg.logEx(j,"gxballoon.js","getNew")}this.balloons[d]?(a=this.balloons[d],a.sourceElements=
b||[],a.clear()):(a=new this.impl,this.balloons[d]=a,a.init(d,b));return a}};
(function(d){var a=function(){var b={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],
"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk",
"Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},c=function(a){a=-a.getTimezoneOffset();return null!==a?a:0},d=function(){var a=c(new Date(2014,0,2)),b=c(new Date(2014,5,2)),d=a-b;return 0>d?a+",1":0<d?b+",1,s":a+",0"},k=function(){var a;if(!("undefined"===typeof Intl||"undefined"===typeof Intl.DateTimeFormat))if(a=Intl.DateTimeFormat(),!("undefined"===typeof a||"undefined"===typeof a.resolvedOptions))if((a=a.resolvedOptions().timeZone)&&(-1<
a.indexOf("/")||"UTC"===a))return a},g=function o(a,b,c){"undefined"===typeof b&&(b=864E5,c=36E5);for(var d=(new Date(a.getTime()-b)).getTime(),a=a.getTime()+b,f=(new Date(d)).getTimezoneOffset(),g=null;d<a-c;){var j=new Date(d);if(j.getTimezoneOffset()!==f){g=j;break}d+=c}return 864E5===b?o(g,36E5,6E4):36E5===b?o(g,6E4,1E3):g},j=function(a,b,c,d){if("N/A"!==c)return c;if("Asia/Beirut"===b){if("Africa/Cairo"===d.name&&13983768E5===a[6].s&&14116788E5===a[6].e||"Asia/Jerusalem"===d.name&&13959648E5===
a[6].s&&14118588E5===a[6].e)return 0}else if("America/Santiago"===b){if("America/Asuncion"===d.name&&14124816E5===a[6].s&&1397358E6===a[6].e||"America/Campo_Grande"===d.name&&14136912E5===a[6].s&&13925196E5===a[6].e)return 0}else if("America/Montevideo"===b){if("America/Sao_Paulo"===d.name&&14136876E5===a[6].s&&1392516E6===a[6].e)return 0}else if("Pacific/Auckland"===b&&"Pacific/Fiji"===d.name&&14142456E5===a[6].s&&13961016E5===a[6].e)return 0;return c},l=function(c,d){for(var f={},g=a.olson.dst_rules.zones,
k=g.length,l=b[d],m=0;m<k;m++){var y=g[m],w;w=g[m];for(var v=0,x=0;x<c.length;x++)if(w.rules[x]&&c[x]){if(c[x].s>=w.rules[x].s&&c[x].e<=w.rules[x].e)v=0,v+=Math.abs(c[x].s-w.rules[x].s),v+=Math.abs(w.rules[x].e-c[x].e);else{v="N/A";break}if(864E6<v){v="N/A";break}}w=j(c,d,v,w);"N/A"!==w&&(f[y.name]=w)}for(var B in f)if(f.hasOwnProperty(B))for(g=0;g<l.length;g++)if(l[g]===B)return B;return d},m=function(b){var c=function(){for(var b=[],c=0;c<a.olson.dst_rules.years.length;c++){var d;d=a.olson.dst_rules.years[c];
var f=(new Date(d,0,1,0,0,1,0)).getTime();d=(new Date(d,12,31,23,59,59)).getTime();for(var j=(new Date(f)).getTimezoneOffset(),k=null,l=null;f<d-864E5;){var m=new Date(f),o=m.getTimezoneOffset();o!==j&&(o<j&&(k=m),o>j&&(l=m),j=o);f+=864E5}d=k&&l?{s:g(k).getTime(),e:g(l).getTime()}:!1;b.push(d)}return b}();return function(a){for(var b=0;b<a.length;b++)if(!1!==a[b])return!0;return!1}(c)?l(c,b):b};return{determine:function(){var c=navigator.userAgent.toLowerCase(),g=k();if(!g){if(-1!=c.indexOf("firefox")&&
"undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(c=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=c.indexOf("montevideo")||-1!=c.indexOf("uruguay")))g="America/Montevideo";g||(g=a.olson.timezones[d()]);"undefined"!==typeof b[g]&&(g=m(g))}return{name:function(){return g}}}}}();a.olson=a.olson||{};a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu",
"-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab",
"-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg",
"300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe",
"660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572E5,s:12090744E5},{e:1250802E6,s:1240524E6},{e:12858804E5,s:12840696E5},!1,!1,!1,{e:14116788E5,s:1406844E6}]},{name:"Africa/Casablanca",rules:[{e:12202236E5,
s:12122784E5},{e:12508092E5,s:12438144E5},{e:1281222E6,s:12727584E5},{e:13120668E5,s:13017888E5},{e:13489704E5,s:1345428E6},{e:13828392E5,s:13761E8},{e:14142888E5,s:14069448E5}]},{name:"America/Asuncion",rules:[{e:12050316E5,s:12243888E5},{e:12364812E5,s:12558384E5},{e:12709548E5,s:12860784E5},{e:13024044E5,s:1317528E6},{e:1333854E6,s:13495824E5},{e:1364094E6,s:1381032E6},{e:13955436E5,s:14124816E5}]},{name:"America/Campo_Grande",rules:[{e:12032172E5,s:12243888E5},{e:12346668E5,s:12558384E5},{e:12667212E5,
s:1287288E6},{e:12981708E5,s:13187376E5},{e:13302252E5,s:1350792E6},{e:136107E7,s:13822416E5},{e:13925196E5,s:14136912E5}]},{name:"America/Goose_Bay",rules:[{e:122559486E4,s:120503526E4},{e:125704446E4,s:123648486E4},{e:128909886E4,s:126853926E4},{e:13205556E5,s:129998886E4},{e:13520052E5,s:13314456E5},{e:13834548E5,s:13628952E5},{e:14149044E5,s:13943448E5}]},{name:"America/Havana",rules:[{e:12249972E5,s:12056436E5},{e:12564468E5,s:12364884E5},{e:12885012E5,s:12685428E5},{e:13211604E5,s:13005972E5},
{e:13520052E5,s:13332564E5},{e:13834548E5,s:13628916E5},{e:14149044E5,s:13943412E5}]},{name:"America/Mazatlan",rules:[{e:1225008E6,s:12074724E5},{e:12564576E5,s:1238922E6},{e:1288512E6,s:12703716E5},{e:13199616E5,s:13018212E5},{e:13514112E5,s:13332708E5},{e:13828608E5,s:13653252E5},{e:14143104E5,s:13967748E5}]},{name:"America/Mexico_City",rules:[{e:12250044E5,s:12074688E5},{e:1256454E6,s:12389184E5},{e:12885084E5,s:1270368E6},{e:1319958E6,s:13018176E5},{e:13514076E5,s:13332672E5},{e:13828572E5,s:13653216E5},
{e:14143068E5,s:13967712E5}]},{name:"America/Miquelon",rules:[{e:12255984E5,s:12050388E5},{e:1257048E6,s:12364884E5},{e:12891024E5,s:12685428E5},{e:1320552E6,s:12999924E5},{e:13520016E5,s:1331442E6},{e:13834512E5,s:13628916E5},{e:14149008E5,s:13943412E5}]},{name:"America/Santa_Isabel",rules:[{e:12250116E5,s:1207476E6},{e:12564612E5,s:12389256E5},{e:12885156E5,s:12703752E5},{e:13199652E5,s:13018248E5},{e:13514148E5,s:13332744E5},{e:13828644E5,s:13653288E5},{e:1414314E6,s:13967784E5}]},{name:"America/Santiago",
rules:[{e:1206846E6,s:1223784E6},{e:1237086E6,s:12552336E5},{e:127035E7,s:12866832E5},{e:13048236E5,s:13138992E5},{e:13356684E5,s:13465584E5},{e:1367118E6,s:13786128E5},{e:13985676E5,s:14100624E5}]},{name:"America/Sao_Paulo",rules:[{e:12032136E5,s:12243852E5},{e:12346632E5,s:12558348E5},{e:12667176E5,s:12872844E5},{e:12981672E5,s:1318734E6},{e:13302216E5,s:13507884E5},{e:13610664E5,s:1382238E6},{e:1392516E6,s:14136876E5}]},{name:"Asia/Amman",rules:[{e:1225404E6,s:12066552E5},{e:12568536E5,s:12381048E5},
{e:12883032E5,s:12695544E5},{e:13197528E5,s:13016088E5},!1,!1,{e:14147064E5,s:13959576E5}]},{name:"Asia/Damascus",rules:[{e:12254868E5,s:120726E7},{e:125685E7,s:12381048E5},{e:12882996E5,s:12701592E5},{e:13197492E5,s:13016088E5},{e:13511988E5,s:13330584E5},{e:13826484E5,s:1364508E6},{e:14147028E5,s:13959576E5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572E5,s:12066552E5},{e:12520152E5,s:12381048E5},{e:1281474E6,s:126964086E4},{e:1312146E6,s:130160886E4},{e:13481784E5,
s:13330584E5},{e:13802292E5,s:1364508E6},{e:1414098E6,s:13959576E5}]},{name:"Asia/Irkutsk",rules:[{e:12249576E5,s:12068136E5},{e:12564072E5,s:12382632E5},{e:12884616E5,s:12697128E5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612E5,s:12066624E5},{e:1254006E6,s:1238112E6},{e:1284246E6,s:12695616E5},{e:131751E7,s:1301616E6},{e:13483548E5,s:13330656E5},{e:13828284E5,s:13645152E5},{e:1414278E6,s:13959648E5}]},{name:"Asia/Kamchatka",rules:[{e:12249432E5,s:12067992E5},{e:12563928E5,s:12382488E5},
{e:12884508E5,s:12696984E5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612E5,s:12068172E5},{e:12564108E5,s:12382668E5},{e:12884652E5,s:12697164E5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648E5,s:12068208E5},{e:12564144E5,s:12382704E5},{e:12884688E5,s:126972E7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504E5,s:12068064E5},{e:12564E8,s:1238256E6},{e:12884544E5,s:12697056E5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954E6,s:120681E7},{e:12564036E5,s:12382596E5},{e:1288458E6,
s:12697092E5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684E5,s:12068244E5},{e:1256418E6,s:1238274E6},{e:12884724E5,s:12697236E5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972E6,s:1206828E6},{e:12564216E5,s:12382776E5},{e:1288476E6,s:12697272E5},{e:13199256E5,s:13011768E5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076E5,s:12231342E5},{e:12388572E5,s:12545838E5},{e:12703068E5,s:12860334E5},{e:13017564E5,s:1317483E6},{e:1333206E6,s:13495374E5},{e:13652604E5,s:1380987E6},
{e:139671E7,s:14124366E5}]},{name:"Australia/Perth",rules:[{e:12068136E5,s:12249576E5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]},{name:"Europe/Minsk",rules:[{e:12249792E5,s:12068352E5},{e:12564288E5,s:12382848E5},{e:12884832E5,s:12697344E5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756E5,
s:12068316E5},{e:12564252E5,s:12382812E5},{e:12884796E5,s:12697308E5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528E5,s:13168728E5},{e:13332024E5,s:13489272E5},{e:13652568E5,s:13803768E5},{e:13967064E5,s:14118264E5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984E5,s:12878424E5},{e:13271544E5,s:1319292E6},{e:1358604E6,s:13507416E5},{e:139005E7,s:1382796E6},{e:14215032E5,s:14148504E5}]},{name:"Europe/London",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,
s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]}]};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=a:"undefined"!==typeof define&&null!==define&&null!=define.amd?define([],function(){return a}):"undefined"===typeof d?window.jstz=a:d.jstz=a})();gx.livePrev=function(){gx.ajax.getPostInfo("",!1);postInfo=gx.ajax.getPostInfo("",!1);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5E3})},
onMessage:function(d){var a=function(a){var b=$.map(document.styleSheets,function(b){return b.href==a?b:null});return 0<b.length?b[0]:void 0},b=function(a,b,c){return c((a||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(b||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},c=function(a,c,d){var f=a.cssRules,m=f.length,n=!1,o=!1;$.each(f,function(d,f){f&&(f.selectorText&&b(f.selectorText,c.replace(":","::"),function(a,b){return a==b}))&&(a.deleteRule(d),m=d,n=!0)});n||$.each(f,function(f,l){l&&
(l.selectorText&&b(l.selectorText,c.replace(":","::")+",",function(a,b){return 0==a.indexOf(b)}))&&(a.deleteRule(f),m=f,a.insertRule(l.selectorText+d.replace(/.*{/,"{"),m),o=!0)});o||a.insertRule(d,m)},f=function(d){var f=gx.getThemeElement();if(f=a(f.href))for(var j=0==d.indexOf("@media",0),l=d.split(/{|}/),m=0;m<l.length-1;m+=2){var n=l[m].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(n)||(j?$.each(f.cssRules,function(a,d){if(j&&!d.selectorText){var f=d.cssText.split(/{/)[0];if(b(f.replace(/ all and/gm,
""),n)){n=l[m+1].replace(/(\r\n|\r|\n| )/gm,"");c(d,n,n+" {"+l[m+2]+"}")}}}):c(f,n,n+" {"+l[m+1]+"}"))}},d=gx.json.evalJSON(d);if("KBOK"===d.Type)gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if("KBDoesNotMatchGUID"===d.Type)gx.livePrevWS.onError();else"ThemeStyleChanged"===d.Type&&f(d.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},
onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var d={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;
d.port=gx.livePrev.port;d.wsProtocol="https:"===location.protocol?"wss://":"ws://";d.host=gx.livePrevWS.host+":"+d.port;d.resourceUrl="/live/";d.namespace="livepreview";d.maxRetries=10;d.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(d);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,
{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});if(!gx.livePrevWS.clientGUID){var d=gx.livePrevWS,a=gx.http.getCookie("GXClientID"),a=a||gx.guid.generate();gx.http.setCookie("GXClientID",a,1);d.clientGUID=a}var d="",a=[],b=gx.livePreviewUri.split("?");
0<b.length&&(b=b[1],b=b.split(":"),2<b.length&&(d=b[1],a=b[2].substring(1,b[2].length-1).split(","),b=b[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=a;gx.livePrevWS.KBName=d;gx.livePrevWS.KBUUID=b;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};
gx.nav=function(){var d=function(){var a={top:!0,right:!0,bottom:!0,left:!0};return function(b){return!!a[b.toLowerCase()]}}(),a=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&(gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName))&&(b=a.substring(gx.pO.PackageName.length+1));return b},b=function(a){var a=a.split("?"),b,c,d;if(0<a.length){b=2==a.length?a[1].split(","):[];c=0;for(d=b.length;c<d;c++)b[c]=decodeURIComponent(b[c]);return{obj:a[0],args:b}}return!1},
c={};return{setCallTarget:function(a,b){c[a.toLowerCase()]=b.toLowerCase()},willRedirect:function(b){return gx.pO&&!gx.pO.fullAjax?!0:!d(c[a(b).toLowerCase()]||"")},willRedirectByUrl:function(a){a=b(a);return this.willRedirect(a.obj,a.args)},call:function(b,k,g){var j=a(b),l=gx.pO.MasterPage,g=g||c[j.toLowerCase()]||"";delete c[j.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(b,k),!1,!1,gx.pO):d(g)?l&&l.createObjectInTarget(g,j,k):gx.http.redirect(gx.http.formatLink(b,k),
!1,!1,gx.pO)},callUrl:function(a,c){var d=b(a);d&&this.call(d.obj,d.args,c)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){(function(){function a(a,b,c){return[parseFloat(a[0])*(q.test(a[0])?b/100:1),parseFloat(a[1])*(q.test(a[1])?c/100:1)]}function b(a,b){return parseInt(d.css(a,b),10)||0}function c(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:d.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,
offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}d.ui=d.ui||{};var f,k,g=Math.max,j=Math.abs,l=Math.round,m=/left|center|right/,n=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,q=/%$/,t=d.fn.position;d.position={scrollbarWidth:function(){if(void 0!==f)return f;var a,b,c=d("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");b=c.children()[0];d("body").append(c);
a=b.offsetWidth;c.css("overflow","scroll");b=b.offsetWidth;a===b&&(b=c[0].clientWidth);c.remove();return f=a-b},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight?d.position.scrollbarWidth():0,height:b?d.position.scrollbarWidth():0}},getWithinInfo:function(a){var a=d(a||
window),b=d.isWindow(a[0]),c=!!a[0]&&9===a[0].nodeType;return{element:a,isWindow:b,isDocument:c,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||c?a.width():a.outerWidth(),height:b||c?a.height():a.outerHeight()}}};d.fn.position=function(f){if(!f||!f.of)return t.apply(this,arguments);var f=d.extend({},f),s,u,y,q,v,x,B=d(f.of),C=d.position.getWithinInfo(f.within),E=d.position.getScrollInfo(C),z=(f.collision||"flip").split(" "),A={};x=c(B);B[0].preventDefault&&
(f.at="left top");u=x.width;y=x.height;q=x.offset;v=d.extend({},q);d.each(["my","at"],function(){var a=(f[this]||"").split(" "),b,c;a.length===1&&(a=m.test(a[0])?a.concat(["center"]):n.test(a[0])?["center"].concat(a):["center","center"]);a[0]=m.test(a[0])?a[0]:"center";a[1]=n.test(a[1])?a[1]:"center";b=o.exec(a[0]);c=o.exec(a[1]);A[this]=[b?b[0]:0,c?c[0]:0];f[this]=[p.exec(a[0])[0],p.exec(a[1])[0]]});1===z.length&&(z[1]=z[0]);"right"===f.at[0]?v.left+=u:"center"===f.at[0]&&(v.left+=u/2);"bottom"===
f.at[1]?v.top+=y:"center"===f.at[1]&&(v.top+=y/2);s=a(A.at,u,y);v.left+=s[0];v.top+=s[1];return this.each(function(){var c,m,n=d(this),o=n.outerWidth(),p=n.outerHeight(),x=b(this,"marginLeft"),t=b(this,"marginTop"),L=o+x+b(this,"marginRight")+E.width,M=p+t+b(this,"marginBottom")+E.height,D=d.extend({},v),K=a(A.my,n.outerWidth(),n.outerHeight());if(f.my[0]==="right")D.left=D.left-o;else if(f.my[0]==="center")D.left=D.left-o/2;if(f.my[1]==="bottom")D.top=D.top-p;else if(f.my[1]==="center")D.top=D.top-
p/2;D.left=D.left+K[0];D.top=D.top+K[1];if(!k){D.left=l(D.left);D.top=l(D.top)}c={marginLeft:x,marginTop:t};d.each(["left","top"],function(a,b){if(d.ui.position[z[a]])d.ui.position[z[a]][b](D,{targetWidth:u,targetHeight:y,elemWidth:o,elemHeight:p,collisionPosition:c,collisionWidth:L,collisionHeight:M,offset:[s[0]+K[0],s[1]+K[1]],my:f.my,at:f.at,within:C,elem:n})});f.using&&(m=function(a){var b=q.left-D.left,c=b+u-o,d=q.top-D.top,k=d+y-p,l={target:{element:B,left:q.left,top:q.top,width:u,height:y},
element:{element:n,left:D.left,top:D.top,width:o,height:p},horizontal:c<0?"left":b>0?"right":"center",vertical:k<0?"top":d>0?"bottom":"middle"};if(u<o&&j(b+c)<u)l.horizontal="center";if(y<p&&j(d+k)<y)l.vertical="middle";l.important=g(j(b),j(c))>g(j(d),j(k))?"horizontal":"vertical";f.using.call(this,a,l)});n.offset(d.extend(D,{using:m}))})};d.ui.position={fit:{left:function(a,b){var c=b.within,d=c.isWindow?c.scrollLeft:c.offset.left,f=c.width,j=a.left-b.collisionPosition.marginLeft,c=d-j,k=j+b.collisionWidth-
f-d;b.collisionWidth>f?0<c&&0>=k?(d=a.left+c+b.collisionWidth-f-d,a.left+=c-d):a.left=0<k&&0>=c?d:c>k?d+f-b.collisionWidth:d:a.left=0<c?a.left+c:0<k?a.left-k:g(a.left-j,a.left)},top:function(a,b){var c=b.within,d=c.isWindow?c.scrollTop:c.offset.top,f=b.within.height,j=a.top-b.collisionPosition.marginTop,c=d-j,k=j+b.collisionHeight-f-d;b.collisionHeight>f?0<c&&0>=k?(d=a.top+c+b.collisionHeight-f-d,a.top+=c-d):a.top=0<k&&0>=c?d:c>k?d+f-b.collisionHeight:d:a.top=0<c?a.top+c:0<k?a.top-k:g(a.top-j,a.top)}},
flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,f=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-g,l=k+b.collisionWidth-f-g,k="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,n=-2*b.offset[0];if(0>c){if(d=a.left+k+m+n+b.collisionWidth-f-d,0>d||d<j(c))a.left+=k+m+n}else if(0<l&&(d=a.left-b.collisionPosition.marginLeft+k+m+n-g,0<d||j(d)<l))a.left+=k+m+n},
top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,f=c.height,g=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-g,l=k+b.collisionHeight-f-g,k="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,n=-2*b.offset[1];if(0>c){if(d=a.top+k+m+n+b.collisionHeight-f-d,0>d||d<j(c))a.top+=k+m+n}else if(0<l&&(d=a.top-b.collisionPosition.marginTop+k+m+n-g,0<d||j(d)<l))a.top+=k+m+n}},flipfit:{left:function(){d.ui.position.flip.left.apply(this,
arguments);d.ui.position.fit.left.apply(this,arguments)},top:function(){d.ui.position.flip.top.apply(this,arguments);d.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,b,c,f,g=document.getElementsByTagName("body")[0];c=document.createElement("div");a=document.createElement(g?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&d.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in b)a.style[f]=b[f];a.appendChild(c);b=g||document.documentElement;
b.insertBefore(a,b.firstChild);c.style.cssText="position: absolute; left: 10.7432222px;";c=d(c).offset().left;k=10<c&&11>c;a.innerHTML="";b.removeChild(a)})()})()});
